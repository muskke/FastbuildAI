import{b1 as z,q as T,V,r as g,l as N,d as a,o,Q as e,B as m,y as p,S as y,R as n,J as s,W as A,aw as _,x as h,_ as F,s as w,ac as f,aY as G}from"#entry";import{_ as I}from"./3ql5fPzj.js";import{a as P}from"./IAHB8Fn-.js";import{u as D}from"./D1hA3BKJ.js";function S(k){return z("/category",k)}const U={class:"bg-background min-h-screen py-12"},W={class:"mx-auto flex max-w-6xl gap-40 px-4 sm:px-6 lg:px-8"},q={class:"flex-1"},E={class:"mb-8 lg:hidden"},J={class:"flex flex-wrap items-center gap-2"},M={key:0,class:"ml-1 text-xs opacity-70"},Q={key:0,class:"flex items-center justify-center py-20"},R={key:1,class:"flex items-center justify-center py-20"},Y={class:"text-muted-foreground text-lg"},H={key:2,class:"space-y-8"},K=["onClick"],O={class:"flex-1"},X={class:"text-foreground group-hover:text-primary mb-3 text-xl leading-tight font-bold transition-colors"},Z={key:0,class:"text-muted-foreground line-clamp-1 text-base leading-relaxed"},tt={class:"text-muted-foreground mt-1 flex flex-wrap items-center gap-x-3 gap-y-1 text-xs"},et={class:"sticky top-12 hidden h-fit w-48 shrink-0 lg:block"},st={class:"space-y-1"},ot={class:"text-foreground mb-4 text-sm font-medium"},nt={class:"flex w-full items-center justify-between"},at={key:0,class:"text-muted-foreground/60 text-xs"},ct=T({__name:"index",setup(k){const{t:d}=V(),x=g([]),v=g([]),i=g(void 0),$=async()=>{try{v.value=await S()||[]}catch(r){console.error("获取分类列表失败:",r)}},{lockFn:C,isLock:B}=D(async()=>{try{x.value=await P(i.value)||[]}catch(r){console.error("获取文章列表失败:",r)}}),c=r=>{i.value=r,C()};return N(()=>{Promise.all([$(),C()])}),(r,l)=>{const u=A,L=F,j=I;return o(),a("div",U,[e("div",W,[e("div",q,[e("div",E,[e("div",J,[m(u,{variant:s(i)===void 0?"solid":"outline",color:s(i)===void 0?"primary":"neutral",size:"sm",onClick:l[0]||(l[0]=t=>c(void 0))},{default:p(()=>[y(n(s(d)("article.list.categories.all")),1)]),_:1},8,["variant","color"]),(o(!0),a(_,null,h(s(v),t=>(o(),w(u,{key:t.id,variant:s(i)===t.id?"solid":"outline",color:s(i)===t.id?"primary":"neutral",size:"sm",onClick:b=>c(t.id)},{default:p(()=>[y(n(t.name)+" ",1),t.articleCount>0?(o(),a("span",M," ("+n(t.articleCount)+") ",1)):f("",!0)]),_:2},1032,["variant","color","onClick"]))),128))])]),s(B)?(o(),a("div",Q,[m(L,{name:"i-lucide-loader-2",class:"text-muted-foreground size-8 animate-spin"})])):s(x).length===0?(o(),a("div",R,[e("p",Y,n(s(d)("article.list.empty")),1)])):(o(),a("div",H,[(o(!0),a(_,null,h(s(x),t=>(o(),a("article",{key:t.id,class:"group flex cursor-pointer gap-6 pb-10 transition-all",onClick:b=>("navigateTo"in r?r.navigateTo:s(G))(`/article/${t.id}`)},[e("div",O,[e("h2",X,n(t.title),1),t.summary?(o(),a("p",Z,n(t.summary),1)):f("",!0),e("div",tt,[e("span",null,n(t.author?.nickname||t.author?.username||"未知作者"),1),l[3]||(l[3]=e("span",{class:"text-muted-foreground/50"},"|",-1)),m(j,{datetime:t.publishedAt||t.createdAt,mode:"date"},null,8,["datetime"]),l[4]||(l[4]=e("span",{class:"text-muted-foreground/50"},"|",-1)),t.category?.name?(o(),a(_,{key:0},[e("span",null,n(t.category.name),1),l[2]||(l[2]=e("span",{class:"text-muted-foreground/50"},"|",-1))],64)):f("",!0),e("span",null,n(t.viewCount||0)+n(s(d)("article.list.views")),1)])])],8,K))),128))]))]),e("aside",et,[e("div",st,[e("h3",ot,n(s(d)("article.list.categories.title")),1),m(u,{variant:s(i)===void 0?"solid":"ghost",color:s(i)===void 0?"primary":"neutral",size:"sm",class:"w-full justify-start",onClick:l[1]||(l[1]=t=>c(void 0))},{default:p(()=>[y(n(s(d)("article.list.categories.all")),1)]),_:1},8,["variant","color"]),(o(!0),a(_,null,h(s(v),t=>(o(),w(u,{key:t.id,variant:s(i)===t.id?"solid":"ghost",color:s(i)===t.id?"primary":"neutral",size:"sm",class:"w-full justify-start",onClick:b=>c(t.id)},{default:p(()=>[e("div",nt,[e("span",null,n(t.name),1),t.articleCount>0?(o(),a("span",at,n(t.articleCount),1)):f("",!0)])]),_:2},1032,["variant","color","onClick"]))),128))])])])])}}});export{ct as default};
