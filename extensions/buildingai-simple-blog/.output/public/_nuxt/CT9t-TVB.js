const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Da6ckowX.js","./BPM9EkAu.js","./BjyhBLpb.js","./Cp1wKOi2.js","./CqkleIqs.js","./ChTZtME1.js","./CVJlEypN.js","./jOvN_MzA.js","./C_wlX4O4.js","./Djs9Agcq.js","./s2lweFA8.js","./2-Qad1x6.js","./Vq6WnXMj.js","./CGkG6ujT.js","./DLXS5diL.js","./YGBcfQFB.js","./Cp_ETqS-.js","./y35Lf0Nz.js","./BMSQkwth.js","./DvlHZVSd.js","./Bcm0fnuO.js","./CTcKPVt7.js","./CgaM_lbl.js","./DlAUqK2U.js","./bHLwCD_d.js","./DOVLrnnX.js","./D1hA3BKJ.js"])))=>i.map(i=>d[i]);
import{q as A,b2 as F,U as D,V as B,k as R,l as S,d as p,Q as d,s as j,B as u,y as w,J as t,R as y,W as C,X as U,o as m,_ as E,Y as I,Z as L}from"#entry";import{b as V,c as $}from"./BqooJc1P.js";import{u as b}from"./D1hA3BKJ.js";import{A as z}from"./bHLwCD_d.js";function O(i,r){return Object.keys(i).forEach(c=>{const s=c,e=r[s];e!==void 0&&(typeof e=="object"&&e!==null?Object.keys(e).length>0&&(i[s]=e):i[s]=e)}),i}const P={class:"article-edit-container relative"},T={class:"bg-background sticky top-0 z-10 mb-4 flex w-full items-center justify-baseline pb-2"},q={class:"text-base font-medium"},M={class:"ml-4 text-xl font-bold"},N={key:0,class:"flex items-center justify-center py-10"},W=A({__name:"edit",setup(i){const r=I(()=>L(()=>import("./Da6ckowX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url)),{query:c}=F(),s=U(),e=D(),{t:n}=B(),f=R({title:"",content:"",summary:"",cover:"",status:z.DRAFT,sort:0,categoryId:void 0}),l=c.id,{lockFn:k,isLock:v}=b(async()=>{if(c.id)try{const a=await V(l);O(f,a)}catch(a){console.error("获取详情失败:",a),e.error(n("article.edit.messages.fetchDetailFailed"))}}),{lockFn:h}=b(async a=>{try{await $(l,a),e.success(n("article.edit.messages.updateSuccess")),setTimeout(()=>s.back(),1e3)}catch(o){console.error("更新失败:",o),e.error(n("article.edit.messages.updateFailed"))}});return S(()=>k()),(a,o)=>{const _=E,g=C;return m(),p("div",P,[d("div",T,[u(g,{color:"neutral",variant:"soft",onClick:o[0]||(o[0]=x=>t(s).back())},{default:w(()=>[u(_,{name:"i-lucide-arrow-left",class:"size-5 cursor-pointer"}),d("span",q,y(t(n)("article.edit.navigation.back")),1)]),_:1}),d("h1",M,y(t(n)("article.edit.title")),1)]),t(v)?(m(),p("div",N,[u(_,{name:"i-lucide-loader-2",class:"size-8 animate-spin"})])):(m(),j(t(r),{key:1,id:t(l),"initial-data":t(f),onSubmit:t(h),onCancel:o[1]||(o[1]=x=>t(s).back())},null,8,["id","initial-data","onSubmit"]))])}}});export{W as default};
