import{bM as B,j as T,r as g,y as A,d as n,o,aG as e,ad as m,ap as p,aI as y,aH as a,aA as s,aL as F,F as _,ao as h,as as G,am as w,b0 as f,bH as I}from"#entry";import{_ as N}from"./J_F_phuk.js";import{a as V}from"./DbiQngVl.js";import{u as P}from"./BoxSbMi3.js";import{u as D}from"./D1hA3BKJ.js";function H(k){return B("/category",k)}const M={class:"bg-background min-h-screen py-12"},U={class:"mx-auto flex max-w-6xl gap-40 px-4 sm:px-6 lg:px-8"},E={class:"flex-1"},S={class:"mb-8 lg:hidden"},W={class:"flex flex-wrap items-center gap-2"},q={key:0,class:"ml-1 text-xs opacity-70"},J={key:0,class:"flex items-center justify-center py-20"},K={key:1,class:"flex items-center justify-center py-20"},O={class:"text-muted-foreground text-lg"},Q={key:2,class:"space-y-8"},R=["onClick"],X={class:"flex-1"},Y={class:"text-foreground group-hover:text-primary mb-3 text-xl leading-tight font-bold transition-colors"},Z={key:0,class:"text-muted-foreground line-clamp-1 text-base leading-relaxed"},tt={class:"text-muted-foreground mt-1 flex flex-wrap items-center gap-x-3 gap-y-1 text-xs"},et={class:"sticky top-12 hidden h-fit w-48 shrink-0 lg:block"},st={class:"space-y-1"},ot={class:"text-foreground mb-4 text-sm font-medium"},at={class:"flex w-full items-center justify-between"},nt={key:0,class:"text-muted-foreground/60 text-xs"},ut=T({__name:"index",setup(k){const{t:d}=P(),x=g([]),v=g([]),i=g(void 0),$=async()=>{try{v.value=await H()||[]}catch(r){console.error("获取分类列表失败:",r)}},{lockFn:C,isLock:L}=D(async()=>{try{x.value=await V(i.value)||[]}catch(r){console.error("获取文章列表失败:",r)}}),c=r=>{i.value=r,C()};return A(()=>{Promise.all([$(),C()])}),(r,l)=>{const u=F,j=G,z=N;return o(),n("div",M,[e("div",U,[e("div",E,[e("div",S,[e("div",W,[m(u,{variant:s(i)===void 0?"solid":"outline",color:s(i)===void 0?"primary":"neutral",size:"sm",onClick:l[0]||(l[0]=t=>c(void 0))},{default:p(()=>[y(a(s(d)("article.list.categories.all")),1)]),_:1},8,["variant","color"]),(o(!0),n(_,null,h(s(v),t=>(o(),w(u,{key:t.id,variant:s(i)===t.id?"solid":"outline",color:s(i)===t.id?"primary":"neutral",size:"sm",onClick:b=>c(t.id)},{default:p(()=>[y(a(t.name)+" ",1),t.articleCount>0?(o(),n("span",q," ("+a(t.articleCount)+") ",1)):f("",!0)]),_:2},1032,["variant","color","onClick"]))),128))])]),s(L)?(o(),n("div",J,[m(j,{name:"i-lucide-loader-2",class:"text-muted-foreground size-8 animate-spin"})])):s(x).length===0?(o(),n("div",K,[e("p",O,a(s(d)("article.list.empty")),1)])):(o(),n("div",Q,[(o(!0),n(_,null,h(s(x),t=>(o(),n("article",{key:t.id,class:"group flex cursor-pointer gap-6 pb-10 transition-all",onClick:b=>("navigateTo"in r?r.navigateTo:s(I))(`/article/${t.id}`)},[e("div",X,[e("h2",Y,a(t.title),1),t.summary?(o(),n("p",Z,a(t.summary),1)):f("",!0),e("div",tt,[e("span",null,a(t.author?.nickname||t.author?.username||"未知作者"),1),l[3]||(l[3]=e("span",{class:"text-muted-foreground/50"},"|",-1)),m(z,{datetime:t.publishedAt||t.createdAt,mode:"date"},null,8,["datetime"]),l[4]||(l[4]=e("span",{class:"text-muted-foreground/50"},"|",-1)),t.category?.name?(o(),n(_,{key:0},[e("span",null,a(t.category.name),1),l[2]||(l[2]=e("span",{class:"text-muted-foreground/50"},"|",-1))],64)):f("",!0),e("span",null,a(t.viewCount||0)+a(s(d)("article.list.views")),1)])])],8,R))),128))]))]),e("aside",et,[e("div",st,[e("h3",ot,a(s(d)("article.list.categories.title")),1),m(u,{variant:s(i)===void 0?"solid":"ghost",color:s(i)===void 0?"primary":"neutral",size:"sm",class:"w-full justify-start",onClick:l[1]||(l[1]=t=>c(void 0))},{default:p(()=>[y(a(s(d)("article.list.categories.all")),1)]),_:1},8,["variant","color"]),(o(!0),n(_,null,h(s(v),t=>(o(),w(u,{key:t.id,variant:s(i)===t.id?"solid":"ghost",color:s(i)===t.id?"primary":"neutral",size:"sm",class:"w-full justify-start",onClick:b=>c(t.id)},{default:p(()=>[e("div",at,[e("span",null,a(t.name),1),t.articleCount>0?(o(),n("span",nt,a(t.articleCount),1)):f("",!0)])]),_:2},1032,["variant","color","onClick"]))),128))])])])])}}});export{ut as default};
