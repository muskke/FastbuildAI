const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BEg-3BDH.js","./BjyhBLpb.js","./vRyQvext.js","./CNxEN1aC.js","./CTcKPVt7.js","./DLXS5diL.js","./Vq6WnXMj.js","./CGkG6ujT.js","./s2lweFA8.js","./BPM9EkAu.js"])))=>i.map(i=>d[i]);
import{q as E,aO as O,U as W,aP as j,V as D,k as Z,aT as J,f as g,s as Q,o as u,y as i,B as t,d as p,ac as x,Q as m,aS as Y,M as b,R as d,_ as G,aw as H,x as K,S as _,J as a,Y as X,W as ee,Z as se}from"#entry";import{_ as te}from"./BPM9EkAu.js";import{c as oe,a as y,b as ae,d as ne,_ as re}from"./Cp1wKOi2.js";import{_ as ie}from"./D8tVY6MN.js";import{_ as le}from"./BU9vo0DW.js";import{u as me}from"./D1hA3BKJ.js";import"./CqkleIqs.js";import"./jOvN_MzA.js";import"./C_wlX4O4.js";import"./Djs9Agcq.js";import"./s2lweFA8.js";import"./2-Qad1x6.js";import"./Vq6WnXMj.js";import"./CGkG6ujT.js";import"./DLXS5diL.js";import"./YGBcfQFB.js";const ce={key:0,class:"mt-2"},ue={class:"inline-flex cursor-help items-center","aria-label":"Password requirements"},de={class:"space-y-1 p-2","aria-label":"Password requirements"},ge={class:"text-xs font-light"},pe={class:"sr-only"},fe={class:"flex items-center gap-1 text-xs"},we={key:0,class:"mt-8 mb-4 text-left"},Re=E({__name:"register",emits:["switchComponent","success"],setup(_e,{emit:q}){const U=X(()=>se(()=>import("./BEg-3BDH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),P=q,c=O(),z=W(),f=j(),{t:s}=D(),C=oe({username:y().required(s("login.validation.accountRequired")).min(3,s("login.validation.accountMinLength")).max(20,s("login.validation.accountMaxLength")),password:y().required(s("login.validation.passwordRequired")).min(6,s("login.validation.passwordMinLength")).max(25,s("login.validation.passwordMaxLength")).matches(/^(?=.*[a-z])(?=.*[0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])/,s("login.validation.passwordFormat")),confirmPassword:y().required(s("login.validation.confirmPasswordRequired")).oneOf([ae("password")],s("login.validation.passwordMismatch"))}),r=Z({username:"",password:"",confirmPassword:""}),{lockFn:L,isLock:R}=me(async()=>{if(!f.isAgreed&&c.loginWay.loginAgreement&&c.loginSettings?.showPolicyAgreement){z.warning(s("login.messages.agreementRequired"),{title:s("login.messages.agreementTitle"),duration:3e3});return}try{const e=await J({terminal:"1",...r});P("success",{...e,...e.user})}catch(e){console.log(s("login.messages.registerFailed"),e)}});function F(e){return[{regex:/.{8,}/,text:s("login.requirements.minLength8")},{regex:/\d/,text:s("login.requirements.number")},{regex:/[a-z]/,text:s("login.requirements.lowercase")},{regex:/[A-Z]/,text:s("login.requirements.uppercase")}].map(w=>({met:w.regex.test(e),text:w.text}))}const $=g(()=>F(r.password)),l=g(()=>$.value.filter(e=>e.met).length),S=g(()=>l.value===0?"neutral":l.value<=1?"error":l.value<=2||l.value===3?"warning":"success"),V=g(()=>l.value===0?"":l.value<=1?s("login.strength.weak"):l.value<=3?s("login.strength.medium"):s("login.strength.strong")),M=g(()=>{const e=S.value;return e==="error"?"text-error":e==="warning"?"text-warning":e==="success"?"text-success":"text-muted"});return(e,n)=>{const w=te,h=ne,k=ie,T=Y,v=G,B=le,A=ee,I=re;return u(),Q(I,{schema:a(C),state:r,onSubmit:a(L)},{default:i(()=>[t(h,{label:e.$t("login.account"),name:"username",required:""},{default:i(()=>[t(w,{modelValue:r.username,"onUpdate:modelValue":n[0]||(n[0]=o=>r.username=o),class:"w-full",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:e.$t("login.placeholders.enterAccount")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(h,{label:e.$t("login.password"),name:"password",class:"mt-2",required:""},{default:i(()=>[t(k,{modelValue:r.password,"onUpdate:modelValue":n[1]||(n[1]=o=>r.password=o),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:e.$t("login.placeholders.enterPassword")},null,8,["modelValue","placeholder"]),r.password?(u(),p("div",ce,[t(T,{color:S.value,"model-value":l.value,max:4,size:"sm"},null,8,["color","model-value"]),V.value?(u(),p("div",{key:0,class:b(["mt-1 flex items-center gap-1 text-xs font-medium",M.value])},[m("span",null,d(V.value),1),t(B,{mode:"hover"},{content:i(()=>[m("ul",de,[(u(!0),p(H,null,K($.value,(o,N)=>(u(),p("li",{key:N,class:b(["flex items-center gap-0.5",o.met?"text-success":"text-muted"])},[t(v,{name:o.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4 shrink-0"},null,8,["name"]),m("span",ge,[_(d(o.text)+" ",1),m("span",pe,d(o.met?a(s)("login.strength.met"):a(s)("login.strength.notMet")),1)])],2))),128))])]),default:i(()=>[m("span",ue,[t(v,{name:"i-lucide-help-circle",class:"size-3.5"})])]),_:1})],2)):x("",!0)])):x("",!0)]),_:1},8,["label"]),t(h,{label:e.$t("login.confirmPassword"),name:"confirmPassword",class:"mt-2",required:""},{help:i(()=>[m("div",fe,[t(v,{name:"tabler:alert-circle",size:"14"}),_(" "+d(e.$t("login.passwordRule")),1)])]),default:i(()=>[t(k,{modelValue:r.confirmPassword,"onUpdate:modelValue":n[2]||(n[2]=o=>r.confirmPassword=o),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:e.$t("login.placeholders.enterPasswordAgain")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(c).loginSettings?.showPolicyAgreement?(u(),p("div",we,[t(a(U),{modelValue:a(f).isAgreed,"onUpdate:modelValue":n[3]||(n[3]=o=>a(f).isAgreed=o)},null,8,["modelValue"])])):x("",!0),m("div",{class:b(["flex flex-1 gap-4 pb-8",{"mt-8":!a(c).loginSettings?.showPolicyAgreement}])},[t(A,{variant:"outline",color:"primary",size:"lg",ui:{base:"flex-1 justify-center p-3"},onClick:n[4]||(n[4]=o=>P("switchComponent","account-login"))},{default:i(()=>[_(d(e.$t("login.backToLogin")),1)]),_:1}),t(A,{color:"primary",type:"submit",size:"lg",loading:a(R),ui:{base:"flex-1 justify-center p-3"},disabled:!a(f).isAgreed&&!!a(c).loginWay.loginAgreement&&a(c).loginSettings?.showPolicyAgreement},{default:i(()=>[_(d(e.$t("login.registerNow")),1)]),_:1},8,["loading","disabled"])],2)]),_:1},8,["schema","state","onSubmit"])}}});export{Re as default};
