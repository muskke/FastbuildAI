const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Dkb-ntKj.js","./Dg4vAJXg.js","./DFpwi3xr.js","./e6MZFdVl.js","./CqkleIqs.js","./B8SJhcNl.js","./Bz7Re0hC.js","./DStvts-W.js","./BEYdQPJu.js","./Bc7nvvil.js","./DMnTxglc.js","./B5IAfFKH.js","./Ch_HQEI2.js","./C6LGytJn.js","./76gj8Op9.js","./C2wkO8_v.js","./DdhQ6uYb.js","./DCg0SI8n.js","./BMSQkwth.js","./BoxSbMi3.js","./CBkNTcnE.js","./BGzIaVtV.js","./DL81yhuu.js","./DlAUqK2U.js","./bHLwCD_d.js","./DOVLrnnX.js","./D1hA3BKJ.js"])))=>i.map(i=>d[i]);
import{j as x,bN as F,aK as D,ah as j,y as S,d as _,aG as d,am as w,ad as u,ap as B,aA as t,aH as y,aL as C,aM as L,o as m,as as R,aN as E,aO as I}from"#entry";import{b as N,c as O}from"./BqooJc1P.js";import{u as U}from"./BoxSbMi3.js";import{u as b}from"./D1hA3BKJ.js";import{A as $}from"./bHLwCD_d.js";function z(i,r){return Object.keys(i).forEach(c=>{const a=c,e=r[a];e!==void 0&&(typeof e=="object"&&e!==null?Object.keys(e).length>0&&(i[a]=e):i[a]=e)}),i}const M={class:"article-edit-container relative"},P={class:"bg-background sticky top-0 z-10 mb-4 flex w-full items-center justify-baseline pb-2"},T={class:"text-base font-medium"},V={class:"ml-4 text-xl font-bold"},G={key:0,class:"flex items-center justify-center py-10"},W=x({__name:"edit",setup(i){const r=E(()=>I(()=>import("./Dkb-ntKj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url)),{query:c}=F(),a=L(),e=D(),{t:n}=U(),f=j({title:"",content:"",summary:"",cover:"",status:$.DRAFT,sort:0,categoryId:void 0}),l=c.id,{lockFn:k,isLock:v}=b(async()=>{if(c.id)try{const s=await N(l);z(f,s)}catch(s){console.error("获取详情失败:",s),e.error(n("article.edit.messages.fetchDetailFailed"))}}),{lockFn:h}=b(async s=>{try{await O(l,s),e.success(n("article.edit.messages.updateSuccess")),setTimeout(()=>a.back(),1e3)}catch(o){console.error("更新失败:",o),e.error(n("article.edit.messages.updateFailed"))}});return S(()=>k()),(s,o)=>{const p=R,A=C;return m(),_("div",M,[d("div",P,[u(A,{color:"neutral",variant:"soft",onClick:o[0]||(o[0]=g=>t(a).back())},{default:B(()=>[u(p,{name:"i-lucide-arrow-left",class:"size-5 cursor-pointer"}),d("span",T,y(t(n)("article.edit.navigation.back")),1)]),_:1}),d("h1",V,y(t(n)("article.edit.title")),1)]),t(v)?(m(),_("div",G,[u(p,{name:"i-lucide-loader-2",class:"size-8 animate-spin"})])):(m(),w(t(r),{key:1,id:t(l),"initial-data":t(f),onSubmit:t(h),onCancel:o[1]||(o[1]=g=>t(a).back())},null,8,["id","initial-data","onSubmit"]))])}}});export{W as default};
