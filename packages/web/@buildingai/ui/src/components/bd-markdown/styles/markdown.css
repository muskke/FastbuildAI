/**
 * BdMarkdown styles
 * A beautiful Markdown rendering style, supporting light and dark modes
 * @author BuildingAI
 */

/* Basic styles */
.bd-markdown {
    --md-font-sans:
        ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, sans-serif;
    --md-font-mono:
        ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
        monospace;

    /* Light mode colors */
    --md-bg: #ffffff;
    --md-fg: #24292f;
    --md-border: #d0d7de;
    --md-shadow: rgba(0, 0, 0, 0.05);
    --md-accent: #0969da;
    --md-accent-light: #ddf4ff;

    /* Table colors */
    --md-table-border: #e5e7eb;

    /* Custom container colors */
    --md-info-border: #54aeff;
    --md-info-bg: #ddf4ff;
    --md-warning-border: #e3b341;
    --md-warning-bg: #fff8c5;
    --md-danger-border: #ff818a;
    --md-danger-bg: #ffebe9;
    --md-success-border: #57ab5a;
    --md-success-bg: #dafbe1;
    --md-note-border: #c297ff;
    --md-note-bg: #fbefff;

    /* Basic styles */
    font-family: var(--md-font-sans);
    color: var(--md-fg);
    background-color: var(--md-bg);
    line-height: 1.6;
    font-size: 16px;
    border-radius: 0.5rem;
    overflow-wrap: break-word;
    word-wrap: break-word;
    word-break: break-word;
    max-width: 100%;
}

/* Dark mode */
.dark .bd-markdown,
.dark .bd-markdown {
    --md-bg: none;
    --md-fg: #c9d1d9;
    --md-border: #30363d;
    --md-shadow: rgba(0, 0, 0, 0.3);
    --md-accent: #58a6ff;
    --md-accent-light: #1f2937;

    /* Table colors */
    --md-table-border: #30363d;

    /* Custom container colors */
    --md-info-border: #1f6feb;
    --md-info-bg: rgba(56, 139, 253, 0.15);
    --md-warning-border: #d29922;
    --md-warning-bg: rgba(187, 128, 9, 0.15);
    --md-danger-border: #f85149;
    --md-danger-bg: rgba(248, 81, 73, 0.15);
    --md-success-border: #2ea043;
    --md-success-bg: rgba(46, 160, 67, 0.15);
    --md-note-border: #a371f7;
    --md-note-bg: rgba(163, 113, 247, 0.15);
}

.bd-markdown > div > p:last-child {
    margin-bottom: 0;
}

/* Titles */
.bd-markdown h1,
.bd-markdown h2,
.bd-markdown h3,
.bd-markdown h4,
.bd-markdown h5,
.bd-markdown h6 {
    margin-top: 1.5rem;
    margin-bottom: 1rem;
    font-weight: 600;
    line-height: 1.25;
    color: var(--md-fg);
}

.bd-markdown h1 {
    margin: 0.67em 0;
    font-size: 2em;
    padding-bottom: 0.3em;
    border-bottom: 1px solid var(--md-border);
}

.bd-markdown h2 {
    font-size: 1.5em;
    padding-bottom: 0.3em;
    border-bottom: 1px solid var(--md-border);
}

.bd-markdown h3 {
    font-size: 1.25em;
}

.bd-markdown h4 {
    font-size: 1em;
}

.bd-markdown h5 {
    font-size: 0.875em;
}
/* Titles */

.bd-markdown h6 {
    font-size: 0.85em;
    color: #8b949e;
}

/* Anchors */
.bd-markdown .header-anchor {
    float: left;
    margin-left: -0.87em;
    padding-right: 0.23em;
    opacity: 0;
    text-decoration: none;
    color: var(--md-accent);
    transition: opacity 0.2s;
}

.bd-markdown h1:hover .header-anchor,
.bd-markdown h2:hover .header-anchor,
.bd-markdown h3:hover .header-anchor,
.bd-markdown h4:hover .header-anchor,
.bd-markdown h5:hover .header-anchor,
.bd-markdown h6:hover .header-anchor {
    opacity: 1;
}

.bd-markdown h1:hover .anchor .octicon-link:before,
.bd-markdown h2:hover .anchor .octicon-link:before,
.bd-markdown h3:hover .anchor .octicon-link:before,
.bd-markdown h4:hover .anchor .octicon-link:before,
.bd-markdown h5:hover .anchor .octicon-link:before,
.bd-markdown h6:hover .anchor .octicon-link:before {
    width: 16px;
    height: 16px;
    content: " ";
    display: inline-block;
    background-color: currentColor;
    -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
    mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
}
/* Anchors */

/* Paragraphs and text */
.bd-markdown p {
    margin-top: 0;
    margin-bottom: 10px;
}

.bd-markdown strong {
    font-weight: 600;
}

.bd-markdown em {
    font-style: italic;
}

.bd-markdown del {
    text-decoration: line-through;
}
/* Paragraphs and text */

/* Links */
.bd-markdown a {
    color: var(--md-accent);
    text-decoration: none;
    transition: color 0.2s;
}

.bd-markdown a:hover {
    text-decoration: underline;
}
/* Links */

/* Lists */
.bd-markdown ul,
.bd-markdown ol {
    padding-left: 2em;
    margin-top: 0;
    margin-bottom: 1em;
}

.bd-markdown ul ul,
.bd-markdown ul ol,
.bd-markdown ol ul,
.bd-markdown ol ol {
    margin-top: 0;
    margin-bottom: 0;
}

.bd-markdown li {
    margin-bottom: 0.25em;
}

.bd-markdown li + li {
    margin-top: 0.25em;
}
/* Lists */

/* Task lists */
.bd-markdown ul.contains-task-list {
    padding-left: 0;
    list-style: none;
}

.bd-markdown .task-list-item {
    position: relative;
    padding-left: 1.5em;
    list-style-type: none;
}

.bd-markdown .task-list-item input[type="checkbox"] {
    position: absolute;
    left: 0;
    top: 0.3em;
}
/* Task lists */

/* Blockquotes */
.bd-markdown blockquote {
    margin: 1em 0;
    padding: 0.5em 1em;
    color: #57606a;
    border-left: 0.25em solid var(--md-border);
    background-color: var(--md-code-bg);
    border-radius: 0.25em;
}

.bd-markdown blockquote > :first-child {
    margin-top: 0;
}

.bd-markdown blockquote > :last-child {
    margin-bottom: 0;
}

.dark .bd-markdown blockquote,
.dark .bd-markdown blockquote {
    color: #8b949e;
}
/* Blockquotes */

/* Tables */
.bd-markdown table {
    width: 100%;
    max-width: 100%;
    overflow: auto;
    margin-top: 0;
    margin-bottom: 1em;
    border-spacing: 0;
    border-collapse: collapse;
    table-layout: fixed;
}

.bd-markdown table tr {
    background-color: transparent;
    border-bottom: 1px solid var(--md-table-border);
}

.bd-markdown table thead tr {
    border-bottom: 1px solid var(--md-table-border);
}

.bd-markdown table tr:last-child:not(:first-child) {
    border-bottom: none;
}

.bd-markdown table th,
.bd-markdown table td {
    padding: 0.75em 1em;
    border: none;
    text-align: left;
    width: auto;
    min-width: 0;
    background-color: transparent;
}

.bd-markdown table th {
    font-weight: 600;
}

/* Tables */

/* Horizontal lines */
.bd-markdown hr {
    height: 1px;
    padding: 0;
    margin: 1.5em 0;
    background-color: var(--md-border);
    border: 0;
}
/* Horizontal lines */

/* Images */
.bd-markdown img {
    width: 240px;
    box-sizing: content-box;
    background-color: var(--md-bg);
    border-radius: 0.25em;
    border: 1px solid var(--md-border);
}
/* Images */

/* Table of contents */
.bd-markdown .table-of-contents {
    margin-bottom: 2em;
    padding: 1em;
    background-color: var(--md-code-bg);
    border: 1px solid var(--md-border);
    border-radius: 0.25em;
}

.bd-markdown .table-of-contents ul {
    list-style-type: none;
    padding-left: 1em;
}

.bd-markdown .table-of-contents a {
    display: block;
    padding: 0.2em 0;
    color: var(--md-fg);
    text-decoration: none;
    transition: color 0.2s;
}

.bd-markdown .table-of-contents a:hover {
    color: var(--md-accent);
}
/* Table of contents */

/* Custom containers */
.bd-markdown .custom-container {
    margin: 1em 0;
    padding: 0.5em 1em;
    border-left: 0.25em solid;
    border-radius: 0.25em;
}

.bd-markdown .custom-container-title {
    font-weight: 600;
    margin-top: 0;
    margin-bottom: 0.5em;
}

.bd-markdown .custom-container.info {
    background-color: var(--md-info-bg);
    border-color: var(--md-info-border);
}

.bd-markdown .custom-container.warning {
    background-color: var(--md-warning-bg);
    border-color: var(--md-warning-border);
}

.bd-markdown .custom-container.danger {
    background-color: var(--md-danger-bg);
    border-color: var(--md-danger-border);
}

.bd-markdown .custom-container.success {
    background-color: var(--md-success-bg);
    border-color: var(--md-success-border);
}

.bd-markdown .custom-container.note {
    background-color: var(--md-note-bg);
    border-color: var(--md-note-border);
}
/* Custom containers */

/* Code header copy button area */
.bd-markdown-code-wrapper {
    position: relative;
    margin: 1em 0;
    border-radius: 6px;
    width: 100%;
    max-width: 100%;
}

.bd-markdown-code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    font-size: 0.85em;
    background-color: #fafbfc;
    color: var(--foreground);
    border-radius: 16px 16px 0 0;
    position: sticky;
    top: 0;
    z-index: 10;
    width: 100%;
}

.bd-markdown-code-lang {
    font-family: var(--bd-markdown-code-font-family, monospace);
    color: var(--bd-markdown-code-lang-color, #333);
}

.bd-markdown-copy-icon,
.bd-markdown-run-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    pointer-events: none;
    opacity: 0.8;
    transition: opacity 0.2s ease;
}

.bd-markdown-copy-icon svg,
.bd-markdown-run-icon svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
    fill: none;
}

.bd-markdown-copy-text,
.bd-markdown-run-text {
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
    white-space: nowrap;
}

.bd-markdown-copy-button {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 3px;
    color: var(--ui-text);
    font-weight: 500;
    padding-block: calc(var(--spacing) * 1.5);
    padding-inline: calc(var(--spacing) * 2.5);
    border-radius: calc(var(--ui-radius) * 1.5);
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
    transition: all 0.2s ease;
}

.bd-markdown-copy-button:hover {
    background-color: color-mix(in oklab, var(--ui-bg-accented) 75%, transparent);
}

.bd-markdown-copy-button.copied {
    background-color: var(--md-success-bg);
    color: var(--md-success-border);
}

.bd-markdown-copy-button.copied .bd-markdown-copy-icon {
    opacity: 1;
}

.bd-markdown-button-group {
    display: flex;
    gap: 8px;
}

.bd-markdown-run-button {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 3px;
    color: var(--ui-text);
    font-weight: 500;
    padding-block: calc(var(--spacing) * 1.5);
    padding-inline: calc(var(--spacing) * 2.5);
    border-radius: calc(var(--ui-radius) * 1.5);
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
    transition: all 0.2s ease;
}

.bd-markdown-run-button:hover {
    background-color: color-mix(in oklab, var(--ui-bg-accented) 75%, transparent);
}

.bd-markdown-run-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    pointer-events: none;
    opacity: 0.8;
    transition: opacity 0.2s ease;
}

.bd-markdown-run-icon svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
    fill: none;
}

.bd-markdown-button-disabled,
.bd-markdown-copy-button.bd-markdown-button-disabled,
.bd-markdown-run-button.bd-markdown-button-disabled,
.bd-markdown-copy-button:disabled,
.bd-markdown-run-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
    filter: grayscale(1);
}

.bd-markdown-copy-button.bd-markdown-button-disabled:hover,
.bd-markdown-run-button.bd-markdown-button-disabled:hover {
    background-color: transparent;
}

.bd-markdown pre {
    border-radius: 0 0 16px 16px;
    width: 100%;
    max-width: 100%;
}

.dark .bd-markdown .bd-markdown-code-header {
    background-color: #1a1b26;
}
.dark .bd-markdown .bd-markdown-code-lang {
    color: var(--bd-markdown-code-lang-color-dark, #fff);
}
/* Code header copy button area */

/* Code block highlight plugin styles */
.bd-markdown .shiki {
    padding: 12px;
    overflow-x: scroll;
    white-space: pre;
    max-width: 100%;
    width: 100%;
    scrollbar-gutter: stable;
    -webkit-overflow-scrolling: touch; /* Make iOS devices scroll more smoothly */
}

.bd-markdown .shiki:hover::-webkit-scrollbar {
    display: block;
    width: 6px !important;
    height: 6px !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

.bd-markdown .shiki::-webkit-scrollbar {
    display: block;
    width: 6px !important;
    height: 6px !important;
    cursor: pointer !important;
}

.bd-markdown .shiki::-webkit-scrollbar-thumb {
    border-radius: 10px !important;
    background-color: rgba(93, 94, 95, 0.3) !important;
    cursor: pointer;
}

.bd-markdown .shiki::-webkit-scrollbar-thumb:hover {
    background-color: rgba(93, 94, 95, 0.5) !important;
}

/* Compatible with Firefox */
.bd-markdown .shiki {
    scrollbar-width: thin;
    scrollbar-color: rgba(93, 94, 95, 0.3) transparent;
}

.bd-markdown .shiki:hover {
    scrollbar-width: thin;
    scrollbar-color: rgba(93, 94, 95, 0.5) transparent;
}
/* Code block highlight plugin styles */

/* KaTeX mathematical formula plugin related styles */
.bd-markdown .katex-block {
    overflow-x: auto;
    overflow-y: hidden;
    text-align: center;
    padding: 1em 0;
}

.bd-markdown .katex-error {
    color: #f85149;
    background-color: var(--md-danger-bg);
    padding: 0.2em 0.4em;
    border-radius: 0.25em;
}
/* KaTeX mathematical formula plugin related styles */

/* Mermaid charts */
.bd-markdown .mermaid {
    display: flex;
    justify-content: center;
    overflow-x: auto;
    background-color: #fafbfc;
    padding: 1em;
    border-radius: 0.25em;
    min-width: 50%;
    min-height: 100px;
}

/* .dark .bd-markdown .mermaid {
    background-color: #1a1b26;
} */

/* .bd-markdown .mermaid text,
.bd-markdown .mermaid line {
    color: var(--foreground);
    fill: var(--foreground) !important;
} */
/* Mermaid charts */

/* Responsive adjustment */
@media (max-width: 768px) {
    .bd-markdown {
        font-size: 14px;
    }

    .bd-markdown table {
        font-size: 0.85em;
    }
}
