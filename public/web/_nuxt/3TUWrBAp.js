import{d as L,au as T,b as j,ap as D,g as h,j as m,o as i,k as a,q as r,l as n,p as u,y as P,v as c,c as b,t as E,x as v,C as F,z as G,aU as H}from"#entry";import{_ as J}from"./BqoA6bN6.js";import{_ as K}from"./CBooyAK7.js";import{_ as M}from"./DBjGnECu.js";import{_ as O}from"./BdKfYASf.js";import{u as Q}from"./Dp_0VxUw.js";import{u as C}from"./DqVgEjI6.js";import"./TH-3OOuG.js";import"./Bub1HYiY.js";import"./B22A-h4k.js";import"./lw_U4-W2.js";import"./XpsTG8vq.js";import"./B1Lg5z9T.js";import"./CLTNKp0S.js";import"./8-c-A7PB.js";import"./kRIii9yh.js";import"./Cfcu-t3n.js";import"./C6Y-ieo6.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./BwTGIg9g.js";import"./BWWuJQeZ.js";import"./DN9ov8OT.js";import"./9bDOsXij.js";import"./nBDBqKnC.js";import"./BgHJjJs-.js";const W={class:"text-secondary-foreground flex items-center text-base font-semibold"},X={class:"line-clamp-1"},Y={class:"text-muted-foreground mr-2 text-sm"},Z={class:"text-muted-foreground text-xs"},ee={class:"border-default border-t border-dashed pt-4 text-center text-xs"},se={class:"grid grid-cols-2 gap-2 gap-y-3 text-left"},te={class:"flex items-center gap-2"},oe={class:"text-muted-foreground"},re={class:"flex items-center gap-2"},ce={key:0,class:"text-muted-foreground"},ae={key:1,class:"text-muted-foreground"},ne={class:"flex items-center gap-2"},ie={class:"text-muted-foreground"},ue={class:"flex items-center gap-2"},le={class:"text-muted-foreground"},de={key:1},Fe=L({__name:"user-card",props:{user:{},selected:{type:Boolean,default:!1}},emits:["select","delete","edit-power"],setup(e,{emit:w}){const f=w,s=e,k=T(),{t}=j(),{hasAccessByCodes:p}=Q(),l=D();function I(o){typeof o=="boolean"&&f("select",s.user,o)}function R(o){switch(o){case 1:return{label:t("user.backend.status.active"),color:"success",icon:"i-lucide-check-circle"};case 0:return{label:t("user.backend.status.inactive"),color:"error",icon:"i-lucide-x-circle"};default:return{label:t("user.backend.status.unknown"),color:"warning",icon:"i-lucide-help-circle"}}}function S(o){switch(o){case 0:return{label:t("user.backend.source.console"),icon:"i-lucide-user-plus"};case 1:return{label:t("user.backend.source.phone"),icon:"i-lucide-smartphone"};case 2:return{label:t("user.backend.source.wechat"),icon:"i-lucide-message-circle"};case 3:return{label:t("user.backend.source.email"),icon:"i-lucide-mail"};case 4:return{label:t("user.backend.source.username"),icon:"i-lucide-user-check"};default:return{label:t("user.backend.source.unknown"),icon:"i-lucide-help-circle"}}}const U=h(()=>{const o=[];return p(["users:update"])&&(s.user.isRoot!==1||l.userInfo?.isRoot===1&&s.user.id===l.userInfo.id)&&(o.push({label:t("user.backend.editProfile"),icon:"i-lucide-user-round-pen",onSelect:()=>k.push({path:C("users:update"),query:{id:s.user.id}})}),o.push({label:t("user.backend.adjustBalance"),icon:"i-lucide-edit",onSelect:()=>f("edit-power",s.user)})),p(["users:delete"])&&s.user.isRoot!==1&&o.push({label:t("user.backend.deleteUser"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>f("delete",s.user)}),o}),_=h(()=>R(s.user.status)),g=h(()=>S(s.user.source));function z(){console.log("handleCardClick",s.user),p(["users:update"])&&(s.user.isRoot!==1||l.userInfo?.isRoot===1&&s.user.id===l.userInfo.id)&&k.push({path:C("users:update"),query:{id:s.user.id}})}return(o,me)=>{const B=F,$=H,A=J,x=K,d=P,y=M,N=O;return i(),m(N,{selectable:s.user.isRoot!==1,"show-actions":"",variant:"outlined",selected:e.selected,actions:u(U),clickable:!0,onSelect:I,onClick:z},{icon:a(({groupHoverClass:V,selectedClass:q})=>[n($,{position:"top-right",color:"success"},{default:a(()=>[n(B,{src:e.user.avatar,alt:e.user.nickname||e.user.username,size:"3xl",ui:{root:"rounded-lg",fallback:"text-inverted"},class:G([V,q,e.user.avatar?"":"bg-primary"])},null,8,["src","alt","class"])]),_:2},1024)]),title:a(()=>[r("h3",W,[n(A,{text:e.user.nickname,delay:0},{default:a(()=>[r("span",X,c(e.user.nickname),1)]),_:1},8,["text"]),r("span",Y,"(@"+c(e.user.username)+")",1),e.user.isRoot?(i(),m(x,{key:0,color:"warning",size:"sm",class:"ml-auto shrink-0"},{default:a(()=>[v(c(o.$t("user.backend.admin")),1)]),_:1})):e.user.role?(i(),m(x,{key:1,color:"primary",size:"sm",class:"ml-auto shrink-0"},{default:a(()=>[v(c(e.user.role.name),1)]),_:1})):E("",!0)])]),description:a(()=>[r("h4",Z,c(o.$t("user.backend.userNo"))+": "+c(e.user.userNo||u(t)("user.backend.notSet")),1)]),details:a(()=>[r("div",ee,[r("div",se,[r("div",te,[n(d,{name:u(_).icon,class:"text-muted-foreground size-3"},null,8,["name"]),r("span",oe,c(u(_).label),1)]),r("div",re,[n(d,{name:u(g).icon,class:"text-muted-foreground size-3"},null,8,["name"]),e.user.isRoot===1?(i(),b("span",ce," - ")):(i(),b("span",ae,c(u(g).label),1))]),r("div",ne,[n(d,{name:"i-lucide-clock",class:"text-muted-foreground size-3"}),r("span",ie,[n(y,{datetime:e.user.createdAt,mode:"date"},null,8,["datetime"])])]),r("div",ue,[n(d,{name:"i-lucide-clock-alert",class:"text-muted-foreground size-3"}),r("span",le,[e.user.lastLoginAt?(i(),m(y,{key:0,datetime:e.user.lastLoginAt,mode:"date"},null,8,["datetime"])):(i(),b("span",de,c(u(t)("user.backend.neverLogin")),1))])])])])]),_:1},8,["selectable","selected","actions"])}}});export{Fe as default};
