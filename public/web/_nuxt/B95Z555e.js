import{d as R,b as J,s as y,g as K,c as h,o as g,q as r,l as t,x as m,v as d,k as s,y as G,_ as H,F as Q,B as W,j as X,t as q,p as e,aR as Y,A as Z,ap as ee}from"#entry";import{_ as ae}from"./DGIb7fSK.js";import{_ as oe}from"./Cif_tCX1.js";import{_ as te}from"./ptVgWJmt.js";import{_ as ne}from"./DS-TE4M7.js";import le from"./BruVSCWF.js";import{_ as ie}from"./D-6Co9ha.js";import{_ as re}from"./CXUt0j5Y.js";import{D as se}from"./ClGKrygo.js";import{c as de,a as $,b as me}from"./BUyfW8JT.js";import"./Btvd554H.js";import"./3UOIlTK8.js";import"./DuSMYVIA.js";import"./DduSJdeS.js";import"./VGKgjfSv.js";import"./CgMDXot0.js";import"./CR1AS2Ry.js";import"./DVnbt8cp.js";import"./D6yWePie.js";import"./CuOaO1Pb.js";import"./DHFmmngs.js";import"./C3zg6GHm.js";import"./BgHJjJs-.js";import"./-Eb02sIQ.js";import"./Dk6FGhu1.js";import"./BPKB8n-W.js";import"./MN31c9CG.js";import"./CCcv9mzY.js";import"./BFAo_s2U.js";import"./Cb04SOqd.js";import"./DaWZu8wl.js";const ue={class:"bg-muted rounded-lg p-3"},ce={class:"flex items-center justify-between"},pe={class:"text-foreground flex items-center gap-1 text-sm font-medium"},fe={class:"text-background text-xs"},ge={class:"space-y-3"},be={class:"flex flex-1 items-center gap-2"},ve={class:"text-foreground text-sm font-medium"},_e={class:"text-muted-foreground font-mono text-xs"},Ve={class:"block group-hover:hidden"},he={class:"hidden items-center group-hover:flex"},xe={class:"flex items-center gap-2"},ke={key:0,class:"space-y-3"},ye={class:"flex items-center justify-between"},$e={class:"text-sm font-medium"},Le={key:0,class:"space-y-2"},Ue={class:"mt-2 flex items-center gap-2"},qe={class:"mt-6 flex justify-end gap-2"},ra=R({__name:"variable",props:{modelValue:{}},emits:["update:modelValue"],setup(w,{emit:T}){const c=Y(w,"modelValue",T),{t:i}=J(),p=y(!1),b=y(!1),f=y(-1),C={name:"",label:"",type:"text",required:!1,maxLength:void 0,options:[]},a=y({...C,maxLength:void 0}),O=de({name:$().required(i("ai-agent.backend.configuration.formVariableNameEmpty")),label:$().required(i("ai-agent.backend.configuration.formVariableLabelEmpty")),type:$().required(i("ai-agent.backend.configuration.formVariableTypeEmpty")).oneOf(["text","textarea","select"]),required:me().optional(),maxLength:$().optional().test("is-positive-number",i("ai-agent.backend.configuration.formVariableMaxLengthInvalid"),n=>{if(!n)return!0;const o=Number(n);return!isNaN(o)&&o>0})}),z=K(()=>a.value.type==="select"),S=async()=>{try{if(c.value.find((v,U)=>v.name===a.value.name&&U!==f.value)){ee().error(i("ai-agent.backend.configuration.formVariableNameExists"));return}const o={...a.value,maxLength:a.value.maxLength?Number(a.value.maxLength):void 0};b.value&&f.value>=0?c.value[f.value]=o:c.value.push(o),L()}catch(n){console.error("operation failed:",n)}},B=()=>{a.value.options||(a.value.options=[]),a.value.options.push("")},E=n=>{a.value.options?.splice(n,1)},F=()=>{b.value=!1,f.value=-1,p.value=!0},M=n=>{b.value=!0,f.value=n;const o=c.value[n];o&&(a.value={...JSON.parse(JSON.stringify(o)),maxLength:o.maxLength?String(o.maxLength):void 0},p.value=!0)},D=()=>{a.value={...C,maxLength:void 0}},L=()=>{p.value=!1,b.value=!1,D(),f.value=-1},I=n=>{c.value.splice(n,1)};return(n,o)=>{const v=G,U=ae,u=H,N=oe,x=te,_=ne,k=le,j=ie,A=re;return g(),h("div",null,[r("div",ue,[r("div",ce,[r("div",pe,[m(d(n.$t("ai-agent.backend.configuration.formVariable"))+" ",1),t(U,{"delay-duration":0,ui:{content:"w-xs h-auto"}},{content:s(()=>[r("div",fe,[m(d(n.$t("ai-agent.backend.configuration.formVariableDesc"))+" ",1),o[9]||(o[9]=r("br",null,null,-1)),m(" "+d(n.$t("ai-agent.backend.configuration.formVariableDesc2")),1)])]),default:s(()=>[t(v,{name:"i-lucide-circle-help"})]),_:1})]),t(u,{size:"sm",color:"primary",variant:"ghost",class:"flex items-center",onClick:F},{default:s(()=>[t(v,{name:"i-lucide-plus"}),r("span",null,d(n.$t("console-common.add")),1)]),_:1})]),r("div",ge,[(g(!0),h(Q,null,W(e(c),(l,V)=>(g(),h("div",{key:l.name,class:"group bg-background mt-2 flex items-center gap-2 rounded-lg px-3 py-2"},[r("div",be,[r("span",ve,d(l.label),1),r("span",_e,d(l.name),1)]),r("div",Ve,[l.required?(g(),X(N,{key:0,color:"error",variant:"outline",size:"sm"},{default:s(()=>[m(d(n.$t("ai-agent.backend.configuration.required")),1)]),_:1})):q("",!0),t(N,{color:"neutral",variant:"outline",size:"sm",class:"ml-1"},{default:s(()=>[m(d(l.type),1)]),_:2},1024)]),r("div",he,[t(u,{size:"xs",color:"primary",variant:"ghost",icon:"i-lucide-edit",onClick:P=>M(V)},null,8,["onClick"]),t(u,{size:"xs",color:"error",variant:"ghost",icon:"i-lucide-trash",onClick:P=>I(V)},null,8,["onClick"])])]))),128))])]),t(A,{open:e(p),"onUpdate:open":o[8]||(o[8]=l=>Z(p)?p.value=l:null),title:e(b)?n.$t("ai-agent.backend.configuration.formVariableEditTitle"):n.$t("ai-agent.backend.configuration.formVariableAddTitle"),description:e(i)("ai-agent.backend.configuration.formVariableTitleDesc"),ui:{content:"max-w-md"},onClose:L},{default:s(()=>[t(j,{state:e(a),schema:e(O),class:"space-y-4",onSubmit:S},{default:s(()=>[t(_,{label:e(i)("ai-agent.backend.configuration.formVariableType"),name:"type",required:""},{default:s(()=>[r("div",xe,[t(x,{"model-value":e(a).type==="text",indicator:"end",variant:"card","default-value":"",label:e(i)("ai-agent.backend.configuration.formVariableTypeText"),ui:{root:"w-full"},"onUpdate:modelValue":o[0]||(o[0]=l=>e(a).type="text")},null,8,["model-value","label"]),t(x,{"model-value":e(a).type==="textarea",indicator:"end",variant:"card","default-value":"",label:e(i)("ai-agent.backend.configuration.formVariableTypeTextarea"),ui:{root:"w-full"},"onUpdate:modelValue":o[1]||(o[1]=l=>e(a).type="textarea")},null,8,["model-value","label"]),t(x,{"model-value":e(a).type==="select",indicator:"end",variant:"card","default-value":"",label:e(i)("ai-agent.backend.configuration.formVariableTypeSelect"),ui:{root:"w-full"},"onUpdate:modelValue":o[2]||(o[2]=l=>e(a).type="select")},null,8,["model-value","label"])])]),_:1},8,["label"]),t(_,{label:e(i)("ai-agent.backend.configuration.formVariableName"),name:"name",required:""},{default:s(()=>[t(k,{modelValue:e(a).name,"onUpdate:modelValue":o[3]||(o[3]=l=>e(a).name=l),placeholder:e(i)("ai-agent.backend.configuration.formVariableNamePlaceholder"),ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(_,{label:e(i)("ai-agent.backend.configuration.formVariableLabel"),name:"label",required:""},{default:s(()=>[t(k,{modelValue:e(a).label,"onUpdate:modelValue":o[4]||(o[4]=l=>e(a).label=l),placeholder:e(i)("ai-agent.backend.configuration.formVariableLabelPlaceholder"),ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(_,{label:e(i)("ai-agent.backend.configuration.formVariableMaxLength"),name:"maxLength"},{default:s(()=>[t(k,{modelValue:e(a).maxLength,"onUpdate:modelValue":o[5]||(o[5]=l=>e(a).maxLength=l),type:"number",placeholder:e(i)("ai-agent.backend.configuration.formVariableMaxLengthPlaceholder"),ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(z)?(g(),h("div",ke,[r("div",ye,[r("label",$e,d(n.$t("ai-agent.backend.configuration.formVariableOptions")),1),t(u,{size:"xs",color:"primary",variant:"ghost",onClick:B},{default:s(()=>[t(v,{name:"i-lucide-plus"}),m(" "+d(n.$t("ai-agent.backend.configuration.formVariableOptionsAdd")),1)]),_:1})]),e(a).options?.length?(g(),h("div",Le,[t(e(se),{class:"draggable cursor-move",modelValue:e(a).options,"onUpdate:modelValue":o[6]||(o[6]=l=>e(a).options=l),animation:"300",handle:".drag-move",itemKey:"id"},{item:s(({index:l})=>[r("div",Ue,[t(k,{icon:"i-lucide-grip-vertical",modelValue:e(a).options[l],"onUpdate:modelValue":V=>e(a).options[l]=V,placeholder:e(i)("ai-agent.backend.configuration.formVariableOptionsLabel"),ui:{root:"flex-1",leadingIcon:"drag-move"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),t(u,{size:"xs",color:"error",variant:"ghost",icon:"i-lucide-trash",onClick:V=>E(l)},null,8,["onClick"])])]),_:1},8,["modelValue"])])):q("",!0)])):q("",!0),t(_,{label:" ",name:"required"},{default:s(()=>[t(x,{modelValue:e(a).required,"onUpdate:modelValue":o[7]||(o[7]=l=>e(a).required=l),label:e(i)("ai-agent.backend.configuration.required")},null,8,["modelValue","label"])]),_:1}),r("div",qe,[t(u,{color:"neutral",variant:"soft",size:"lg",onClick:L},{default:s(()=>[m(d(n.$t("console-common.cancel")),1)]),_:1}),t(u,{color:"primary",size:"lg",type:"submit"},{default:s(()=>[m(d(n.$t("console-common.save")),1)]),_:1})])]),_:1},8,["state","schema"])]),_:1},8,["open","title","description"])])}}});export{ra as default};
