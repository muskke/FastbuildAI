import{u as z,d as N,c as h,o as m,q as e,l as n,br as P,v as o,y as F,k as g,C as Z,ar as J,b as K,aL as O,s as k,aY as q,w as X,p as t,F as L,B as S,H as ee,_ as te,aZ as T,x as w,j as D,t as se}from"#entry";import ae from"./BruVSCWF.js";import{_ as oe}from"./C1MVswYH.js";import{_ as ne}from"./i5AwkGQh.js";import{n as le}from"./BV27uQF0.js";import{_ as ie}from"./DiYXikHi.js";import{_ as re}from"./DGIb7fSK.js";import"./BcsO9TDZ.js";import"./DlAUqK2U.js";import"./Btvd554H.js";import"./3UOIlTK8.js";import"./DuSMYVIA.js";import"./DduSJdeS.js";import"./VGKgjfSv.js";function V(l){return z("/ai-agents",l)}function ce(){return z("/agent-decorate")}function de(l){return z("/tag",l)}const ue={class:"mb-3 flex items-start gap-3"},me={class:"border-default bg-muted flex size-10 flex-none items-center justify-center rounded-lg border"},fe={class:"flex min-w-0 flex-1 flex-col"},pe={class:"text-foreground truncate text-sm font-medium"},ge={class:"text-muted-foreground mt-1 text-xs"},_e={class:"text-muted-foreground h-10 pr-8 text-xs"},he={class:"line-clamp-2 overflow-hidden"},ve={class:"flex items-center justify-between pt-2"},xe={class:"text-muted-foreground flex items-center gap-3"},ye={class:"flex items-center gap-1"},be={class:"text-xs"},ke={class:"flex items-center gap-1"},we={class:"text-xs"},$e=N({__name:"square-card",props:{agent:{},showStats:{type:Boolean,default:!0},variant:{default:"default"}},emits:["click"],setup(l,{emit:i}){const f=l,$=i,B=()=>{$("click",f.agent)};return(s,v)=>{const p=P,_=ie,d=F,x=Z,C=re;return m(),h("div",{class:"group bg-muted border-border cursor-pointer rounded-lg border p-4 transition-all duration-200 hover:shadow-md",onClick:B},[e("div",ue,[e("div",me,[n(p,{src:l.agent.avatar,alt:"avatar",class:"size-10 rounded-lg object-contain"},null,8,["src"])]),e("div",fe,[e("h3",pe,o(l.agent.name),1),e("div",ge,[e("span",null,o(s.$t("ai-agent.backend.create.edit")),1),n(_,{datetime:l.agent.updatedAt,mode:"datetime"},null,8,["datetime"])])])]),e("div",_e,[e("p",he,o(l.agent.description),1)]),e("div",ve,[e("div",xe,[e("div",ye,[n(d,{name:"i-lucide-message-square-text",class:"size-3"}),e("span",be,o(l.agent.conversationCount),1)]),e("div",ke,[n(d,{name:"i-lucide-users",class:"size-3"}),e("span",we,o(l.agent.userCount),1)])]),e("div",null,[n(C,{text:l.agent.provider?.name,"delay-duration":0},{default:g(()=>[n(x,{src:l.agent.provider?.iconUrl,class:"size-4"},null,8,["src"])]),_:1},8,["text"])])])])}}}),Be={class:"container mx-auto flex h-full flex-col"},Ce={class:"bg-background sticky top-0 z-10 flex flex-col gap-3 p-4"},Ie={class:"flex items-center justify-between"},qe={class:"hidden flex-none font-bold sm:block sm:text-base lg:text-lg"},Te={class:"relative mx-auto flex w-full max-w-3xl justify-center"},ze={class:"dark:bg-background/30 flex flex-none gap-2 rounded-lg bg-neutral-100 p-1"},Ue={class:"flex flex-wrap gap-2"},je={class:"h-full min-h-0"},Ae={class:"flex h-full min-h-0 flex-col"},Le={class:"flex flex-col gap-6"},Se={class:"flex flex-col gap-2 pr-10"},De={class:"line-clamp-2 font-bold sm:text-2xl sm:text-xl lg:text-4xl"},Ve={class:"text-muted-foreground pr-4 text-base"},Ne={class:"relative flex-none overflow-hidden rounded-lg",style:{width:"520px",height:"280px"}},Pe={class:"absolute right-0 bottom-0 left-0 p-4"},Fe={class:"text-background text-lg font-bold"},Ge={class:"text-background text-sm"},Re={key:1,class:"grid grid-cols-1 gap-6 px-4 pt-2 pb-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},We={key:2},Me={class:"flex h-[70vh] w-full items-center justify-center"},Ee={class:"flex flex-col items-center gap-3"},He={class:"text-muted-foreground"},rt=N({__name:"index",async setup(l){let i,f;const $=J(),{t:B}=K(),s=O({keyword:"",sortBy:"latest",page:1,pageSize:20}),v=k(!1),p=k(!0),_=k(void 0),d=k([]),x=()=>({keyword:s.keyword,sortBy:s.sortBy,page:s.page,pageSize:s.pageSize,tagIds:_.value?[_.value]:void 0}),{data:C}=([i,f]=q(()=>T("tags",()=>de(),{transform:a=>[{name:B("ai-agent.frontend.square.recommended"),id:void 0},...a]})),i=await i,f(),i),{data:u}=([i,f]=q(()=>T("agent-decorate",()=>ce())),i=await i,f(),i),{data:I,pending:G}=([i,f]=q(()=>T("public-agents-initial",()=>V(x()))),i=await i,f(),i);I.value&&(d.value=I.value.items||[],p.value=I.value.totalPages>(s.page||1));const y=async(a=!1)=>{if(!v.value){v.value=!0,a&&(s.page=1,d.value=[],p.value=!0);try{const r=await V(x());a?d.value=r.items||[]:d.value.push(...r.items||[]),p.value=r.totalPages>(s.page||1)}catch(r){console.error("获取智能体列表失败:",r),p.value=!1}finally{v.value=!1}}},R=async()=>{!p.value||v.value||(s.page=(s.page||1)+1,await y())},U=ee(()=>y(!0),500);X(()=>s.keyword,U);const j=a=>{s.sortBy=a,y(!0)},W=a=>{_.value=a,y(!0)},M=a=>{a.publishToken&&$.push(`/public/agent/explore/${a.publishToken}`)};return(a,r)=>{const E=F,H=ae,b=te,A=P,Q=oe,Y=ne;return m(),h("div",Be,[e("div",Ce,[e("div",Ie,[e("h2",qe,o(a.$t("ai-agent.frontend.square.square")),1),e("div",Te,[n(H,{modelValue:t(s).keyword,"onUpdate:modelValue":r[0]||(r[0]=c=>t(s).keyword=c),placeholder:a.$t("ai-agent.frontend.square.searchPlaceholder"),class:"sm:w-full lg:w-md",variant:"soft",onInput:t(U)},{leading:g(()=>[n(E,{name:"i-lucide-search"})]),_:1},8,["modelValue","placeholder","onInput"])]),e("div",ze,[n(b,{color:t(s).sortBy==="latest"?"primary":"neutral",variant:t(s).sortBy==="latest"?"solid":"ghost",onClick:r[1]||(r[1]=c=>j("latest"))},{default:g(()=>[w(o(a.$t("ai-agent.frontend.square.sortByLatest")),1)]),_:1},8,["color","variant"]),n(b,{color:t(s).sortBy==="popular"?"primary":"neutral",variant:t(s).sortBy==="popular"?"solid":"ghost",onClick:r[2]||(r[2]=c=>j("popular"))},{default:g(()=>[w(o(a.$t("ai-agent.frontend.square.sortByPopular")),1)]),_:1},8,["color","variant"])])]),e("div",Ue,[(m(!0),h(L,null,S(t(C),c=>(m(),D(b,{key:c.id??"recommended",color:t(_)===c.id?"primary":"neutral",variant:t(_)===c.id?"soft":"ghost",class:"px-3 py-1",onClick:Qe=>W(c.id)},{default:g(()=>[w(o(c.name),1)]),_:2},1032,["color","variant","onClick"]))),128))])]),e("div",je,[e("section",Ae,[n(Y,{class:"min-0 h-full"},{default:g(()=>[n(Q,{loading:t(v)||t(G),"has-more":t(p),"no-more-text":t(s).page===1?" ":"",onLoadMore:R},{default:g(()=>[t(u)?.enabled?(m(),h("div",{key:0,class:"flex flex-col items-center justify-between gap-4 px-4 pb-8 lg:flex-row",onClick:r[3]||(r[3]=c=>t(u)?.link&&("navigateToWeb"in a?a.navigateToWeb:t(le))(t(u).link))},[e("div",Le,[e("div",Se,[e("h1",De,[e("span",null,o(t(u)?.title),1)]),e("p",Ve,[e("span",null,o(t(u)?.description),1)])]),e("div",null,[n(b,{color:"neutral",variant:"solid",size:"xl",class:"rounded-full px-6"},{default:g(()=>[w(o(a.$t("ai-agent.frontend.square.ctaLabel")),1)]),_:1})])]),e("div",Ne,[n(A,{src:t(u)?.heroImageUrl,alt:"square",class:"h-full w-full object-cover"},null,8,["src"]),e("div",Pe,[n(A,{src:t(u)?.overlayIconUrl,class:"mb-3 size-16 rounded-lg"},null,8,["src"]),e("h3",Fe,o(t(u)?.overlayTitle),1),e("p",Ge,o(t(u)?.overlayDescription),1)])])])):se("",!0),t(d).length>0?(m(),h("div",Re,[(m(!0),h(L,null,S(t(d),c=>(m(),D($e,{key:c.id,agent:c,onClick:M},null,8,["agent"]))),128))])):(m(),h("div",We,[e("div",Me,[e("div",Ee,[e("span",He,o(a.$t("ai-agent.frontend.square.noResults")),1)])])]))]),_:1},8,["loading","has-more","no-more-text"])]),_:1})])])])}}});export{rt as default};
