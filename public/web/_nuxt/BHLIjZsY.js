const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BfeZ9Wne.js","./--UdezPG.js","./D_Isbjn1.js","./BYwSSEjb.js","./BgHJjJs-.js","./CyGK14vg.js","./8-c-A7PB.js","./DN9ov8OT.js","./Cpt2kRVT.js","./pUN2d83w.js","./nBDBqKnC.js","./9bDOsXij.js","./B22A-h4k.js","./DNgvVYsj.js","./BYK_1AlN.js","./BJ_E6Ph7.js","./DSMB-qMT.js","./b-_TUx9i.js","./Cfcu-t3n.js","./B128ot1i.js","./CoMGTw2w.js","./CP4Zo7YT.js","./XpsTG8vq.js","./BUyfW8JT.js","./DaWZu8wl.js","./3TUWrBAp.js","./BqoA6bN6.js","./TH-3OOuG.js","./Bub1HYiY.js","./lw_U4-W2.js","./CBooyAK7.js","./DBjGnECu.js","./BdKfYASf.js","./B1Lg5z9T.js","./CLTNKp0S.js","./kRIii9yh.js","./C6Y-ieo6.js","./DaNf1Wdt.js","./CKXZhss7.js","./BwTGIg9g.js","./BWWuJQeZ.js","./Dp_0VxUw.js","./DqVgEjI6.js"])))=>i.map(i=>d[i]);
import{d as q,au as Q,aq as G,b as K,Q as H,aM as J,s as W,bP as X,g as h,i as Y,c as f,o as u,q as i,j as x,t as Z,l as r,p as e,v as l,k as _,_ as ee,x as U,F as te,B as se,R as C,y as oe,U as P,bQ as ae,bR as ne}from"#entry";import re from"./--UdezPG.js";import{_ as ie}from"./B1VHkCFG.js";import{_ as le}from"./BwTGIg9g.js";import{_ as ce}from"./lw_U4-W2.js";import{_ as de}from"./CJG2iIES.js";import{_ as me}from"./D-yR6Fj9.js";import{_ as ue}from"./DgnnKcyj.js";import{u as pe}from"./DqVgEjI6.js";import{u as _e}from"./FihYtau-.js";import{u as fe}from"./B93AZ-4h.js";import"./CLTNKp0S.js";import"./8-c-A7PB.js";import"./kRIii9yh.js";import"./TH-3OOuG.js";import"./Cfcu-t3n.js";import"./C6Y-ieo6.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./B22A-h4k.js";import"./Bub1HYiY.js";import"./BO1GPLSL.js";import"./CP4Zo7YT.js";import"./XpsTG8vq.js";import"./Dn8X9Gvz.js";import"./BWWuJQeZ.js";import"./DN9ov8OT.js";import"./9bDOsXij.js";import"./nBDBqKnC.js";import"./BgHJjJs-.js";import"./DlAUqK2U.js";const ge={class:"user-list-container pb-5"},he={class:"bg-background sticky top-0 z-10 flex flex-wrap gap-4 pb-2"},ve={class:"flex items-center gap-2 md:ml-auto"},ye={class:"flex items-center gap-2"},be={class:"text-accent-foreground text-sm"},ke={class:"grid grid-cols-1 gap-6 py-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4"},we={key:1,class:"flex h-[calc(100vh-10rem)] items-center justify-center"},xe={class:"flex items-center gap-3"},Ue={class:"text-accent-foreground"},Ce={key:2,class:"flex h-[calc(100vh-10rem)] flex-col items-center justify-center"},Pe={class:"text-accent-foreground"},Re={key:3,class:"bg-background sticky bottom-0 z-10 flex items-center justify-between gap-3 py-4"},Se={class:"text-muted text-sm"},De={class:"flex items-center gap-1.5"},mt=q({__name:"list",setup(ze){const R=C(()=>P(()=>import("./BfeZ9Wne.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url)),S=C(()=>P(()=>import("./3TUWrBAp.js"),__vite__mapDeps([25,2,26,27,28,12,29,22,30,31,32,33,34,6,35,18,36,17,37,38,8,9,39,40,7,11,10,4,41,42]),import.meta.url)),D=Q(),z=G(),{t:d}=K(),B=H(),m=J({keyword:"",startTime:"",endTime:""}),n=W(new Set),{paging:o,getLists:p}=_e({fetchFun:X,params:m}),g=h(()=>o.items.filter(t=>t.isRoot!==1)),$=(t,s)=>{if(typeof s=="boolean"){const c=t.id;s?n.value.add(c):n.value.delete(c)}},A=t=>{t===!0?g.value.forEach(c=>{c.id&&n.value.add(c.id)}):n.value.clear()},v=async t=>{try{await fe({title:d("user.backend.deleteTitle"),description:d("user.backend.deleteMsg"),color:"error"}),Array.isArray(t)?await ae(t.map(String)):await ne(String(t)),n.value.clear(),p(),z.success(d("user.backend.success"))}catch(s){console.error("Delete failed:",s)}},E=t=>{t.id&&v(t.id)},T=async t=>{await B.create(R).open({user:t}).result&&p()},V=t=>{T(t)},I=()=>{const t=Array.from(n.value);t.length!==0&&v(t)},M=h(()=>g.value.length>0&&g.value.every(t=>t.id&&n.value.has(t.id))),L=h(()=>{const t=o.items.filter(s=>s.id&&n.value.has(s.id)).length;return t>0&&t<o.items.length});return Y(()=>p()),(t,s)=>{const c=re,y=ie,j=le,F=ce,b=ee,k=de,N=me,w=oe,O=ue;return u(),f("div",ge,[i("div",he,[r(c,{modelValue:e(m).keyword,"onUpdate:modelValue":s[0]||(s[0]=a=>e(m).keyword=a),placeholder:e(d)("user.backend.keywordInput"),class:"w-80",onChange:e(p)},null,8,["modelValue","placeholder","onChange"]),r(y,{start:e(m).startTime,"onUpdate:start":s[1]||(s[1]=a=>e(m).startTime=a),end:e(m).endTime,"onUpdate:end":s[2]||(s[2]=a=>e(m).endTime=a),"show-time":!0,ui:{root:"w-auto sm:w-xs"},onChange:e(p)},null,8,["start","end","onChange"]),i("div",ve,[i("div",ye,[r(j,{"model-value":e(M)?!0:e(L)?"indeterminate":!1,"onUpdate:modelValue":A},null,8,["model-value"]),i("span",be,l(e(n).size)+" / "+l(e(o).items.length)+" "+l(e(d)("console-common.selected")),1)]),r(k,{codes:["users:batch-delete"]},{default:_(()=>[r(b,{color:"error",variant:"subtle",label:e(d)("console-common.batchDelete"),icon:"i-heroicons-trash",disabled:e(n).size===0,onClick:I},{trailing:_(()=>[r(F,null,{default:_(()=>[U(l(e(n).size),1)]),_:1})]),_:1},8,["label","disabled"])]),_:1}),r(k,{codes:["users:create"]},{default:_(()=>[r(b,{icon:"i-heroicons-plus",color:"primary",onClick:s[3]||(s[3]=a=>e(D).push(("useRoutePath"in t?t.useRoutePath:e(pe))("users:create")))},{default:_(()=>[U(l(e(d)("user.backend.add")),1)]),_:1})]),_:1})])]),!e(o).loading&&e(o).items.length>0?(u(),x(N,{key:0,class:"h-[calc(100vh-13rem)]",shadow:!1},{default:_(()=>[i("div",ke,[(u(!0),f(te,null,se(e(o).items,a=>(u(),x(e(S),{key:a.id,user:a,selected:e(n).has(a.id),onEditPower:V,onSelect:$,onDelete:E},null,8,["user","selected"]))),128))])]),_:1})):e(o).loading?(u(),f("div",we,[i("div",xe,[r(w,{name:"i-lucide-loader-2",class:"text-primary-500 h-6 w-6 animate-spin"}),i("span",Ue,l(t.$t("common.loading")),1)])])):(u(),f("div",Ce,[r(w,{name:"i-lucide-users",class:"text-muted-foreground mb-4 h-16 w-16"}),i("p",Pe,l(t.$t("user.backend.noUsers")),1)])),e(o).total>0?(u(),f("div",Re,[i("div",Se,l(e(n).size)+" "+l(t.$t("console-common.selected")),1),i("div",De,[r(O,{page:e(o).page,"onUpdate:page":s[4]||(s[4]=a=>e(o).page=a),size:e(o).pageSize,"onUpdate:size":s[5]||(s[5]=a=>e(o).pageSize=a),total:e(o).total,onChange:e(p)},null,8,["page","size","total","onChange"])])])):Z("",!0)])}}});export{mt as default};
