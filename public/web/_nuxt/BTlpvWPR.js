import{d as S,b as $,ap as U,aL as V,s as q,aJ as b,i as B,c as D,o as I,l as i,k as o,q as p,p as s,x as l,v as d,bF as M,_ as N}from"#entry";import W from"./BruVSCWF.js";import{_ as E}from"./DS-TE4M7.js";import{_ as G}from"./CB78hAg2.js";import{_ as R}from"./D-6Co9ha.js";import{a as z,b as A}from"./D0igDNVj.js";import{c as J,a as T}from"./BUyfW8JT.js";import{u as y}from"./UqhBTNL6.js";import"./BgHJjJs-.js";import"./DaWZu8wl.js";const j={class:"statistics-container mt-8"},H={class:"mb-6"},K={href:"https://clarity.microsoft.com",class:"text-primary",target:"_blank"},O={class:"flex space-x-3"},ns=S({__name:"statistics",setup(P){const{t:e}=$(),n=U(),a=V({appid:""}),m=q(null),g=J({appid:T().required(e("system.website.statistics.appid.required")).min(5,e("system.website.statistics.appid.minLength")).max(50,e("system.website.statistics.appid.maxLength"))}),{lockFn:_,isLock:u}=b(async()=>{try{const t=await z();m.value=t,y(a,t.statistics)}catch(t){console.error("Get website config failed:",t),n.error(e("system.website.messages.loadFailed"))}}),{lockFn:w,isLock:c}=b(async()=>{try{const t={statistics:{appid:a.appid}};await A(t),n.success(e("system.website.messages.saveSuccess")),await _()}catch(t){console.error("Save failed:",t),n.error(e("system.website.messages.saveFailed"))}}),x=()=>{m.value?(y(a,m.value.statistics),n.info(e("system.website.messages.resetSuccess"))):(a.appid="",n.info(e("system.website.messages.resetEmpty")))};return B(()=>_()),(t,r)=>{const h=M,v=W,k=E,f=N,C=G,F=R;return I(),D("div",j,[i(F,{schema:s(g),state:s(a),class:"mx-auto lg:max-w-2xl xl:max-w-4xl",onSubmit:s(w)},{default:o(()=>[p("div",H,[i(k,{name:"appid",label:s(e)("system.website.statistics.appid.label"),required:""},{description:o(()=>[l(d(s(e)("system.website.statistics.clarity.linkLabel"))+": ",1),p("a",K,[r[1]||(r[1]=l(" Microsoft Clarity ",-1)),i(h,{name:"i-lucide-external-link"})])]),default:o(()=>[i(v,{modelValue:s(a).appid,"onUpdate:modelValue":r[0]||(r[0]=L=>s(a).appid=L),size:"xl",ui:{root:"w-full"},placeholder:s(e)("system.website.statistics.appid.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),p("div",O,[i(C,{codes:["system-website:setConfig"]},{default:o(()=>[i(f,{type:"submit",color:"primary",loading:s(c),disabled:s(c)||s(u)},{default:o(()=>[l(d(s(c)?s(e)("system.website.actions.saving"):s(e)("system.website.actions.saveConfig")),1)]),_:1},8,["loading","disabled"])]),_:1}),i(f,{type:"button",color:"neutral",variant:"outline",disabled:s(c)||s(u),onClick:x},{default:o(()=>[l(d(s(e)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["schema","state","onSubmit"])])}}});export{ns as default};
