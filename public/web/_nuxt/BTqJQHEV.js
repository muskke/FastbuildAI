import{d as $,b as j,aq as q,aY as B,aM as D,s as M,aK as _,i as N,c as W,o as z,l as t,k as a,q as d,p as e,y as A,_ as E,x as w,v as y,aV as G}from"#entry";import R from"./--UdezPG.js";import{_ as T}from"./BYwSSEjb.js";import H from"./CfxLE1oh.js";import{_ as K}from"./CqN3ElKI.js";import{_ as Y}from"./CJG2iIES.js";import{_ as J}from"./DNgvVYsj.js";import{a as O,b as P}from"./Z7RT5dpM.js";import{c as Q,a as x}from"./BUyfW8JT.js";import{u as V}from"./UqhBTNL6.js";import"./BgHJjJs-.js";import"./BaNg8fjw.js";import"./DlAUqK2U.js";import"./DaWZu8wl.js";const X={class:"information-container py-8"},Z={class:"flex items-start gap-4"},ee={class:"flex items-start gap-4"},oe={class:"flex items-start gap-4"},se={class:"flex space-x-3 pt-4"},we=$({__name:"information",setup(te){const{t:s}=j(),r=q(),p=B(),h=Q({name:x().required(s("system.website.information.name.required")),description:x().optional()}),o=D({name:"",description:"",icon:"",logo:"",spaLoadingIcon:""}),u=M(null),{lockFn:v,isLock:g}=_(async()=>{try{const n=await O();u.value=n,V(o,n.webinfo)}catch(n){console.error("Get website config failed:",n),r.error(s("system.website.messages.loadFailed"))}}),{lockFn:C,isLock:c}=_(async()=>{try{const n={webinfo:{name:o.name,description:o.description,icon:o.icon||"",logo:o.logo||"",spaLoadingIcon:o.spaLoadingIcon||""}};await P(n),r.success(s("system.website.messages.saveSuccess")),await p.getConfig(),G({title:o.name,link:[{rel:"icon",href:p.siteConfig?.webinfo?.icon||"/favicon.ico"},{rel:"apple-touch-icon",href:p.siteConfig?.webinfo?.logo||"/favicon.ico"}]})}catch(n){console.error("Save failed:",n)}}),L=()=>{u.value?(V(o,u.value.webinfo),r.info(s("system.website.messages.resetSuccess"))):(o.name="",o.description="",o.icon="",o.logo="",o.spaLoadingIcon="",r.info(s("system.website.messages.resetEmpty")))};return N(()=>v()),(n,i)=>{const I=A,U=R,m=T,k=H,f=K,b=E,F=Y,S=J;return z(),W("div",X,[t(S,{schema:e(h),state:e(o),class:"space-y-6",onSubmit:e(C)},{default:a(()=>[t(m,{label:e(s)("system.website.information.name.label"),name:"name",description:e(s)("system.website.information.name.description"),required:""},{default:a(()=>[t(U,{modelValue:e(o).name,"onUpdate:modelValue":i[0]||(i[0]=l=>e(o).name=l),placeholder:e(s)("system.website.information.name.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"}},{leading:a(()=>[t(I,{name:"i-heroicons-globe-alt"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.description.label"),name:"description",description:e(s)("system.website.information.description.description")},{default:a(()=>[t(k,{modelValue:e(o).description,"onUpdate:modelValue":i[1]||(i[1]=l=>e(o).description=l),placeholder:e(s)("system.website.information.description.placeholder"),rows:3,size:"lg",ui:{root:"w-full sm:w-xs"}},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.icon.label"),name:"icon",description:e(s)("system.website.information.icon.description")},{default:a(()=>[d("div",Z,[t(f,{modelValue:e(o).icon,"onUpdate:modelValue":i[2]||(i[2]=l=>e(o).icon=l),class:"h-24 w-24",text:e(s)("system.website.information.icon.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg,.ico",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.logo.label"),name:"logo",description:e(s)("system.website.information.logo.description")},{default:a(()=>[d("div",ee,[t(f,{modelValue:e(o).logo,"onUpdate:modelValue":i[3]||(i[3]=l=>e(o).logo=l),class:"h-24 w-24",text:e(s)("system.website.information.logo.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.spaLoadingIcon.label"),name:"spaLoadingIcon",description:e(s)("system.website.information.spaLoadingIcon.description")},{default:a(()=>[d("div",oe,[t(f,{modelValue:e(o).spaLoadingIcon,"onUpdate:modelValue":i[4]||(i[4]=l=>e(o).spaLoadingIcon=l),class:"h-24 w-24",text:e(s)("system.website.information.spaLoadingIcon.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),d("div",se,[t(F,{codes:["system-website:setConfig"]},{default:a(()=>[t(b,{type:"submit",color:"primary",loading:e(c),disabled:e(c)||e(g)},{default:a(()=>[w(y(e(c)?e(s)("system.website.actions.saving"):e(s)("system.website.actions.save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(b,{type:"reset",loading:e(c),disabled:e(c)||e(g),color:"neutral",variant:"outline",onClick:L},{default:a(()=>[w(y(e(s)("system.website.actions.reset")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["schema","state","onSubmit"])])}}});export{we as default};
