const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D0lQ7xif.js","./BruVSCWF.js","./IZm275qp.js","./DS-TE4M7.js","./BgHJjJs-.js","./CTGUoxQr.js","./DHFmmngs.js","./CR1AS2Ry.js","./CuOaO1Pb.js","./D6yWePie.js","./C3zg6GHm.js","./DVnbt8cp.js","./DuSMYVIA.js","./D-6Co9ha.js","./CXUt0j5Y.js","./-Eb02sIQ.js","./Dk6FGhu1.js","./BPKB8n-W.js","./MN31c9CG.js","./CCcv9mzY.js","./BFAo_s2U.js","./Cb04SOqd.js","./VGKgjfSv.js","./BUyfW8JT.js","./DaWZu8wl.js","./657m0Wru.js","./DGIb7fSK.js","./Btvd554H.js","./3UOIlTK8.js","./DduSJdeS.js","./Cif_tCX1.js","./DiYXikHi.js","./KP0vbSC4.js","./CQBV3TNh.js","./BFVs1AfH.js","./kRIii9yh.js","./C6Y-ieo6.js","./B-DdbQ-X.js","./V9POJiZu.js","./ptVgWJmt.js","./CgMDXot0.js","./BJ10eFuk.js","./Dx01Lm3C.js"])))=>i.map(i=>d[i]);
import{d as Q,ar as q,ap as G,b as K,Q as H,aL as J,s as W,bO as X,g as h,i as Y,c as f,o as p,q as i,j as x,t as Z,l as r,p as e,v as l,k as _,_ as ee,x as U,F as te,B as se,R as C,y as oe,U as P,bP as ae,bQ as ne}from"#entry";import re from"./BruVSCWF.js";import{_ as ie}from"./D0qu5Po3.js";import{_ as le}from"./ptVgWJmt.js";import{_ as ce}from"./DduSJdeS.js";import{_ as de}from"./CB78hAg2.js";import{_ as me}from"./i5AwkGQh.js";import{_ as pe}from"./CTfStZur.js";import{u as ue}from"./Dx01Lm3C.js";import{u as _e}from"./JqIoTTmi.js";import{u as fe}from"./BREwXy1w.js";import"./BFVs1AfH.js";import"./DHFmmngs.js";import"./kRIii9yh.js";import"./Btvd554H.js";import"./MN31c9CG.js";import"./C6Y-ieo6.js";import"./BPKB8n-W.js";import"./B-DdbQ-X.js";import"./V9POJiZu.js";import"./CuOaO1Pb.js";import"./D6yWePie.js";import"./DuSMYVIA.js";import"./3UOIlTK8.js";import"./C7UmhjTd.js";import"./Cb04SOqd.js";import"./VGKgjfSv.js";import"./BcsO9TDZ.js";import"./CgMDXot0.js";import"./CR1AS2Ry.js";import"./DVnbt8cp.js";import"./C3zg6GHm.js";import"./BgHJjJs-.js";import"./DlAUqK2U.js";const ge={class:"user-list-container pb-5"},he={class:"bg-background sticky top-0 z-10 flex flex-wrap gap-4 pb-2"},ve={class:"flex items-center gap-2 md:ml-auto"},ye={class:"flex items-center gap-2"},be={class:"text-accent-foreground text-sm"},ke={class:"grid grid-cols-1 gap-6 py-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4"},we={key:1,class:"flex h-[calc(100vh-10rem)] items-center justify-center"},xe={class:"flex items-center gap-3"},Ue={class:"text-accent-foreground"},Ce={key:2,class:"flex h-[calc(100vh-10rem)] flex-col items-center justify-center"},Pe={class:"text-accent-foreground"},Re={key:3,class:"bg-background sticky bottom-0 z-10 flex items-center justify-between gap-3 py-4"},Se={class:"text-muted text-sm"},De={class:"flex items-center gap-1.5"},mt=Q({__name:"list",setup(ze){const R=C(()=>P(()=>import("./D0lQ7xif.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url)),S=C(()=>P(()=>import("./657m0Wru.js"),__vite__mapDeps([25,2,26,27,28,12,29,22,30,31,32,33,34,6,35,18,36,17,37,38,8,9,39,40,7,11,10,4,41,42]),import.meta.url)),D=q(),z=G(),{t:d}=K(),B=H(),m=J({keyword:"",startTime:"",endTime:""}),n=W(new Set),{paging:o,getLists:u}=_e({fetchFun:X,params:m}),g=h(()=>o.items.filter(t=>t.isRoot!==1)),$=(t,s)=>{if(typeof s=="boolean"){const c=t.id;s?n.value.add(c):n.value.delete(c)}},A=t=>{t===!0?g.value.forEach(c=>{c.id&&n.value.add(c.id)}):n.value.clear()},v=async t=>{try{await fe({title:d("user.backend.deleteTitle"),description:d("user.backend.deleteMsg"),color:"error"}),Array.isArray(t)?await ae(t.map(String)):await ne(String(t)),n.value.clear(),u(),z.success(d("user.backend.success"))}catch(s){console.error("Delete failed:",s)}},E=t=>{t.id&&v(t.id)},T=async t=>{await B.create(R).open({user:t}).result&&u()},V=t=>{T(t)},I=()=>{const t=Array.from(n.value);t.length!==0&&v(t)},L=h(()=>g.value.length>0&&g.value.every(t=>t.id&&n.value.has(t.id))),M=h(()=>{const t=o.items.filter(s=>s.id&&n.value.has(s.id)).length;return t>0&&t<o.items.length});return Y(()=>u()),(t,s)=>{const c=re,y=ie,j=le,F=ce,b=ee,k=de,N=me,w=oe,O=pe;return p(),f("div",ge,[i("div",he,[r(c,{modelValue:e(m).keyword,"onUpdate:modelValue":s[0]||(s[0]=a=>e(m).keyword=a),placeholder:e(d)("user.backend.keywordInput"),class:"w-80",onChange:e(u)},null,8,["modelValue","placeholder","onChange"]),r(y,{start:e(m).startTime,"onUpdate:start":s[1]||(s[1]=a=>e(m).startTime=a),end:e(m).endTime,"onUpdate:end":s[2]||(s[2]=a=>e(m).endTime=a),"show-time":!0,ui:{root:"w-auto sm:w-xs"},onChange:e(u)},null,8,["start","end","onChange"]),i("div",ve,[i("div",ye,[r(j,{"model-value":e(L)?!0:e(M)?"indeterminate":!1,"onUpdate:modelValue":A},null,8,["model-value"]),i("span",be,l(e(n).size)+" / "+l(e(o).items.length)+" "+l(e(d)("console-common.selected")),1)]),r(k,{codes:["users:batch-delete"]},{default:_(()=>[r(b,{color:"error",variant:"subtle",label:e(d)("console-common.batchDelete"),icon:"i-heroicons-trash",disabled:e(n).size===0,onClick:I},{trailing:_(()=>[r(F,null,{default:_(()=>[U(l(e(n).size),1)]),_:1})]),_:1},8,["label","disabled"])]),_:1}),r(k,{codes:["users:create"]},{default:_(()=>[r(b,{icon:"i-heroicons-plus",color:"primary",onClick:s[3]||(s[3]=a=>e(D).push(("useRoutePath"in t?t.useRoutePath:e(ue))("users:create")))},{default:_(()=>[U(l(e(d)("user.backend.add")),1)]),_:1})]),_:1})])]),!e(o).loading&&e(o).items.length>0?(p(),x(N,{key:0,class:"h-[calc(100vh-13rem)]",shadow:!1},{default:_(()=>[i("div",ke,[(p(!0),f(te,null,se(e(o).items,a=>(p(),x(e(S),{key:a.id,user:a,selected:e(n).has(a.id),onEditPower:V,onSelect:$,onDelete:E},null,8,["user","selected"]))),128))])]),_:1})):e(o).loading?(p(),f("div",we,[i("div",xe,[r(w,{name:"i-lucide-loader-2",class:"text-primary-500 h-6 w-6 animate-spin"}),i("span",Ue,l(t.$t("common.loading")),1)])])):(p(),f("div",Ce,[r(w,{name:"i-lucide-users",class:"text-muted-foreground mb-4 h-16 w-16"}),i("p",Pe,l(t.$t("user.backend.noUsers")),1)])),e(o).total>0?(p(),f("div",Re,[i("div",Se,l(e(n).size)+" "+l(t.$t("console-common.selected")),1),i("div",De,[r(O,{page:e(o).page,"onUpdate:page":s[4]||(s[4]=a=>e(o).page=a),size:e(o).pageSize,"onUpdate:size":s[5]||(s[5]=a=>e(o).pageSize=a),total:e(o).total,onChange:e(u)},null,8,["page","size","total","onChange"])])])):Z("",!0)])}}});export{mt as default};
