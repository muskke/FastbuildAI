import{_ as P}from"./BJePYFQ7.js";import{_ as L}from"./Bu7cOM_l.js";import N from"./--UdezPG.js";import{_ as j}from"./BYwSSEjb.js";import{d as D,aq as T,f as v,a1 as V,aK as S,c as E,o as O,l as t,k as o,q as r,p as n,x as m,v as u,n as R,_ as h,y as A,bS as K,bT as W}from"#entry";import{_ as Y}from"./DAQypLay.js";import{_ as G}from"./DNgvVYsj.js";import{S as H}from"./B_UrLNVl.js";import{M as $}from"./7mZ7jJaJ.js";import{c as J,a as d,f as Q}from"./BUyfW8JT.js";import{s as X}from"./BzLCLO6P.js";import"./PB-3MFNY.js";import"./TH-3OOuG.js";import"./B22A-h4k.js";import"./b-_TUx9i.js";import"./Cv1u6XyE.js";import"./CKTa8Hyi.js";import"./8-c-A7PB.js";import"./DN9ov8OT.js";import"./kRIii9yh.js";import"./CKXZhss7.js";import"./pUN2d83w.js";import"./nBDBqKnC.js";import"./C6Y-ieo6.js";import"./BgHJjJs-.js";import"./BEEOk0sf.js";import"./XNFJUl58.js";/* empty css        */import"./DlAUqK2U.js";import"./BSZxZzsH.js";import"./DaWZu8wl.js";const Z={class:"px-8 pt-8"},ee={class:"flex items-center gap-1 text-xs"},te={class:"flex items-center gap-1 text-xs"},oe={class:"flex flex-1 gap-2 py-8"},Le=D({__name:"forget",emits:["switchComponent"],setup(se,{emit:C}){const k=C,f=T(),_=v([{value:"中国大陆",label:"86"}]),g=v(_.value[0]),U=J({mobile:d().required("请输入手机号").matches(/^1[3-9]\d{9}$/,"请输入正确的手机号码"),code:d().required("请输入验证码"),password:d().required("请输入新密码").min(6,"密码长度不能少于6个字符").max(25,"密码长度不能超过25个字符").matches(/^(?=.*[a-z])(?=.*[0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])/,"密码必须为数字，字母或符号组合"),password_confirm:d().required("请确认密码").oneOf([Q("password")],"两次输入的密码不一致")}),a=V({mobile:"",code:"",password:"",password_confirm:""}),i=V({isCounting:!1,text:"获取验证码"}),{lockFn:q,isLock:z}=S(async()=>{if(i.isCounting!==!0){i.text="正在发送中";try{await K({scene:H.FIND_PASSWORD,mobile:a.mobile}),i.isCounting=!0;let l=60;i.text=`${l}s`;const e=X(()=>{l--,i.text=`${l}s`,l===0&&(clearInterval(e),i.isCounting=!1,i.text="重新发送")},1e3);f.error("验证码发送成功，请注意查收",{title:"发送成功",duration:3e3})}catch(l){console.error("发送验证码失败:",l),i.isCounting=!1,i.text="重新发送",f.error("验证码发送失败，请稍后重试",{title:"发送失败",duration:3e3})}}}),{lockFn:F,isLock:I}=S(async()=>{try{await W(a)}catch(l){console.log("重置密码失败=>",l)}});return(l,e)=>{const B=P,x=L,b=N,p=j,c=h,w=Y,y=A,M=G;return O(),E("div",Z,[t(n($),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"tween",stiffness:300,damping:30,delay:.2},class:"relative"},{default:o(()=>[...e[7]||(e[7]=[r("h2",{class:"mb-2 text-2xl font-bold"},"忘记密码",-1),r("p",{class:"text-muted-foreground mb-4 text-sm"},"设置新密码以继续使用您的账户",-1)])]),_:1}),t(n($),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"tween",stiffness:300,damping:30,delay:.4},class:"relative"},{default:o(()=>[t(M,{schema:n(U),state:a,onSubmit:n(F)},{default:o(()=>[t(p,{label:"手机号",name:"mobile",required:""},{default:o(()=>[t(b,{modelValue:a.mobile,"onUpdate:modelValue":e[2]||(e[2]=s=>a.mobile=s),class:"w-full",size:"lg",placeholder:"请输入手机号码",autocomplete:"off",ui:{base:"!pl-24"}},{leading:o(()=>[r("div",{class:"flex items-center text-sm",onClick:e[1]||(e[1]=R(()=>{},["stop","prevent"]))},[e[8]||(e[8]=r("span",{class:"mr-[1px] pb-[1px]"},"+",-1)),t(B,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),"trailing-icon":"heroicons:chevron-up-down-20-solid",ui:{base:"!ring-0",content:"z-999 w-34"},class:"w-16",items:_.value},{item:o(({item:s})=>[m(u(s.value)+" +"+u(s.label),1)]),_:1},8,["modelValue","items"])]),t(x,{class:"h-1/2",orientation:"vertical"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"验证码",name:"code",class:"mt-2",required:""},{default:o(()=>[t(b,{id:"code",modelValue:a.code,"onUpdate:modelValue":e[3]||(e[3]=s=>a.code=s),size:"lg",placeholder:"请输入验证码",autocomplete:"off",ui:{root:"w-full",trailing:"pr-0"}},{trailing:o(()=>[t(x,{class:"h-1/2",orientation:"vertical"}),t(c,{variant:"link",ui:{base:"w-[90px] justify-center"},disabled:n(z),onClick:n(q)},{default:o(()=>[m(u(i.text),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"新密码",name:"password",class:"mt-3",required:""},{help:o(()=>[r("div",ee,[t(y,{name:"tabler:alert-circle",size:"14"}),e[9]||(e[9]=m(" 密码必须为6-25位数字+字母或符号组合 ",-1))])]),default:o(()=>[t(w,{modelValue:a.password,"onUpdate:modelValue":e[4]||(e[4]=s=>a.password=s),class:"w-full",type:"password",size:"lg",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),t(p,{label:"确认密码",name:"password_confirm",class:"mt-3",required:""},{help:o(()=>[r("div",te,[t(y,{name:"tabler:alert-circle",size:"14"}),e[10]||(e[10]=m(" 密码必须为6-25位数字+字母或符号组合 ",-1))])]),default:o(()=>[t(w,{modelValue:a.password_confirm,"onUpdate:modelValue":e[5]||(e[5]=s=>a.password_confirm=s),class:"w-full",type:"password",size:"lg",placeholder:"请再次输入新密码"},null,8,["modelValue"])]),_:1}),r("div",oe,[t(c,{variant:"outline",color:"primary",size:"lg",ui:{base:"flex-1 justify-center"},onClick:e[6]||(e[6]=s=>k("switchComponent","account-login"))},{default:o(()=>[...e[11]||(e[11]=[m(" 返回登录 ",-1)])]),_:1}),t(c,{color:"primary",type:"submit",size:"lg",ui:{base:"flex-1 justify-center"},loading:n(I)},{default:o(()=>[...e[12]||(e[12]=[m(" 确认修改 ",-1)])]),_:1},8,["loading"])])]),_:1},8,["schema","state","onSubmit"])]),_:1})])}}});export{Le as default};
