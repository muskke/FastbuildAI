import K from"./BruVSCWF.js";import{_ as M}from"./Cif_tCX1.js";import{d as z,s as c,b as A,i as E,j as p,o as n,k as T,q as u,l as d,c as k,bH as B,A as F,p as f,F as $,B as L,_ as R,v as C}from"#entry";import{_ as j}from"./CXUt0j5Y.js";import{a as q,b as G,c as H,d as I}from"./DyY5B2r8.js";import{u as S}from"./BREwXy1w.js";import"./-Eb02sIQ.js";import"./Dk6FGhu1.js";import"./BPKB8n-W.js";import"./DuSMYVIA.js";import"./MN31c9CG.js";import"./CCcv9mzY.js";import"./BFAo_s2U.js";import"./Cb04SOqd.js";import"./VGKgjfSv.js";const J={class:"flex flex-wrap gap-2"},re=z({__name:"manage-popup",props:{type:{}},emits:["close"],setup(V,{emit:h}){const U=h,i=V,_=c([]),o=c(""),r=c(-1),s=async()=>{const e=await q({type:i.type});_.value=e},m=async()=>{o.value.trim()&&(await G({name:o.value,type:i.type}),o.value="",s())},x=async e=>{e.name.trim()&&(await H(e.id,{name:e.name,type:i.type}),r.value=-1,s())},{t:g}=A(),b=async e=>{await S({title:g("common.tag.deleteTag"),description:g("common.tag.confirmDeleteTag"),color:"error"})&&(await I(e.id),s())};return E(()=>{s()}),(e,t)=>{const y=K,v=M,D=R,N=j;return n(),p(N,{title:e.$t("common.tag.manageTags"),ui:{content:"max-w-xl"},onClose:t[1]||(t[1]=a=>U("close"))},{default:T(()=>[u("div",J,[d(y,{modelValue:f(o),"onUpdate:modelValue":t[0]||(t[0]=a=>F(o)?o.value=a:null),placeholder:e.$t("common.tag.createNewTag"),onKeydown:B(m,["enter"]),onBlur:m},null,8,["modelValue","placeholder"]),(n(!0),k($,null,L(f(_),(a,w)=>(n(),k($,{key:a.id},[f(r)!==w?(n(),p(D,{key:0,color:"neutral",variant:"outline",ui:{base:"gap-2"}},{default:T(()=>[u("span",null,C(a.name),1),u("span",null,C(a.bindingCount),1),d(v,{color:"neutral",icon:"i-lucide-pen-line",variant:"soft",size:"xs",onClick:l=>r.value=w},null,8,["onClick"]),d(v,{color:"neutral",icon:"i-lucide-trash",variant:"soft",size:"xs",onClick:l=>b(a)},null,8,["onClick"])]),_:2},1024)):(n(),p(y,{key:1,modelValue:a.name,"onUpdate:modelValue":l=>a.name=l,autofocus:"",color:"primary",onKeydown:B(m,["enter"]),onBlur:l=>x(a)},null,8,["modelValue","onUpdate:modelValue","onBlur"]))],64))),128))])]),_:1},8,["title"])}}});export{re as default};
