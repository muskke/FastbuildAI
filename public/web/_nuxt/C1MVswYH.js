import{d as g,f as l,w as _,i as v,af as x,c as n,o as r,m as y,r as M,q as i,t as b,l as w,y as k,v as c}from"#entry";const B={key:0,class:"flex items-center justify-center gap-1"},I={class:"text-secondary-foreground text-sm"},N={key:1,class:"text-secondary-foreground text-sm"},T=g({inheritAttrs:!1,__name:"index",props:{loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},threshold:{default:200},loadingText:{default:"loading..."},noMoreText:{default:"No more data"}},emits:["loadMore"],setup(d,{emit:f}){const e=d,u=f,m=l(null),s=l(null);let o=null;function a(){!window.IntersectionObserver||!s.value||!e.hasMore||e.loading||(o=new IntersectionObserver(t=>{t[0]?.isIntersecting&&u("loadMore")},{root:null,rootMargin:`${e.threshold}px`,threshold:0}),o.observe(s.value))}function h(){o&&(o.disconnect(),o=null),Promise.resolve().then(()=>{a()})}return _(()=>[e.loading,e.hasMore],()=>{h()}),v(()=>{a()}),x(()=>{o&&(o.disconnect(),o=null)}),(t,O)=>{const p=k;return r(),n("div",y({ref_key:"containerRef",ref:m},t.$attrs,{class:"h-full w-full"}),[M(t.$slots,"default"),i("div",{ref_key:"loadingRef",ref:s,class:"flex h-8 w-full items-center justify-center"},[e.loading&&e.hasMore?(r(),n("div",B,[w(p,{name:"i-ph-spinner-gap-bold",size:"16",class:"text-secondary-foreground animate-spin"}),i("span",I,c(e.loadingText),1)])):e.hasMore?b("",!0):(r(),n("div",N,c(e.noMoreText),1))],512)],16)}}});export{T as _};
