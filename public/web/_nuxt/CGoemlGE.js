import{_ as T}from"./DBjGnECu.js";import{aD as V,d as S,b as N,aM as D,g as K,h as _,_ as P,i as I,c as m,o as s,q as r,l as i,p as a,k as p,v as u,j as b,x as h,C as $}from"#entry";import z from"./--UdezPG.js";import{_ as R}from"./EHoVw6ZP.js";import{_ as O}from"./Brvl6ix_.js";import{_ as j}from"./DgnnKcyj.js";import{u as E}from"./FihYtau-.js";import"./8-c-A7PB.js";import"./DN9ov8OT.js";import"./TH-3OOuG.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Cfcu-t3n.js";import"./BstbYvQo.js";import"./B22A-h4k.js";import"./DlAUqK2U.js";const F=f=>V("/finance/account-log",f),G={class:"flex h-full flex-col space-y-4"},L={class:"flex items-center gap-4 pb-2"},M={class:"flex-1 overflow-hidden"},q={class:"h-full"},Y={key:0,class:"text-green-500"},H={key:1,class:"text-red-500"},J={class:"flex justify-end py-4"},pe=S({__name:"account-balance",setup(f){const y=T,v=P,{t:o}=N(),B=[{label:"financial.accountBalance.allTypes",value:null},{label:"financial.accountBalance.userRecharge",value:"100"},{label:"financial.accountBalance.userRechargeGift",value:"101"},{label:"financial.accountBalance.userRechargeRefund",value:"102"},{label:"financial.accountBalance.systemIncreasePower",value:"200"},{label:"financial.accountBalance.systemDecreasePower",value:"201"},{label:"financial.accountBalance.basicConversation",value:"300"},{label:"financial.accountBalance.agentConversation",value:"400"},{label:"financial.accountBalance.sharedAgentConversation",value:"401"},{label:"financial.accountBalance.pluginConsumption",value:"500"}],l=D({keyword:"",accountType:null}),{paging:c,getLists:d,resetPage:k}=E({fetchFun:F,params:l}),x=K(()=>[{accessorKey:"accountNo",header:o("financial.accountBalance.table.userNo")},{accessorKey:"nickname",header:o("financial.accountBalance.table.nickname")},{accessorKey:"changeAmount",header:o("financial.accountBalance.table.changeAmount")},{accessorKey:"leftAmount",header:o("financial.accountBalance.table.leftAmount")},{accessorKey:"accountTypeDesc",header:o("financial.accountBalance.table.accountTypeDesc")},{accessorKey:"consumeSourceDesc",header:o("financial.accountBalance.table.consumeSourceDesc")},{accessorKey:"associationUser",header:o("financial.accountBalance.table.associationUser")},{accessorKey:"createdAt",header:({column:t})=>{const n=t.getIsSorted();return _(v,{color:"neutral",variant:"ghost",label:o("financial.accountBalance.table.createdAt"),icon:n?n==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc")})},cell:({row:t})=>{const n=t.getValue("createdAt");return _(y,{datetime:n,mode:"datetime"})}}]);return I(()=>{d()}),(t,n)=>{const A=z,w=R,g=$,U=O,C=j;return s(),m("div",G,[r("div",L,[i(A,{class:"w-56",modelValue:a(l).keyword,"onUpdate:modelValue":[n[0]||(n[0]=e=>a(l).keyword=e),a(k)],placeholder:a(o)("financial.accountBalance.searchPlaceholder")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),i(w,{class:"w-56",modelValue:a(l).accountType,"onUpdate:modelValue":[n[1]||(n[1]=e=>a(l).accountType=e),a(d)],items:B.map(e=>({label:a(o)(e.label),value:e.value})),placeholder:"变动类型"},null,8,["modelValue","items","onUpdate:modelValue"])]),r("div",M,[r("div",q,[i(U,{sticky:"",columns:a(x),data:a(c).items,loading:a(c).loading,ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r",td:"border-b border-default"},class:"h-[calc(100vh-13rem)] shrink-0"},{"userNo-cell":p(({row:e})=>[h(u(e.original.accountNo),1)]),"nickname-cell":p(({row:e})=>[e.original.user?.avatar?(s(),b(g,{key:0,src:e.original.user.avatar},null,8,["src"])):(s(),b(g,{key:1,icon:"i-heroicons-user",name:e.original.user?.username},null,8,["name"])),h(" "+u(e.original.user?.username),1)]),"changeAmount-cell":p(({row:e})=>[e.original.action===1?(s(),m("span",Y," +"+u(e.original.changeAmount),1)):(s(),m("span",H," -"+u(e.original.changeAmount),1))]),_:1},8,["columns","data","loading"])])]),r("div",J,[i(C,{page:a(c).page,"onUpdate:page":n[2]||(n[2]=e=>a(c).page=e),size:a(c).pageSize,"onUpdate:size":n[3]||(n[3]=e=>a(c).pageSize=e),total:a(c).total,onChange:a(d)},null,8,["page","size","total","onChange"])])])}}});export{pe as default};
