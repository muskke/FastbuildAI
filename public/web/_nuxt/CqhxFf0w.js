import{_ as B}from"./ybFaAORl.js";import N from"./BruVSCWF.js";import{_ as z}from"./DS-TE4M7.js";import{_ as E}from"./CoK0jBu7.js";import{d as R,b as W,ap as A,s as g,aL as D,aJ as T,i as G,c as u,o as d,q as V,l as a,p as t,A as I,k as l,t as M,F as f,_ as J,x as k,v as U}from"#entry";import{_ as j}from"./CB78hAg2.js";import{_ as H}from"./D-6Co9ha.js";import{a as K,b as O}from"./D0igDNVj.js";import"./DHFmmngs.js";import"./DuSMYVIA.js";import"./CuOaO1Pb.js";import"./D6yWePie.js";import"./DVnbt8cp.js";import"./Cif_tCX1.js";import"./BgHJjJs-.js";import"./CQBV3TNh.js";import"./BFVs1AfH.js";import"./kRIii9yh.js";import"./Btvd554H.js";import"./MN31c9CG.js";import"./C6Y-ieo6.js";import"./BPKB8n-W.js";import"./B-DdbQ-X.js";import"./V9POJiZu.js";import"./3UOIlTK8.js";import"./DduSJdeS.js";import"./VGKgjfSv.js";import"./Dkb19qXD.js";import"./BMSQkwth.js";import"./DaWZu8wl.js";const P={class:"agreement-container relative"},Q={class:"mb-4 inline-block w-auto"},X={class:"flex space-x-3 pt-4"},Le=R({__name:"index",setup(Y){const{t:s}=W(),p=A(),r=g("0"),x=g([{label:s("system.website.agreement.privacy")},{label:s("system.website.agreement.service")},{label:s("system.website.agreement.payment")}]),e=D({privacyTitle:"",privacyContent:"",serviceTitle:"",serviceContent:"",paymentTitle:"",paymentContent:""}),m=g(null),{lockFn:C,isLock:_}=T(async()=>{try{const n=await K();m.value=n,e.privacyTitle=n.agreement.privacyTitle||s("system.website.agreement.privacy"),e.privacyContent=n.agreement.privacyContent||"",e.serviceTitle=n.agreement.serviceTitle||s("system.website.agreement.service"),e.serviceContent=n.agreement.serviceContent||"",e.paymentTitle=n.agreement.paymentTitle||s("system.website.agreement.payment"),e.paymentContent=n.agreement.paymentContent||""}catch(n){console.error("Get website config failed:",n),p.error(s("system.website.messages.loadFailed"))}}),{lockFn:F,isLock:y}=T(async()=>{try{const n={agreement:{privacyTitle:e.privacyTitle,privacyContent:e.privacyContent,serviceTitle:e.serviceTitle,serviceContent:e.serviceContent,paymentTitle:e.paymentTitle,paymentContent:e.paymentContent}};await O(n),p.success(s("system.website.messages.saveSuccess")),await C()}catch(n){console.error("Save failed:",n),p.error(s("system.website.messages.saveFailed"))}}),L=()=>{m.value?(e.privacyTitle=m.value.agreement.privacyTitle||s("system.website.agreement.privacy"),e.privacyContent=m.value.agreement.privacyContent||"",e.serviceTitle=m.value.agreement.serviceTitle||s("system.website.agreement.service"),e.serviceContent=m.value.agreement.serviceContent||"",e.paymentTitle=m.value.agreement.paymentTitle||s("system.website.agreement.payment"),e.paymentContent=m.value.agreement.paymentContent||"",p.info(s("system.website.messages.resetSuccess"))):(e.privacyTitle=s("system.website.agreement.privacy"),e.privacyContent="",e.serviceTitle=s("system.website.agreement.service"),e.serviceContent="",e.paymentTitle=s("system.website.agreement.payment"),e.paymentContent="",p.info(s("system.website.messages.resetEmpty")))};return G(()=>C()),(n,i)=>{const q=B,v=N,c=z,b=E,w=J,S=j,$=H;return d(),u("div",P,[V("div",Q,[a(q,{modelValue:t(r),"onUpdate:modelValue":i[0]||(i[0]=o=>I(r)?r.value=o:null),items:t(x)},null,8,["modelValue","items"])]),a($,{state:t(e),onSubmit:t(F)},{default:l(()=>[t(r)==="0"?(d(),u(f,{key:0},[a(c,{name:"privacyTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).privacyTitle,"onUpdate:modelValue":i[1]||(i[1]=o=>t(e).privacyTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"privacyContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:l(()=>[a(b,{modelValue:t(e).privacyContent,"onUpdate:modelValue":i[2]||(i[2]=o=>t(e).privacyContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):t(r)==="1"?(d(),u(f,{key:1},[a(c,{name:"serviceTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).serviceTitle,"onUpdate:modelValue":i[3]||(i[3]=o=>t(e).serviceTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"serviceContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:l(()=>[a(b,{modelValue:t(e).serviceContent,"onUpdate:modelValue":i[4]||(i[4]=o=>t(e).serviceContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):t(r)==="2"?(d(),u(f,{key:2},[a(c,{name:"paymentTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).paymentTitle,"onUpdate:modelValue":i[5]||(i[5]=o=>t(e).paymentTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"paymentContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:l(()=>[a(b,{modelValue:t(e).paymentContent,"onUpdate:modelValue":i[6]||(i[6]=o=>t(e).paymentContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):M("",!0),V("div",X,[a(S,{codes:["system-website:setConfig"]},{default:l(()=>[a(w,{type:"submit",color:"primary",loading:t(y),disabled:t(y)||t(_)},{default:l(()=>[k(U(t(y)?t(s)("system.website.actions.saving"):t(s)("system.website.actions.saveChanges")),1)]),_:1},8,["loading","disabled"])]),_:1}),a(w,{type:"reset",color:"neutral",variant:"outline",disabled:t(y)||t(_),onClick:L},{default:l(()=>[k(U(t(s)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["state","onSubmit"])])}}});export{Le as default};
