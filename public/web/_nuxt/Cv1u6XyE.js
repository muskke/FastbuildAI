import{ar as _e,d as K,ad as X,ae as Ce,ag as Z,bq as oe,f as x,af as le,w as xe,G as A,al as z,j as E,o as q,k as w,r as I,t as se,p as t,$ as V,aj as we,l as ne,bI as T,n as J,g as M,cC as Ee,i as qe,ah as ke,m as Q,Z as re,cD as Le,cE as Ke}from"#entry";import{u as ue}from"./B22A-h4k.js";import{f as Ie}from"./CKTa8Hyi.js";import{u as Ve}from"./8-c-A7PB.js";import{u as Be}from"./DN9ov8OT.js";import{u as Fe}from"./kRIii9yh.js";import{u as Se}from"./CKXZhss7.js";import{g as Ae}from"./pUN2d83w.js";import{V as He}from"./nBDBqKnC.js";function Te(n,r,a){return n===void 0?!1:Array.isArray(n)?n.some(l=>H(l,r,a)):H(n,r,a)}function H(n,r,a){return n===void 0||r===void 0?!1:typeof n=="string"?n===r:typeof a=="function"?a(n,r):typeof a=="string"?n?.[a]===r?.[a]:_e(n,r)}const[W,Re]=X("ListboxRoot");var De=K({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:r,emit:a}){const l=n,f=a,{multiple:s,highlightOnHover:c,orientation:g,disabled:u,selectionBehavior:_,dir:y}=Ce(l),{getItems:h}=Z({isProvider:!0}),{handleTypeaheadSearch:B}=Se(),{primitiveElement:R,currentElement:v}=oe(),C=Fe(),P=Ve(y),de=Be(v),D=x(),F=x(!1),$=x(!0),p=le(l,"modelValue",f,{defaultValue:l.defaultValue??(s.value?[]:void 0),passive:l.modelValue===void 0,deep:!0});function fe(e){if(F.value=!0,l.multiple){const i=Array.isArray(p.value)?[...p.value]:[],o=i.findIndex(d=>H(d,e,l.by));l.selectionBehavior==="toggle"?(o===-1?i.push(e):i.splice(o,1),p.value=i):(p.value=[e],D.value=e)}else l.selectionBehavior==="toggle"&&H(p.value,e,l.by)?p.value=void 0:p.value=e;setTimeout(()=>{F.value=!1},1)}const m=x(null),G=x(null),k=x(!1),N=x(!1),Y=z(),O=z(),ee=z();function j(){return h().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function b(e,i=!0){if(!e)return;m.value=e,$.value&&m.value.focus(),i&&m.value.scrollIntoView({block:"nearest"});const o=h().find(d=>d.ref===e);f("highlight",o)}function ce(e){if(k.value)ee.trigger(e);else{const i=h().find(o=>H(o.value,e,l.by));i&&(m.value=i.ref,b(i.ref))}}function ve(e){m.value&&m.value.isConnected&&(e.preventDefault(),e.stopPropagation(),N.value||m.value.click())}function pe(e){if($.value){if(F.value=!0,k.value)O.trigger(e);else{const i=e.altKey||e.ctrlKey||e.metaKey;if(i&&e.key==="a"&&s.value){const o=h(),d=o.map(L=>L.value);p.value=[...d],e.preventDefault(),b(o[o.length-1].ref)}else if(!i){const o=B(e.key,h());o&&b(o)}}setTimeout(()=>{F.value=!1},1)}}function me(){N.value=!0}function he(){A(()=>{N.value=!1})}function te(){A(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ae(e)})}function U(e){const i=m.value;i?.isConnected&&(G.value=i),m.value=null,f("leave",e)}function ye(e){const i=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(i),f("entryFocus",i),!i.defaultPrevented)if(G.value)b(G.value);else{const o=j()?.[0];b(o)}}function ae(e){const i=Ae(e,g.value,P.value);if(!i)return;let o=j();if(m.value){if(i==="last")o.reverse();else if(i==="prev"||i==="next"){i==="prev"&&o.reverse();const d=o.indexOf(m.value);o=o.slice(d+1)}ge(e,o[0])}if(o.length){const d=!m.value&&i==="prev"?o.length-1:0;b(o[d])}if(k.value)return O.trigger(e)}function ge(e,i){if(!(k.value||l.selectionBehavior!=="replace"||!s.value||!Array.isArray(p.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const d=h().filter(S=>S.ref.dataset.disabled!=="");let L=d.find(S=>S.ref===i)?.value;if(e.key===C.END?L=d[d.length-1].value:e.key===C.HOME&&(L=d[0].value),!L||!D.value)return;const be=Ie(d.map(S=>S.value),D.value,L);p.value=be}}async function ie(e){if(await A(),k.value)Y.trigger(e);else{const i=j(),o=i.find(d=>d.dataset.state==="checked");o?b(o):i.length&&b(i[0])}}return xe(p,()=>{F.value||A(()=>{ie()})},{immediate:!0,deep:!0}),r({highlightedElement:m,highlightItem:ce,highlightFirstItem:te,highlightSelected:ie,getItems:h}),Re({modelValue:p,onValueChange:fe,multiple:s,orientation:g,dir:P,disabled:u,highlightOnHover:c,highlightedElement:m,isVirtual:k,virtualFocusHook:Y,virtualKeydownHook:O,virtualHighlightHook:ee,by:l.by,firstValue:D,selectionBehavior:_,focusable:$,onLeave:U,onEnter:ye,changeHighlight:b,onKeydownEnter:ve,onKeydownNavigation:ae,onKeydownTypeAhead:pe,onCompositionStart:me,onCompositionEnd:he,highlightFirstItem:te}),(e,i)=>(q(),E(t(V),{ref_key:"primitiveElement",ref:R,as:e.as,"as-child":e.asChild,dir:t(P),"data-disabled":t(u)?"":void 0,onPointerleave:U,onFocusout:i[0]||(i[0]=async o=>{const d=o.relatedTarget||o.target;await A(),m.value&&t(v)&&!t(v).contains(d)&&U(o)})},{default:w(()=>[I(e.$slots,"default",{modelValue:t(p)}),t(de)&&e.name?(q(),E(t(He),{key:0,name:e.name,value:t(p),disabled:t(u),required:e.required},null,8,["name","value","disabled","required"])):se("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),it=De,Me=K({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{CollectionSlot:r}=Z(),a=W(),l=we(!1,10);return(f,s)=>(q(),E(t(r),null,{default:w(()=>[ne(t(V),{role:"listbox",as:f.as,"as-child":f.asChild,tabindex:t(a).focusable.value?t(a).highlightedElement.value?"-1":"0":"-1","aria-orientation":t(a).orientation.value,"aria-multiselectable":!!t(a).multiple.value,"data-orientation":t(a).orientation.value,onMousedown:s[0]||(s[0]=J(c=>l.value=!0,["left"])),onFocus:s[1]||(s[1]=c=>{t(l)||t(a).onEnter(c)}),onKeydown:[s[2]||(s[2]=T(c=>{t(a).orientation.value==="vertical"&&(c.key==="ArrowLeft"||c.key==="ArrowRight")||t(a).orientation.value==="horizontal"&&(c.key==="ArrowUp"||c.key==="ArrowDown")||(c.preventDefault(),t(a).focusable.value&&t(a).onKeydownNavigation(c))},["down","up","left","right","home","end"])),T(t(a).onKeydownEnter,["enter"]),t(a).onKeydownTypeAhead]},{default:w(()=>[I(f.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),ot=Me,Pe=K({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:r}){const a=n,f=le(a,"modelValue",r,{defaultValue:"",passive:a.modelValue===void 0}),s=W(),{primitiveElement:c,currentElement:g}=oe(),u=M(()=>a.disabled||s.disabled.value||!1),_=x();return Ee(()=>_.value=s.highlightedElement.value?.id),qe(()=>{s.focusable.value=!1,setTimeout(()=>{a.autoFocus&&g.value?.focus()},1)}),ke(()=>{s.focusable.value=!0}),(y,h)=>(q(),E(t(V),{ref_key:"primitiveElement",ref:c,as:y.as,"as-child":y.asChild,value:t(f),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":_.value,type:"text",onKeydown:[T(J(t(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),T(t(s).onKeydownEnter,["enter"])],onInput:h[0]||(h[0]=B=>{f.value=B.target.value,t(s).highlightFirstItem()}),onCompositionstart:t(s).onCompositionStart,onCompositionend:t(s).onCompositionEnd},{default:w(()=>[I(y.$slots,"default",{modelValue:t(f)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),lt=Pe;const[st,$e]=X("ListboxGroup");var Ge=K({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const r=n,a=ue(void 0,"reka-listbox-group");return $e({id:a}),(l,f)=>(q(),E(t(V),Q({role:"group"},r,{"aria-labelledby":t(a)}),{default:w(()=>[I(l.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),nt=Ge;const Ne="listbox.select",[Oe,je]=X("ListboxItem");var Ue=K({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:r}){const a=n,l=r,f=ue(void 0,"reka-listbox-item"),{CollectionItem:s}=Z(),{forwardRef:c,currentElement:g}=re(),u=W(),_=M(()=>g.value===u.highlightedElement.value),y=M(()=>Te(u.modelValue.value,a.value,u.by)),h=M(()=>u.disabled.value||a.disabled);async function B(v){l("select",v),!v?.defaultPrevented&&!h.value&&v&&(u.onValueChange(a.value),u.changeHighlight(g.value))}function R(v){const C={originalEvent:v,value:a.value};Ke(Ne,B,C)}return je({isSelected:y}),(v,C)=>(q(),E(t(s),{value:v.value},{default:w(()=>[Le([_.value,y.value],()=>ne(t(V),Q({id:t(f)},v.$attrs,{ref:t(c),role:"option",tabindex:t(u).focusable.value?_.value?"0":"-1":-1,"aria-selected":y.value,as:v.as,"as-child":v.asChild,disabled:h.value?"":void 0,"data-disabled":h.value?"":void 0,"data-highlighted":_.value?"":void 0,"data-state":y.value?"checked":"unchecked",onClick:R,onKeydown:T(J(R,["prevent"]),["space"]),onPointermove:C[0]||(C[0]=()=>{t(u).highlightedElement.value!==t(g)&&t(u).highlightOnHover.value&&!t(u).focusable.value&&t(u).changeHighlight(t(g),!1)})}),{default:w(()=>[I(v.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),C,1)]),_:3},8,["value"]))}}),rt=Ue,ze=K({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const r=n;re();const a=Oe();return(l,f)=>t(a).isSelected.value?(q(),E(t(V),Q({key:0,"aria-hidden":"true"},r),{default:w(()=>[I(l.$slots,"default")]),_:3},16)):se("v-if",!0)}}),ut=ze;export{lt as L,ot as a,nt as b,rt as c,ut as d,it as e,W as f,st as i};
