const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Crd9NAA1.js","./CpacWlXu.js","./BYK_1AlN.js","./BJ_E6Ph7.js","./DSMB-qMT.js","./b-_TUx9i.js","./B22A-h4k.js","./Cfcu-t3n.js","./B128ot1i.js","./CoMGTw2w.js","./CP4Zo7YT.js","./XpsTG8vq.js","./--UdezPG.js","./BwTGIg9g.js","./BWWuJQeZ.js","./DN9ov8OT.js","./9bDOsXij.js","./pUN2d83w.js","./Cpt2kRVT.js","./8-c-A7PB.js","./nBDBqKnC.js","./BgHJjJs-.js","./B1Lg5z9T.js","./CLTNKp0S.js","./kRIii9yh.js","./TH-3OOuG.js","./C6Y-ieo6.js","./DaNf1Wdt.js","./CKXZhss7.js","./Bub1HYiY.js","./lw_U4-W2.js","./CJG2iIES.js","./CBooyAK7.js","./PM3E-asR.js","./BO1GPLSL.js","./ZZC6mEJB.js","./Dp_0VxUw.js","./B93AZ-4h.js","./C2U1766r.js","./BYwSSEjb.js","./Brvl6ix_.js","./DNgvVYsj.js"])))=>i.map(i=>d[i]);
import{aD as R,aH as S,aG as de,aC as ue,d as me,aq as pe,b as ve,Q as fe,s as T,f as L,aK as w,g as O,w as G,H as _e,c as f,o as m,q as r,t as M,l as d,p as t,A as he,x as A,v as c,j as D,k as g,_ as ge,F as B,B as $,z as I,C as be,y as ye,R as j,U as N}from"#entry";import ke from"./--UdezPG.js";import{_ as xe}from"./BwTGIg9g.js";import{_ as we}from"./B1Lg5z9T.js";import{_ as Me}from"./CJG2iIES.js";import{_ as Ae}from"./CBooyAK7.js";import{_ as Se}from"./PM3E-asR.js";import{_ as ze}from"./BO1GPLSL.js";import{_ as Ce}from"./ZZC6mEJB.js";import{u as Ue}from"./Dp_0VxUw.js";import{u as De}from"./B93AZ-4h.js";function Be(n){return R("/ai-models",n)}function ut(n){return R(`/ai-models/${n}`)}function mt(n){return ue("/ai-models",n)}function pt(n,_){return S(`/ai-models/${n}`,_)}function $e(n,_){return S(`/ai-models/${n}/toggle-active`,{isActive:_})}function vt(n){return S("/ai-models/batch/update",{models:n})}function Ie(n,_){return S("/ai-models/batch-toggle-active",{ids:n,isActive:_})}function Re(n){return de("/ai-models",{ids:n})}function ft(n){return R("/ai-models/type-father/list",n)}const Ve={class:"w-full space-y-2 px-5"},Ee={class:"mb-4 pl-2"},Fe={class:"mb-4 flex items-center justify-between pl-2"},Pe={class:"flex items-center gap-3"},Te={class:"text-xs font-medium"},Le={key:0,class:"text-primary"},Oe={class:"flex items-center gap-2"},Ge={key:0,class:"space-y-3"},je={class:"flex-none"},Ne={class:"min-w-0 flex-1"},qe={class:"mb-1 flex items-center gap-2"},He={class:"hover:text-primary cursor-pointer truncate text-sm font-medium text-gray-900 transition-colors dark:text-gray-100"},Ke={class:"flex gap-1"},Qe={key:0,class:"text-muted-foreground flex items-center gap-2 text-xs"},Je={class:"flex flex-none items-center gap-3"},We={key:2,class:"py-12 text-center"},Xe={class:"text-foreground mb-2 text-lg font-medium"},Ye={class:"text-muted-foreground text-sm"},Ze=me({__name:"model-list",props:{provider:{}},setup(n){const _=j(()=>N(()=>import("./Crd9NAA1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]),import.meta.url)),q=j(()=>N(()=>import("./C2U1766r.js"),__vite__mapDeps([38,1,12,39,21,35,15,20,40,41,2,3,4,5,6,7,8,9,10,11,13,14,16,17,18,19,22,23,24,25,26,27,28,29,30,31,32,33,34,36,37]),import.meta.url)),p=n,z=pe(),{t:a}=ve(),C=fe(),{hasAccessByCodes:x}=Ue(),u=T([]),y=T(""),s=L(new Set),h=L(new Set),{lockFn:b,isLock:V}=w(async()=>{if(p.provider?.id)try{const e=await Be({providerId:p.provider.id,isActive:void 0,keyword:y.value?.trim()||void 0});u.value=e||[]}catch(e){console.error("获取模型列表失败:",e)}}),{lockFn:H}=w(async(e,o)=>{try{await $e(e,o);const l=u.value.find(v=>v.id===e);l&&(l.isActive=o)}catch(l){console.error("切换模型状态失败:",l)}}),K=async e=>{await C.create(_).open({id:e.id,provider:p.provider}).result&&b()},Q=async()=>{await C.create(_).open({id:null,provider:p.provider}).result&&b()},J=async()=>{if(s.value.size===0)return;await C.create(q).open({models:h.value,provider:p.provider}).result&&b(),s.value.clear(),h.value.clear()},{lockFn:E}=w(async e=>{if(s.value.size===0)return;const o=Array.from(s.value);try{await Ie(o,e),z.success(a(e?"ai-provider.backend.model.messages.isActiveEnabled":"ai-provider.backend.model.messages.isActiveDisabled")),s.value.clear(),h.value.clear(),b()}catch(l){console.error("Toggle model active failed:",l)}}),{lockFn:W}=w(async()=>{if(s.value.size===0)return;const e=Array.from(s.value);try{await De({title:a("ai-provider.backend.model.messages.deleteTitle"),description:a("ai-provider.backend.model.messages.deleteMsg"),color:"error"}),await Re(e),z.success(a("console-common.batchDeleteSuccess")),s.value.clear(),h.value.clear(),b()}catch(o){console.error("批量删除失败:",o),z.error(a("console-common.batchDeleteFailed"))}}),X=()=>{const e=[];return x(["ai-models:update"])&&(e.push({label:a("console-common.batchEnable"),icon:"i-lucide-eye",color:"neutral",onSelect:()=>E(!0)}),e.push({label:a("console-common.batchDisable"),icon:"i-lucide-eye-off",color:"neutral",onSelect:()=>E(!1)}),e.push({label:a("console-common.batchEdit"),icon:"i-lucide-edit",color:"neutral",onSelect:()=>J()})),x(["ai-models:delete"])&&e.push({label:a("console-common.batchDelete"),icon:"i-heroicons-trash",color:"error",onSelect:()=>W()}),e},Y=e=>{const o=e.id,l=new Set(s.value),v=new Set(h.value);l.has(o)?(l.delete(o),v.delete(e)):(l.add(o),v.add(e)),s.value=l,h.value=v},Z=()=>{if(s.value.size===u.value.length)s.value.clear(),h.value.clear();else{const e=new Set,o=new Set;u.value.forEach(l=>{l.id&&(e.add(l.id),o.add(l))}),s.value=e,h.value=o}},ee=O(()=>u.value.length>0&&s.value.size===u.value.length),te=O(()=>s.value.size>0&&s.value.size<u.value.length),oe=e=>{const o=[];return e&&o.push(e.toUpperCase().replaceAll("-"," ")),o};G(()=>p.provider?.id,()=>b(),{immediate:!0});const se=_e(()=>{b()},300);return G(()=>y.value,()=>se()),(e,o)=>{const l=ke,v=xe,U=ge,ae=we,F=Me,le=be,P=Ae,ne=Se,ie=ze,re=Ce,ce=ye;return m(),f("div",Ve,[r("div",Ee,[d(l,{modelValue:t(y),"onUpdate:modelValue":o[0]||(o[0]=i=>he(y)?y.value=i:null),variant:"soft",placeholder:t(a)("ai-provider.backend.model.searchPlaceholder"),ui:{root:"w-full",base:"bg-accent"}},null,8,["modelValue","placeholder"])]),r("div",Fe,[r("div",Pe,[d(v,{"model-value":t(ee),indeterminate:t(te),"onUpdate:modelValue":Z},null,8,["model-value","indeterminate"]),r("h3",Te,[A(c(t(a)("ai-provider.backend.model.allModels"))+" "+c(t(u).length)+" "+c(t(a)("ai-provider.backend.model.unit"))+" ",1),t(s).size>0?(m(),f("span",Le," ("+c(t(a)("ai-provider.backend.model.selected"))+" "+c(t(s).size)+" "+c(t(a)("ai-provider.backend.model.unit"))+") ",1)):M("",!0)])]),r("div",Oe,[t(x)(["ai-models:delete"])||t(x)(["ai-models:update"])?(m(),D(ae,{key:0,items:X(),size:"sm",content:{align:"start",side:"bottom",sideOffset:8}},{default:g(()=>[d(U,{color:"neutral",variant:"outline",icon:"i-lucide-list-checks",size:"sm",label:t(a)("ai-provider.backend.model.batchOperation",{count:t(s).size})},null,8,["label"])]),_:1},8,["items"])):M("",!0),d(F,{codes:["ai-models:create"]},{default:g(()=>[d(U,{color:"primary",variant:"soft",icon:"i-lucide-plus",size:"sm",onClick:o[1]||(o[1]=()=>Q())},{default:g(()=>[A(c(t(a)("ai-provider.backend.model.addModel")),1)]),_:1})]),_:1})])]),t(V)&&t(y).trim()===""&&t(u).length===0?(m(),f("div",Ge,[(m(),f(B,null,$(10,i=>r("div",{key:i,class:"bg-muted flex items-center gap-4 rounded-lg p-8"})),64))])):M("",!0),t(u).length>0?(m(!0),f(B,{key:1},$(t(u),i=>(m(),f("div",{key:i.id,class:I(["group hover:bg-muted flex items-center gap-3 rounded-lg p-2 transition-colors",{"bg-primary/5":t(s).has(i.id)}])},[r("div",{class:I(["flex-none opacity-0 group-hover:opacity-100",{"opacity-100":t(s).has(i.id)}])},[d(v,{"model-value":t(s).has(i.id),"onUpdate:modelValue":k=>Y(i)},null,8,["model-value","onUpdate:modelValue"])],2),r("div",je,[d(le,{src:p.provider?.iconUrl,alt:p.provider?.name,ui:{root:"rounded bg-transparent size-8",fallback:"text-inverted"},class:I([p.provider?.iconUrl?"":"bg-primary"])},null,8,["src","alt","class"])]),d(ie,{mode:"hover",content:{align:"center",side:"left",sideOffset:10}},{content:g(()=>[d(ne,{model:i,provider:p.provider,"show-billing-rule":!0},null,8,["model","provider"])]),default:g(()=>[r("div",Ne,[r("div",qe,[r("h4",He,c(i.name),1),r("div",Ke,[(m(!0),f(B,null,$(oe(i.modelType),k=>(m(),D(P,{variant:"soft",color:"neutral",key:k,size:"xs"},{default:g(()=>[A(c(k),1)]),_:2},1024))),128))])]),i.billingRule.power>0?(m(),f("div",Qe,[r("span",null,c(i.billingRule?.power||0)+" "+c(t(a)("ai-provider.backend.model.points")),1),o[2]||(o[2]=r("span",null,"•",-1)),r("span",null,c(i.billingRule?.tokens||0)+" "+c(t(a)("ai-provider.backend.model.tokens")),1)])):(m(),D(P,{key:1,variant:"soft",color:"primary",size:"sm"},{default:g(()=>[...o[3]||(o[3]=[A(" Free ",-1)])]),_:1}))])]),_:2},1024),r("div",Je,[d(F,{codes:["ai-models:update"]},{default:g(()=>[d(U,{color:"primary",variant:"ghost",icon:"i-lucide-edit",size:"sm",onClick:k=>K(i)},null,8,["onClick"]),d(re,{size:"sm","model-value":i.isActive,"onUpdate:modelValue":k=>t(H)(i.id,k)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)])],2))),128)):!t(V)&&t(u).length===0?(m(),f("div",We,[d(ce,{name:"i-lucide-brain",class:"mx-auto mb-4 h-12 w-12 text-gray-400"}),r("h3",Xe,c(t(a)("ai-provider.backend.model.noModels")),1),r("p",Ye,c(t(a)("ai-provider.backend.model.noModelsDescription")),1)])):M("",!0)])}}}),_t=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"}));export{ut as a,pt as b,mt as c,vt as d,ft as e,_t as m};
