const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D3_031Uv.js","./CpacWlXu.js","./BwTGIg9g.js","./BWWuJQeZ.js","./DN9ov8OT.js","./9bDOsXij.js","./B22A-h4k.js","./pUN2d83w.js","./Cpt2kRVT.js","./8-c-A7PB.js","./nBDBqKnC.js","./BgHJjJs-.js"])))=>i.map(i=>d[i]);
import{d as j,aY as O,ap as D,aq as W,b as Y,aM as G,aK as K,g as p,j as P,o as m,k as c,l as n,c as d,t as w,q as u,p as e,bU as Z,z as h,v as g,y as H,F as J,B as Q,x,R as X,_ as ee,U as te,bV as se}from"#entry";import oe from"./--UdezPG.js";import{_ as ne}from"./BYwSSEjb.js";import{_ as re}from"./DAQypLay.js";import{_ as ae}from"./BO1GPLSL.js";import{_ as ie}from"./DNgvVYsj.js";import{L as le}from"./BaLXnvWO.js";import{c as me,a as V}from"./BUyfW8JT.js";import"./BgHJjJs-.js";import"./CLTNKp0S.js";import"./8-c-A7PB.js";import"./kRIii9yh.js";import"./TH-3OOuG.js";import"./Cfcu-t3n.js";import"./C6Y-ieo6.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./B22A-h4k.js";import"./Bub1HYiY.js";import"./Bu7cOM_l.js";import"./ChyO6__3.js";import"./XNFJUl58.js";/* empty css        */import"./DlAUqK2U.js";import"./BJePYFQ7.js";import"./PB-3MFNY.js";import"./Cv1u6XyE.js";import"./CKTa8Hyi.js";import"./DN9ov8OT.js";import"./nBDBqKnC.js";import"./7mZ7jJaJ.js";import"./BzLCLO6P.js";import"./BSZxZzsH.js";import"./DaWZu8wl.js";const ce={class:"flex"},ue={key:0,class:"mt-2"},pe={class:"inline-flex items-center","aria-label":"Password requirements"},de={class:"space-y-1 p-2","aria-label":"Password requirements"},ge={class:"text-xs font-light"},_e={class:"sr-only"},fe={key:0,class:"mt-8 mb-4 text-left"},tt=j({__name:"login",emits:["switchComponent","success"],setup(we,{emit:U}){const q=X(()=>te(()=>import("./D3_031Uv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),v=U,l=O(),_=D(),C=W(),{t:s}=Y(),L=me({username:V().required(s("login.validation.accountRequired")).min(3,s("login.validation.accountMinLength")),password:V().required(s("login.validation.passwordRequired")).min(6,s("login.validation.passwordMinLength")).max(25,s("login.validation.passwordMaxLength"))}),a=G({username:"",password:"",terminal:"1"}),{lockFn:z,isLock:F}=K(async()=>{if(!_.isAgreed&&l.loginWay.loginAgreement&&l.loginSettings?.showPolicyAgreement){C.warning(s("login.messages.agreementRequired"),{title:s("login.messages.agreementTitle"),duration:3e3});return}try{const t=await se(a);v("success",t)}catch(t){console.log(s("login.messages.loginFailed"),t)}});function T(t){return[{regex:/.{8,}/,text:s("login.requirements.minLength8")},{regex:/\d/,text:s("login.requirements.number")},{regex:/[a-z]/,text:s("login.requirements.lowercase")},{regex:/[A-Z]/,text:s("login.requirements.uppercase")}].map(f=>({met:f.regex.test(t),text:f.text}))}const y=p(()=>T(a.password)),i=p(()=>y.value.filter(t=>t.met).length),b=p(()=>i.value===0?"neutral":i.value<=1?"error":i.value<=2||i.value===3?"warning":"success"),S=p(()=>i.value===0?"":i.value<=1?s("login.strength.weak"):i.value<=3?s("login.strength.medium"):s("login.strength.strong")),B=p(()=>{const t=b.value;return t==="error"?"text-error":t==="warning"?"text-warning":t==="success"?"text-success":"text-muted"});return(t,r)=>{const f=oe,k=ne,M=re,N=Z,$=H,R=ae,A=ee,I=ie;return m(),P(I,{schema:e(L),state:e(a),onSubmit:e(z)},{default:c(()=>[n(k,{label:t.$t("login.account"),name:"username",required:""},{default:c(()=>[n(f,{modelValue:e(a).username,"onUpdate:modelValue":r[0]||(r[0]=o=>e(a).username=o),class:"w-full",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:t.$t("login.usernamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(k,{label:t.$t("login.password"),name:"password",class:"mt-2",required:""},{default:c(()=>[u("div",ce,[n(M,{modelValue:e(a).password,"onUpdate:modelValue":r[1]||(r[1]=o=>e(a).password=o),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:t.$t("login.passwordPlaceholder")},null,8,["modelValue","placeholder"])]),e(a).password?(m(),d("div",ue,[n(N,{color:e(b),"model-value":e(i),max:4,size:"sm"},null,8,["color","model-value"]),e(S)?(m(),d("div",{key:0,class:h(["mt-1 flex items-center gap-1 text-xs font-medium",e(B)])},[u("span",null,g(e(S)),1),n(R,{mode:"hover","open-delay":0},{content:c(()=>[u("ul",de,[(m(!0),d(J,null,Q(e(y),(o,E)=>(m(),d("li",{key:E,class:h(["flex items-center gap-0.5",o.met?"text-success":"text-muted"])},[n($,{name:o.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4 shrink-0"},null,8,["name"]),u("span",ge,[x(g(o.text)+" ",1),u("span",_e,g(o.met?e(s)("login.strength.met"):e(s)("login.strength.notMet")),1)])],2))),128))])]),default:c(()=>[u("span",pe,[n($,{name:"i-lucide-help-circle",class:"size-3.5"})])]),_:1})],2)):w("",!0)])):w("",!0)]),_:1},8,["label"]),e(l).loginSettings?.showPolicyAgreement?(m(),d("div",fe,[n(e(q),{modelValue:e(_).isAgreed,"onUpdate:modelValue":r[2]||(r[2]=o=>e(_).isAgreed=o)},null,8,["modelValue"])])):w("",!0),u("div",{class:h(["flex flex-1 gap-4 pb-8",{"mt-8":!e(l).loginSettings?.showPolicyAgreement}])},[e(l).loginSettings?.allowedRegisterMethods.includes(e(le).ACCOUNT)?(m(),P(A,{key:0,variant:"outline",color:"primary",size:"lg",ui:{base:"flex-1 justify-center p-3"},onClick:r[3]||(r[3]=o=>v("switchComponent","account-register"))},{default:c(()=>[x(g(t.$t("login.register")),1)]),_:1})):w("",!0),n(A,{color:"primary",type:"submit",size:"lg",ui:{base:"flex-1 justify-center p-3"},loading:e(F),disabled:!e(_).isAgreed&&!!e(l).loginWay.loginAgreement&&e(l).loginSettings?.showPolicyAgreement},{default:c(()=>[x(g(t.$t("login.loginNow")),1)]),_:1},8,["loading","disabled"])],2)]),_:1},8,["schema","state","onSubmit"])}}});export{tt as default};
