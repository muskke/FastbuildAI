import{d as W,au as z,b as B,g as r,w as x,G as U,ah as A,c as h,o as g,q as e,t as E,l as d,v as n,p as c,y as L,F as N,B as R,z as F,_ as V}from"#entry";import{_ as q}from"./Bu7cOM_l.js";import{k as G}from"./DpSZ1r7x.js";import{u as K}from"./FihYtau-.js";import{u as H}from"./BSZxZzsH.js";import"./BzLCLO6P.js";const J={class:"mx-auto inline-block w-3xl pt-10"},O={class:"mb-8"},Q={class:"text-foreground text-xl font-semibold"},X={class:"text-muted-foreground"},Y={key:0,class:"mb-8"},Z={class:"flex items-center gap-3"},ee={class:"bg-primary-50 flex size-12 items-center justify-center rounded-lg"},te={class:"flex-1"},se={class:"text-foreground font-medium"},ae={class:"text-muted-foreground"},ne={class:"mb-8"},oe={class:"text-foreground mb-4 text-lg font-medium"},ie={class:"space-y-2"},ce={class:"flex items-center gap-1"},re={class:"flex flex-col"},de={class:"text-foreground text-sm"},le={class:"flex items-center gap-3"},me={class:"flex items-center gap-1"},ue={class:"text-primary text-xs"},pe={class:"mt-4 space-y-4"},he={class:"flex justify-between py-2"},ge={class:"text-muted-foreground"},fe={class:"text-foreground text-sm font-medium"},_e={class:"flex justify-between py-2"},xe={class:"text-muted-foreground"},be={class:"text-foreground text-sm font-medium"},ve={class:"flex justify-between py-2"},ke={class:"text-muted-foreground"},ye={class:"text-foreground text-sm font-medium"},Te={class:"flex justify-between py-2"},we={class:"text-muted-foreground"},$e={class:"flex items-center gap-2"},De={class:"text-foreground text-sm font-medium"},Me={class:"flex justify-between py-2"},Ce={class:"text-muted-foreground"},Ie={class:"flex items-center gap-2"},je={class:"text-foreground text-sm font-medium"},Se={class:"flex justify-end"},Ee=W({__name:"index",props:{createData:{},datasetsId:{},isAddDocument:{type:Boolean},fileIds:{}},setup(m){const i=m,b=z(),{t:s}=B(),u=r(()=>i.isAddDocument&&!!i.datasetsId),v=r(()=>u.value?s("ai-datasets.backend.create.stepThree.dataTitle"):s("ai-datasets.backend.create.stepThree.createTitle")),k=r(()=>u.value?s("ai-datasets.backend.create.stepThree.dataDesc"):s("ai-datasets.backend.create.stepThree.createDesc")),y=r(()=>p.needPolling?s("ai-datasets.backend.create.stepThree.documentEmbedding"):s("ai-datasets.backend.create.stepThree.documentEmbeddingSuccess")),T=r(()=>({datasetId:i.datasetsId,page:1,pageSize:999,...u.value&&i.fileIds&&i.fileIds.length>0&&{fileIds:i.fileIds.join(",")}})),{paging:p,getLists:f}=K({fetchFun:G,params:T.value}),{start:w,clear:_}=H(async t=>{await f(),p.needPolling||t()},{interval:500}),$=t=>({processing:"text-warning",completed:"text-success",failed:"text-error",pending:"text-muted-foreground"})[t]||"text-muted-foreground",D=t=>({processing:"i-lucide-loader-2 animate-spin",completed:"i-heroicons-check-circle",failed:"i-heroicons-x-circle",pending:"i-lucide-clock"})[t]||"i-lucide-help-circle",M=r(()=>{const{documentMode:t}=i.createData.indexingConfig;return{normal:s("ai-datasets.backend.create.segment.general"),hierarchical:s("ai-datasets.backend.create.segment.hierarchical")}[t]||s("ai-datasets.backend.create.segment.general")}),C=r(()=>{const{preprocessingRules:t}=i.createData.indexingConfig;if(!t)return s("ai-datasets.backend.create.stepThree.no");const a=[];return t.replaceConsecutiveWhitespace&&a.push(s("ai-datasets.backend.create.segment.replaceConsecutiveWhitespace")),t.removeUrlsAndEmails&&a.push(s("ai-datasets.backend.create.segment.removeUrlsAndEmails")),a.length>0?a.join("、"):s("ai-datasets.backend.create.stepThree.no")}),I=r(()=>{const{retrievalMode:t}=i.createData.retrievalConfig;return{vector:s("ai-datasets.backend.retrieval.vector"),fullText:s("ai-datasets.backend.retrieval.fullText"),hybrid:s("ai-datasets.backend.retrieval.hybrid")}[t]||s("ai-datasets.backend.retrieval.vector")}),j=r(()=>{const{retrievalConfig:t}=i.createData,{weightConfig:a}=t;if(!a)return s("ai-datasets.backend.create.stepThree.default");const o=[];return t.topK&&o.push(`${s("ai-datasets.backend.create.stepThree.returnCount")}: ${t.topK}`),t.scoreThreshold&&o.push(`${s("ai-datasets.backend.retrieval.scoreThreshold")}: ${t.scoreThreshold}`),t.retrievalMode==="hybrid"&&(a.semanticWeight&&o.push(`${s("ai-datasets.backend.retrieval.semanticWeight")}: ${a.semanticWeight}`),a.keywordWeight&&o.push(`${s("ai-datasets.backend.retrieval.keywordWeight")}: ${a.keywordWeight}`)),o.length>0?o.join("、"):s("ai-datasets.backend.create.stepThree.default")});return x(()=>i.datasetsId,async()=>{await U(),await f()},{immediate:!0}),x(()=>p.needPolling,t=>{t?w():_()},{immediate:!0}),A(()=>_()),(t,a)=>{const o=L,S=q,P=V;return g(),h("div",J,[e("div",O,[e("h1",Q,n(c(v)),1),e("p",X,n(c(k)),1)]),c(u)?E("",!0):(g(),h("div",Y,[e("div",Z,[e("div",ee,[d(o,{name:"i-heroicons-book-open",class:"text-primary h-6 w-6"})]),e("div",te,[e("h3",se,n(m.createData.name),1),e("p",ae,n(m.createData.description),1)])])])),e("div",ne,[e("h2",oe,n(c(y)),1),e("div",ie,[(g(!0),h(N,null,R(c(p).items,l=>(g(),h("div",{class:"bg-primary-50 flex items-center justify-between rounded-lg p-2",key:l.id},[e("div",ce,[d(o,{name:"i-heroicons-document-text",class:"text-primary size-5"}),e("div",re,[e("span",de,n(l.fileName),1)])]),e("div",le,[e("div",me,[d(o,{name:D(l.status),class:F(`h-4 w-4 ${$(l.status)}`)},null,8,["name","class"]),e("span",ue,n(l.progress||0)+"%",1)])])]))),128))])]),d(S),e("div",pe,[e("div",he,[e("span",ge,n(t.$t("ai-datasets.backend.create.stepThree.segmentMode")),1),e("span",fe,n(c(M)),1)]),e("div",_e,[e("span",xe,n(t.$t("ai-datasets.backend.create.segment.maxSegmentLength")),1),e("span",be,n(m.createData.indexingConfig.segmentation?.maxSegmentLength||"默认"),1)]),e("div",ve,[e("span",ke,n(t.$t("ai-datasets.backend.create.segment.preprocessingRules")),1),e("span",ye,n(c(C)),1)]),e("div",Te,[e("span",we,n(t.$t("ai-datasets.backend.common.retrievalMode")),1),e("div",$e,[d(o,{name:"i-heroicons-sparkles",class:"h-4 w-4 text-purple-500"}),e("span",De,n(c(I)),1)])]),e("div",Me,[e("span",Ce,n(t.$t("ai-datasets.backend.settings.retrievalMethod")),1),e("div",Ie,[d(o,{name:"i-heroicons-adjustments-horizontal",class:"text-primary h-4 w-4"}),e("span",je,n(c(j)),1)])]),e("div",Se,[d(P,{"trailing-icon":"i-lucide-arrow-right",label:t.$t("ai-datasets.backend.create.goToDetail"),size:"lg",onClick:a[0]||(a[0]=l=>c(b).replace(`/console/datasets/${m.datasetsId}/documents`))},null,8,["label"])])])])}}});export{Ee as default};
