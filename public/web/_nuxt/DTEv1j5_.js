import{_ as P}from"./BNWstlnh.js";import{d as M,b as S,f as B,g as F,aJ as Q,i as A,c as s,o as n,p as l,F as _,B as x,l as g,q as a,y as I,v as p,z as $,t as q}from"#entry";import{h as z}from"./zsIs7mne.js";import{L as v}from"./CEd6FkrV.js";import"./BruVSCWF.js";const E={class:"micropage-provider flex h-full flex-col"},G={key:0,class:"flex flex-none flex-wrap gap-3 p-6"},N={key:1,class:"flex flex-1 items-center justify-center"},O={class:"mx-auto max-w-sm text-center"},V={class:"text-foreground mb-2 text-lg font-semibold"},j={class:"text-muted-foreground text-sm"},R={key:2,class:"flex-1 overflow-y-auto p-6"},U={class:"flex flex-wrap gap-3"},D=["onClick"],J={class:"min-w-0 flex-1"},K={class:"text-foreground mb-1 flex items-center truncate text-base font-semibold"},T={key:0,class:"absolute top-0 right-0 flex-none"},ee=M({__name:"micropage-provider",props:{searchQuery:{default:""},selected:{default:null}},emits:["select"],setup(d,{emit:k}){const{t:c}=S(),i=d,w=k,m=B([]),f=F(()=>{if(!i.searchQuery)return m.value;const e=i.searchQuery.toLowerCase();return m.value.filter(o=>o.name?.toLowerCase().includes(e)||o.path?.toLowerCase().includes(e))}),{lockFn:b,isLock:C}=Q(async()=>{try{const o=(await z()).map(r=>({type:v.MICROPAGE,name:r.name,path:`/micropage/${r.id}`,query:{}}));o.sort((r,u)=>{const t=r.name||"",y=u.name||"";return t.localeCompare(y)}),m.value=o}catch(e){console.error(c("console-common.loadingFailed"),e),m.value=[]}}),L=e=>{w("select",e)},h=e=>i.selected?.path===e.path&&i.selected?.type===v.MICROPAGE;return A(()=>b()),(e,o)=>{const r=P,u=I;return n(),s("div",E,[l(C)?(n(),s("div",G,[(n(),s(_,null,x(6,t=>g(r,{class:"h-18 w-44 rounded-xl",key:t})),64))])):f.value.length===0?(n(),s("div",N,[a("div",O,[g(u,{name:"i-heroicons-document-text",class:"text-muted-foreground/50 mx-auto mb-4 h-16 w-16"}),a("h3",V,p(d.searchQuery?l(c)("console-common.linkPicker.emptyState.noMatchingPages"):l(c)("console-common.linkPicker.emptyState.noMicropages")),1),a("p",j,p(d.searchQuery?l(c)("console-common.linkPicker.emptyState.tryOtherKeywords"):l(c)("console-common.linkPicker.emptyState.contactAdmin")),1)])])):(n(),s("div",R,[a("div",U,[(n(!0),s(_,null,x(f.value,t=>(n(),s("div",{key:t.path,class:$(["group relative flex cursor-pointer items-center gap-4 rounded-xl px-4 py-3 transition-all duration-200",h(t)?"bg-primary/5 shadow-sm":"bg-accent hover:bg-primary/5"]),onClick:y=>L(t)},[a("div",J,[a("div",K,p(t.name),1)]),h(t)?(n(),s("div",T,[...o[0]||(o[0]=[a("div",{class:"bg-primary flex size-3 items-center justify-center rounded-full"},null,-1)])])):q("",!0)],10,D))),128))])]))])}}});export{ee as default};
