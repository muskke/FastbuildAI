import C from"./--UdezPG.js";import{_ as N}from"./BYwSSEjb.js";import{d as U,b as q,aq as I,f as g,g as k,w as K,j as M,o as j,k as s,q as c,l as u,p as e,bI as F,n as L,A as h,v as d,_ as R,x as w,r as S}from"#entry";import{_ as T}from"./BYK_1AlN.js";import"./BgHJjJs-.js";import"./BJ_E6Ph7.js";import"./DSMB-qMT.js";import"./b-_TUx9i.js";import"./B22A-h4k.js";import"./Cfcu-t3n.js";import"./B128ot1i.js";import"./CoMGTw2w.js";import"./CP4Zo7YT.js";import"./XpsTG8vq.js";const z={class:"py-2"},A={class:"text-muted-foreground mt-2 text-xs"},D={class:"flex justify-end gap-2"},ne=U({__name:"nickname-modal",props:{currentValue:{},loading:{type:Boolean}},emits:["success"],setup(f,{emit:V}){const m=f,x=V,{t}=q(),y=I(),r=g(!1),n=g(m.currentValue||""),i=k(()=>{const o=n.value.trim();return o?o.length>20?t("user.frontend.profile.nicknameTooLong"):"":t("user.frontend.profile.nicknameRequired")}),p=k(()=>{const o=m.currentValue||"";return n.value.trim()!==o.trim()});K(()=>r.value,o=>{o&&(n.value=m.currentValue||"")});async function _(){if(i.value){y.warning(i.value);return}if(!p.value)return;const o=n.value.trim();x("success",o),r.value=!1}return(o,a)=>{const b=C,B=N,v=R,$=T;return j(),M($,{open:e(r),"onUpdate:open":a[2]||(a[2]=l=>h(r)?r.value=l:null),title:e(t)("user.frontend.profile.editNickname"),width:"sm","show-footer":!0},{trigger:s(()=>[S(o.$slots,"default")]),footer:s(()=>[c("div",D,[u(v,{variant:"soft",onClick:a[1]||(a[1]=l=>r.value=!1)},{default:s(()=>[w(d(e(t)("console-common.cancel")),1)]),_:1}),u(v,{disabled:!e(p)||!!e(i),color:"primary",loading:f.loading,onClick:_},{default:s(()=>[w(d(e(t)("console-common.save")),1)]),_:1},8,["disabled","loading"])])]),default:s(()=>[c("div",z,[u(B,{label:e(t)("user.frontend.profile.nickname"),size:"lg",required:"",error:e(i)},{default:s(()=>[u(b,{modelValue:e(n),"onUpdate:modelValue":a[0]||(a[0]=l=>h(n)?n.value=l:null),placeholder:e(t)("user.frontend.profile.nicknamePlaceholder"),maxlength:"20",ui:{root:"w-full"},onKeydown:F(L(_,["prevent"]),["enter"])},null,8,["modelValue","placeholder","onKeydown"])]),_:1},8,["label","error"]),c("div",A,d(e(t)("user.frontend.profile.nicknameLength")),1)])]),_:3},8,["open","title"])}}});export{ne as default};
