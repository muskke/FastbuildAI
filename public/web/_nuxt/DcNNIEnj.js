import{d as E,b as S,ap as F,g as N,aJ as K,j as M,o as b,k as o,l as t,p as r,q as n,v as c,_ as I,x as h,c as v,br as T,y as j}from"#entry";import J from"./BruVSCWF.js";import{_ as D}from"./DS-TE4M7.js";import{_ as L}from"./5XG8SC4l.js";import{_ as O}from"./jQG0lB_l.js";import{_ as q}from"./D-6Co9ha.js";import{_ as z}from"./CXUt0j5Y.js";import{d as G}from"./qOW3iPfA.js";import"./BgHJjJs-.js";import"./CR1AS2Ry.js";import"./C3zg6GHm.js";import"./-Eb02sIQ.js";import"./Dk6FGhu1.js";import"./BPKB8n-W.js";import"./DuSMYVIA.js";import"./MN31c9CG.js";import"./CCcv9mzY.js";import"./BFAo_s2U.js";import"./Cb04SOqd.js";import"./VGKgjfSv.js";import"./ptVgWJmt.js";import"./CgMDXot0.js";import"./DVnbt8cp.js";import"./D6yWePie.js";import"./CuOaO1Pb.js";import"./DHFmmngs.js";import"./CQBV3TNh.js";import"./BFVs1AfH.js";import"./kRIii9yh.js";import"./Btvd554H.js";import"./C6Y-ieo6.js";import"./B-DdbQ-X.js";import"./V9POJiZu.js";import"./3UOIlTK8.js";import"./DduSJdeS.js";import"./CB78hAg2.js";import"./Cif_tCX1.js";import"./CvUJEDIF.js";import"./C7UmhjTd.js";import"./BJ10eFuk.js";import"./BREwXy1w.js";const H={class:"text-lg font-semibold"},P={class:"text-muted-foreground flex items-center gap-2 text-sm"},Q={key:0,class:"flex-none"},W={key:1,class:"flex-none"},X={class:"flex w-full items-center gap-2"},Y={class:"text-muted-foreground text-sm"},Z={class:"flex w-full justify-end gap-2 pt-3.5"},De=E({__name:"model-batch-edit",props:{models:{},provider:{}},emits:["close"],setup(m,{emit:V}){const _=m,p=V,{t:a}=S(),g=F(),k=[{accessorKey:"name",header:a("ai-provider.backend.model.batchEdit.name")},{accessorKey:"model",header:a("ai-provider.backend.model.batchEdit.model")},{accessorKey:"maxContext",header:a("ai-provider.backend.model.batchEdit.maxContext")},{accessorKey:"isActive",header:a("ai-provider.backend.model.batchEdit.isActive")},{accessorKey:"billingRule",header:a("ai-provider.backend.model.batchEdit.billingRule")}],f=N(()=>_.models.size===0?[]:JSON.parse(JSON.stringify([..._.models]))),{lockFn:y,isLock:U}=K(async()=>{try{const u=f.value.map(l=>({id:l.id,name:l.name,model:l.model,maxContext:l.maxContext,isActive:l.isActive,billingRule:l.billingRule}));await G(u),g.success(a("console-common.batchEditSuccess")),p("close",!0)}catch(u){console.error("批量编辑失败:",u),g.error(a("console-common.batchEditFailed"))}});return(u,l)=>{const $=T,R=j,d=J,s=D,C=L,B=O,x=I,w=q,A=z;return b(),M(A,{ui:{content:"max-w-4xl overflow-y-auto h-fit"},onClose:l[1]||(l[1]=e=>p("close",!1))},{title:o(()=>[n("div",null,[n("h3",H,c(r(a)("ai-provider.backend.model.batchEditTitle")),1),n("div",P,[m.provider?.iconUrl?(b(),v("div",Q,[t($,{src:m.provider.iconUrl,alt:m.provider.name,class:"h-4 w-4 rounded object-cover"},null,8,["src","alt"])])):(b(),v("div",W,[t(R,{name:"i-lucide-building-office",class:"h-4 w-4"})])),n("span",null,c(m.provider?.name),1)])])]),default:o(()=>[t(w,{state:r(f),onSubmit:r(y)},{default:o(()=>[t(B,{columns:k,data:r(f),sticky:"",class:"h-120",ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r [&:nth-child(4)]:min-w-22",td:"border-b border-default cursor-pointer [&:nth-child(4)]:min-w-22",tr:"[&:has(>td[colspan])]:hidden"}},{"name-cell":o(({row:e})=>[t(s,{name:`rows.${e.index}.name`},{default:o(()=>[t(d,{modelValue:e.original.name,"onUpdate:modelValue":i=>e.original.name=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"model-cell":o(({row:e})=>[t(s,{name:`rows.${e.index}.model`},{default:o(()=>[t(d,{modelValue:e.original.model,"onUpdate:modelValue":i=>e.original.model=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"maxContext-cell":o(({row:e})=>[t(s,{name:`rows.${e.index}.maxContext`},{default:o(()=>[t(d,{modelValue:e.original.maxContext,"onUpdate:modelValue":i=>e.original.maxContext=i,ui:{base:"w-18"},type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"isActive-cell":o(({row:e})=>[t(s,{name:`rows.${e.index}.isActive`},{default:o(()=>[t(C,{modelValue:e.original.isActive,"onUpdate:modelValue":i=>e.original.isActive=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"billingRule-cell":o(({row:e})=>[n("div",X,[t(s,{name:`rows.${e.index}.billingRule.power`,class:"flex-1"},{default:o(()=>[t(d,{modelValue:e.original.billingRule.power,"onUpdate:modelValue":i=>e.original.billingRule.power=i,modelModifiers:{number:!0},type:"number",placeholder:"",min:0,ui:{base:"pr-15 width120"},onBlur:i=>{e.original.billingRule.power<0&&(e.original.billingRule.power=0)}},{trailing:o(()=>[n("span",Y,c(r(a)("ai-provider.backend.model.form.power")),1)]),_:1},8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["name"]),l[3]||(l[3]=n("span",{class:"shrink-0"},"/",-1)),t(s,{name:`rows.${e.index}.billingRule.tokens`,class:"flex-1"},{default:o(()=>[t(d,{modelValue:e.original.billingRule.tokens,"onUpdate:modelValue":i=>e.original.billingRule.tokens=i,modelModifiers:{number:!0},type:"number",placeholder:"",min:1,class:"w-full",disabled:!0,ui:{base:"pr-15 width120"},onBlur:i=>{e.original.billingRule.tokens<1&&(e.original.billingRule.tokens=1)}},{trailing:o(()=>[...l[2]||(l[2]=[n("span",{class:"text-muted-foreground text-sm"}," Tokens ",-1)])]),_:1},8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["name"])])]),_:1},8,["data"]),n("div",Z,[t(x,{color:"neutral",variant:"soft",onClick:l[0]||(l[0]=e=>p("close",!1))},{default:o(()=>[h(c(r(a)("console-common.cancel")),1)]),_:1}),t(x,{color:"primary",type:"submit",loading:r(U)},{default:o(()=>[h(c(r(a)("console-common.save")),1)]),_:1},8,["loading"])])]),_:1},8,["state","onSubmit"])]),_:1})}}});export{De as default};
