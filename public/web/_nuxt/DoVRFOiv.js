import{d as F,aq as H,b as P,au as C,aJ as B,aM as j,g as q,aK as I,i as E,c as L,j as A,p as e,o as w,l as n,y as M,k as s,q as i,C as N,v as d,A as z,x as k,_ as G}from"#entry";import{_ as J}from"./ZZC6mEJB.js";import O from"./--UdezPG.js";import{_ as Q}from"./BYwSSEjb.js";import{_ as W}from"./CyGK14vg.js";import X from"./CfxLE1oh.js";import{_ as Y}from"./DNgvVYsj.js";import{P as Z,a as ee,b as ae}from"./CNkLaFoG.js";import{c as oe,a as p,e as te}from"./BUyfW8JT.js";import{u as ne}from"./UqhBTNL6.js";import"./BgHJjJs-.js";import"./DN9ov8OT.js";import"./nBDBqKnC.js";import"./8-c-A7PB.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./9bDOsXij.js";import"./B22A-h4k.js";import"./DaWZu8wl.js";const le={key:0,class:"flex justify-center py-12"},ie={class:"grid grid-cols-1 gap-8 p-1 lg:grid-cols-3"},se={class:"shadow-default h-fit rounded-lg lg:col-span-1"},re={class:"flex flex-col items-center space-y-4",style:{padding:"80px 24px 40px"}},me={class:"flex items-start gap-4"},pe={class:"mt-6 px-12 text-center text-xs"},de={class:"text-muted-foreground"},ce={class:"mt-6 flex w-full items-center justify-between"},ue={class:"text-secondary-foreground text-sm font-medium"},fe={class:"text-muted-foreground mt-2 text-xs"},ye={class:"mt-6 flex w-full items-center justify-between"},ge={class:"text-secondary-foreground text-sm font-medium"},_e={class:"text-muted-foreground mt-2 text-xs"},he={class:"shadow-default space-y-6 rounded-lg p-6 lg:col-span-2"},be={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Ve={class:"flex justify-end gap-4"},Le=F({__name:"form",setup(ve){const u=H(),{t:a}=P(),f=C(),U=B(),o=j({id:"",name:"",logo:"",isEnable:0,isDefault:0,payType:1,sort:0,payVersion:"",merchantType:"",mchId:"",apiKey:"",paySignKey:"",cert:"",payAuthDir:"",appId:""}),y=q(()=>{const m=o.payType;return Z[m]??"未知支付方式"}),_=q(()=>U.query.id),{lockFn:K,isLock:g}=I(async()=>{if(!_.value){u.error(a("payment-config.form.getPayconfigDetailFailedHelp")),f.back();return}try{const m=await ee(_.value);ne(o,m)}catch{u.error(a("payment-config.form.getPayconfigDetailFailed")),f.back()}});E(()=>{K()});const{lockFn:T,isLock:h}=I(async()=>{try{const{payType:m,...t}=o;await ae(t),u.success(a("payment-config.form.updateSuccess")),f.back()}catch(m){u.error(a("payment-config.form.updateFailed")),console.log(m)}}),S=oe({name:p().required(a("payment-config.validation.nameRequired")),payVersion:p().required(a("payment-config.validation.payVersionRequired")),merchantType:p().required(a("payment-config.validation.merchantTypeRequired")),mchId:p().required(a("payment-config.validation.mchIdRequired")),apiKey:p().required(a("payment-config.validation.apiKeyRequired")),paySignKey:p().required(a("payment-config.validation.paySignKeyRequired")),cert:p().required(a("payment-config.validation.certRequired")),sort:te().required(a("payment-config.validation.sortRequired")),appId:p().required(a("payment-config.validation.appIdRequired"))});return(m,t)=>{const R=M,D=N,b=J,c=O,r=Q,V=W,v=X,x=G,$=Y;return e(g)?(w(),L("div",le,[n(R,{name:"i-lucide-loader-2",class:"text-primary-500 h-8 w-8 animate-spin"})])):(w(),A($,{key:1,state:e(o),schema:e(S),class:"space-y-8",onSubmit:e(T)},{default:s(()=>[i("div",ie,[i("div",se,[i("div",re,[i("div",me,[n(D,{src:e(o).logo,alt:"微信支付",class:"h-32 w-32",ui:{root:"rounded-lg"}},null,8,["src"])]),i("div",pe,[i("p",de,d(e(a)("payment-config.form.avatarFormats")),1)]),i("div",ce,[i("div",null,[i("h4",ue,d(e(a)("payment-config.form.enable")),1),i("p",fe,d(e(a)("payment-config.form.enableHelp")),1)]),n(b,{"model-value":!!e(o).isEnable,"unchecked-icon":"i-lucide-x","checked-icon":"i-lucide-check",onChange:t[0]||(t[0]=l=>{e(o).isEnable=e(o).isEnable?0:1})},null,8,["model-value"])]),i("div",ye,[i("div",null,[i("h4",ge,d(e(a)("payment-config.form.isDefault")),1),i("p",_e,d(e(a)("payment-config.form.isDefaultHelp")),1)]),n(b,{"model-value":!!e(o).isDefault,"unchecked-icon":"i-lucide-x","checked-icon":"i-lucide-check",onChange:t[1]||(t[1]=l=>{e(o).isDefault=e(o).isDefault?0:1})},null,8,["model-value"])])])]),i("div",he,[i("div",be,[n(r,{label:e(a)("payment-config.form.payway"),name:"payway"},{default:s(()=>[n(c,{modelValue:e(y),"onUpdate:modelValue":t[2]||(t[2]=l=>z(y)?y.value=l:null),placeholder:e(a)("payment-config.form.payway"),disabled:!0,variant:"subtle",class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(r,{label:e(a)("payment-config.form.name"),name:"name",required:""},{default:s(()=>[n(c,{modelValue:e(o).name,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).name=l),placeholder:e(a)("payment-config.form.nameInput"),class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(r,{label:e(a)("payment-config.form.payVersion"),description:e(a)("payment-config.form.payVersionHelp"),name:"payVersion",required:""},{default:s(()=>[n(V,{modelValue:e(o).payVersion,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).payVersion=l),items:["V3"]},null,8,["modelValue"])]),_:1},8,["label","description"]),n(r,{label:e(a)("payment-config.form.merchantType"),description:e(a)("payment-config.form.merchantTypeHelp"),name:"merchantType",required:""},{default:s(()=>[n(V,{modelValue:e(o).merchantType,"onUpdate:modelValue":t[5]||(t[5]=l=>e(o).merchantType=l),items:[{label:e(a)("payment-config.form.merchantTypeOptions.ordinary"),value:"ordinary"}]},null,8,["modelValue","items"])]),_:1},8,["label","description"]),n(r,{label:e(a)("payment-config.form.mchId"),name:"mchId",required:"",description:e(a)("payment-config.form.mchIdHelp")},{default:s(()=>[n(c,{modelValue:e(o).mchId,"onUpdate:modelValue":t[6]||(t[6]=l=>e(o).mchId=l),placeholder:e(a)("payment-config.form.mchIdInput"),class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),n(r,{label:e(a)("payment-config.form.apiKey"),name:"apiKey",required:"",description:e(a)("payment-config.form.apiKeyHelp")},{default:s(()=>[n(c,{modelValue:e(o).apiKey,"onUpdate:modelValue":t[7]||(t[7]=l=>e(o).apiKey=l),placeholder:e(a)("payment-config.form.apiKeyInput"),class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),n(r,{label:e(a)("payment-config.form.cert"),name:"cert",required:"",description:e(a)("payment-config.form.certHelp")},{default:s(()=>[n(v,{modelValue:e(o).cert,"onUpdate:modelValue":t[8]||(t[8]=l=>e(o).cert=l),placeholder:e(a)("payment-config.form.certInput"),class:"w-full",autoresize:"",maxrows:3},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),n(r,{label:e(a)("payment-config.form.paySignKey"),name:"paySignKey",required:"",description:e(a)("payment-config.form.paySignKeyHelp")},{default:s(()=>[n(v,{modelValue:e(o).paySignKey,"onUpdate:modelValue":t[9]||(t[9]=l=>e(o).paySignKey=l),placeholder:e(a)("payment-config.form.paySignKeyInput"),class:"w-full",autoresize:"",maxrows:3},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),n(r,{label:e(a)("payment-config.form.appId"),name:"appId",required:"",description:e(a)("payment-config.form.appIdHelp")},{default:s(()=>[n(c,{modelValue:e(o).appId,"onUpdate:modelValue":t[10]||(t[10]=l=>e(o).appId=l),placeholder:e(a)("payment-config.form.appIdInput"),class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),n(r,{label:e(a)("payment-config.form.sort"),name:"sort",required:"",description:e(a)("payment-config.form.sortHelp")},{default:s(()=>[n(c,{modelValue:e(o).sort,"onUpdate:modelValue":t[11]||(t[11]=l=>e(o).sort=l),class:"w-full"},null,8,["modelValue"])]),_:1},8,["label","description"])]),i("div",Ve,[n(x,{color:"neutral",variant:"outline",onClick:t[12]||(t[12]=l=>e(f).back()),class:"px-8",loading:e(g)||e(h)},{default:s(()=>[k(d(e(a)("console-common.cancel")),1)]),_:1},8,["loading"]),n(x,{color:"primary",loading:e(g)||e(h),type:"submit",class:"px-8"},{default:s(()=>[k(d(e(a)("console-common.update")),1)]),_:1},8,["loading"])])])])]),_:1},8,["state","schema","onSubmit"]))}}});export{Le as default};
