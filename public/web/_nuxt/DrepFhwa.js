import{_ as T}from"./DiYXikHi.js";import{aC as V,d as S,b as N,aL as K,g as P,h as _,_ as D,i as I,c as m,o as s,q as r,l as i,p as a,k as p,v as u,j as b,x as h,C as $}from"#entry";import z from"./BruVSCWF.js";import{_ as R}from"./CRoF6I1E.js";import{_ as L}from"./jQG0lB_l.js";import{_ as O}from"./CTfStZur.js";import{u as j}from"./JqIoTTmi.js";import"./DHFmmngs.js";import"./CR1AS2Ry.js";import"./Btvd554H.js";import"./BPKB8n-W.js";import"./B-DdbQ-X.js";import"./V9POJiZu.js";import"./MN31c9CG.js";import"./BstbYvQo.js";import"./DuSMYVIA.js";import"./DlAUqK2U.js";const E=f=>V("/finance/account-log",f),F={class:"flex h-full flex-col space-y-4"},G={class:"flex items-center gap-4 pb-2"},q={class:"flex-1 overflow-hidden"},M={class:"h-full"},Y={key:0,class:"text-green-500"},H={key:1,class:"text-red-500"},J={class:"flex justify-end py-4"},pe=S({__name:"account-balance",setup(f){const y=T,v=D,{t:o}=N(),B=[{label:"financial.accountBalance.allTypes",value:null},{label:"financial.accountBalance.userRecharge",value:"100"},{label:"financial.accountBalance.userRechargeGift",value:"101"},{label:"financial.accountBalance.userRechargeRefund",value:"102"},{label:"financial.accountBalance.systemIncreasePower",value:"200"},{label:"financial.accountBalance.systemDecreasePower",value:"201"},{label:"financial.accountBalance.basicConversation",value:"300"},{label:"financial.accountBalance.agentConversation",value:"400"},{label:"financial.accountBalance.sharedAgentConversation",value:"401"},{label:"financial.accountBalance.pluginConsumption",value:"500"}],l=K({keyword:"",accountType:null}),{paging:c,getLists:d,resetPage:k}=j({fetchFun:E,params:l}),x=P(()=>[{accessorKey:"accountNo",header:o("financial.accountBalance.table.userNo")},{accessorKey:"nickname",header:o("financial.accountBalance.table.nickname")},{accessorKey:"changeAmount",header:o("financial.accountBalance.table.changeAmount")},{accessorKey:"leftAmount",header:o("financial.accountBalance.table.leftAmount")},{accessorKey:"accountTypeDesc",header:o("financial.accountBalance.table.accountTypeDesc")},{accessorKey:"consumeSourceDesc",header:o("financial.accountBalance.table.consumeSourceDesc")},{accessorKey:"associationUser",header:o("financial.accountBalance.table.associationUser")},{accessorKey:"createdAt",header:({column:t})=>{const n=t.getIsSorted();return _(v,{color:"neutral",variant:"ghost",label:o("financial.accountBalance.table.createdAt"),icon:n?n==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc")})},cell:({row:t})=>{const n=t.getValue("createdAt");return _(y,{datetime:n,mode:"datetime"})}}]);return I(()=>{d()}),(t,n)=>{const A=z,w=R,g=$,C=L,U=O;return s(),m("div",F,[r("div",G,[i(A,{class:"w-56",modelValue:a(l).keyword,"onUpdate:modelValue":[n[0]||(n[0]=e=>a(l).keyword=e),a(k)],placeholder:a(o)("financial.accountBalance.searchPlaceholder")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),i(w,{class:"w-56",modelValue:a(l).accountType,"onUpdate:modelValue":[n[1]||(n[1]=e=>a(l).accountType=e),a(d)],items:B.map(e=>({label:a(o)(e.label),value:e.value})),placeholder:"变动类型"},null,8,["modelValue","items","onUpdate:modelValue"])]),r("div",q,[r("div",M,[i(C,{sticky:"",columns:a(x),data:a(c).items,loading:a(c).loading,ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r",td:"border-b border-default"},class:"h-[calc(100vh-13rem)] shrink-0"},{"userNo-cell":p(({row:e})=>[h(u(e.original.accountNo),1)]),"nickname-cell":p(({row:e})=>[e.original.user?.avatar?(s(),b(g,{key:0,src:e.original.user.avatar},null,8,["src"])):(s(),b(g,{key:1,icon:"i-heroicons-user",name:e.original.user?.username},null,8,["name"])),h(" "+u(e.original.user?.username),1)]),"changeAmount-cell":p(({row:e})=>[e.original.action===1?(s(),m("span",Y," +"+u(e.original.changeAmount),1)):(s(),m("span",H," -"+u(e.original.changeAmount),1))]),_:1},8,["columns","data","loading"])])]),r("div",J,[i(U,{page:a(c).page,"onUpdate:page":n[2]||(n[2]=e=>a(c).page=e),size:a(c).pageSize,"onUpdate:size":n[3]||(n[3]=e=>a(c).pageSize=e),total:a(c).total,onChange:a(d)},null,8,["page","size","total","onChange"])])])}}});export{pe as default};
