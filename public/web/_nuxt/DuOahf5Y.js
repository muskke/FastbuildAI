const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D3_031Uv.js","./YsC0FLg2.js","./BwTGIg9g.js","./BWWuJQeZ.js","./DN9ov8OT.js","./9bDOsXij.js","./B22A-h4k.js","./pUN2d83w.js","./Cpt2kRVT.js","./8-c-A7PB.js","./nBDBqKnC.js","./BgHJjJs-.js"])))=>i.map(i=>d[i]);
import{d as j,aY as E,aq as W,ap as D,b as O,a1 as K,aK as Y,g as p,j as Z,o as u,k as i,l as s,c as g,t as x,q as m,bU as G,z as b,v as d,y as H,F as J,B as Q,x as w,p as r,R as X,_ as ee,U as te,bW as se}from"#entry";import oe from"./--UdezPG.js";import{_ as re}from"./BYwSSEjb.js";import{_ as ae}from"./DAQypLay.js";import{_ as ne}from"./BO1GPLSL.js";import{_ as ie}from"./DNgvVYsj.js";import{c as le,a as y,f as me}from"./BUyfW8JT.js";import"./BgHJjJs-.js";import"./CLTNKp0S.js";import"./8-c-A7PB.js";import"./kRIii9yh.js";import"./TH-3OOuG.js";import"./Cfcu-t3n.js";import"./C6Y-ieo6.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./B22A-h4k.js";import"./Bub1HYiY.js";import"./DaWZu8wl.js";const ce={key:0,class:"mt-2"},ue={class:"inline-flex cursor-help items-center","aria-label":"Password requirements"},de={class:"space-y-1 p-2","aria-label":"Password requirements"},pe={class:"text-xs font-light"},ge={class:"sr-only"},fe={class:"flex items-center gap-1 text-xs"},_e={key:0,class:"mt-8 mb-4 text-left"},Ne=j({__name:"register",emits:["switchComponent","success"],setup(we,{emit:q}){const U=X(()=>te(()=>import("./D3_031Uv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)),P=q,c=E(),z=W(),f=D(),{t}=O(),C=le({username:y().required(t("login.validation.accountRequired")).min(3,t("login.validation.accountMinLength")).max(20,t("login.validation.accountMaxLength")),password:y().required(t("login.validation.passwordRequired")).min(6,t("login.validation.passwordMinLength")).max(25,t("login.validation.passwordMaxLength")).matches(/^(?=.*[a-z])(?=.*[0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])/,t("login.validation.passwordFormat")),confirmPassword:y().required(t("login.validation.confirmPasswordRequired")).oneOf([me("password")],t("login.validation.passwordMismatch"))}),n=K({username:"",password:"",confirmPassword:""}),{lockFn:L,isLock:F}=Y(async()=>{if(!f.isAgreed&&c.loginWay.loginAgreement&&c.loginSettings?.showPolicyAgreement){z.warning(t("login.messages.agreementRequired"),{title:t("login.messages.agreementTitle"),duration:3e3});return}try{const e=await se({terminal:"1",...n});P("success",{...e,...e.user})}catch(e){console.log(t("login.messages.registerFailed"),e)}});function R(e){return[{regex:/.{8,}/,text:t("login.requirements.minLength8")},{regex:/\d/,text:t("login.requirements.number")},{regex:/[a-z]/,text:t("login.requirements.lowercase")},{regex:/[A-Z]/,text:t("login.requirements.uppercase")}].map(_=>({met:_.regex.test(e),text:_.text}))}const $=p(()=>R(n.password)),l=p(()=>$.value.filter(e=>e.met).length),S=p(()=>l.value===0?"neutral":l.value<=1?"error":l.value<=2||l.value===3?"warning":"success"),k=p(()=>l.value===0?"":l.value<=1?t("login.strength.weak"):l.value<=3?t("login.strength.medium"):t("login.strength.strong")),B=p(()=>{const e=S.value;return e==="error"?"text-error":e==="warning"?"text-warning":e==="success"?"text-success":"text-muted"});return(e,a)=>{const _=oe,h=re,A=ae,M=G,v=H,T=ne,V=ee,I=ie;return u(),Z(I,{schema:r(C),state:n,onSubmit:r(L)},{default:i(()=>[s(h,{label:e.$t("login.account"),name:"username",required:""},{default:i(()=>[s(_,{modelValue:n.username,"onUpdate:modelValue":a[0]||(a[0]=o=>n.username=o),class:"w-full",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:e.$t("login.placeholders.enterAccount")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(h,{label:e.$t("login.password"),name:"password",class:"mt-2",required:""},{default:i(()=>[s(A,{modelValue:n.password,"onUpdate:modelValue":a[1]||(a[1]=o=>n.password=o),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:e.$t("login.placeholders.enterPassword")},null,8,["modelValue","placeholder"]),n.password?(u(),g("div",ce,[s(M,{color:S.value,"model-value":l.value,max:4,size:"sm"},null,8,["color","model-value"]),k.value?(u(),g("div",{key:0,class:b(["mt-1 flex items-center gap-1 text-xs font-medium",B.value])},[m("span",null,d(k.value),1),s(T,{mode:"hover"},{content:i(()=>[m("ul",de,[(u(!0),g(J,null,Q($.value,(o,N)=>(u(),g("li",{key:N,class:b(["flex items-center gap-0.5",o.met?"text-success":"text-muted"])},[s(v,{name:o.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4 shrink-0"},null,8,["name"]),m("span",pe,[w(d(o.text)+" ",1),m("span",ge,d(o.met?r(t)("login.strength.met"):r(t)("login.strength.notMet")),1)])],2))),128))])]),default:i(()=>[m("span",ue,[s(v,{name:"i-lucide-help-circle",class:"size-3.5"})])]),_:1})],2)):x("",!0)])):x("",!0)]),_:1},8,["label"]),s(h,{label:e.$t("login.confirmPassword"),name:"confirmPassword",class:"mt-2",required:""},{help:i(()=>[m("div",fe,[s(v,{name:"tabler:alert-circle",size:"14"}),w(" "+d(e.$t("login.passwordRule")),1)])]),default:i(()=>[s(A,{modelValue:n.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=o=>n.confirmPassword=o),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:e.$t("login.placeholders.enterPasswordAgain")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(c).loginSettings?.showPolicyAgreement?(u(),g("div",_e,[s(r(U),{modelValue:r(f).isAgreed,"onUpdate:modelValue":a[3]||(a[3]=o=>r(f).isAgreed=o)},null,8,["modelValue"])])):x("",!0),m("div",{class:b(["flex flex-1 gap-4 pb-8",{"mt-8":!r(c).loginSettings?.showPolicyAgreement}])},[s(V,{variant:"outline",color:"primary",size:"lg",ui:{base:"flex-1 justify-center p-3"},onClick:a[4]||(a[4]=o=>P("switchComponent","account-login"))},{default:i(()=>[w(d(e.$t("login.backToLogin")),1)]),_:1}),s(V,{color:"primary",type:"submit",size:"lg",loading:r(F),ui:{base:"flex-1 justify-center p-3"},disabled:!r(f).isAgreed&&!!r(c).loginWay.loginAgreement&&r(c).loginSettings?.showPolicyAgreement},{default:i(()=>[w(d(e.$t("login.registerNow")),1)]),_:1},8,["loading","disabled"])],2)]),_:1},8,["schema","state","onSubmit"])}}});export{Ne as default};
