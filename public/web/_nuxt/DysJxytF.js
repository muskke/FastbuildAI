import{_ as N}from"./CbuHra-u.js";import z from"./--UdezPG.js";import{_ as M}from"./BYwSSEjb.js";import{_ as W}from"./iqoKNu2e.js";import{d as A,b as D,aq as G,s as w,aM as I,aK as V,i as K,c as d,o as v,q,l as s,p as n,A as j,k as m,t as H,F as f,_ as J,x as k,v as U}from"#entry";import{_ as O}from"./CJG2iIES.js";import{_ as P}from"./DNgvVYsj.js";import{a as Q,b as X}from"./Z7RT5dpM.js";import{c as Y,a as y}from"./BUyfW8JT.js";import"./8-c-A7PB.js";import"./B22A-h4k.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./9bDOsXij.js";import"./CBooyAK7.js";import"./BgHJjJs-.js";import"./B1Lg5z9T.js";import"./CLTNKp0S.js";import"./kRIii9yh.js";import"./TH-3OOuG.js";import"./Cfcu-t3n.js";import"./C6Y-ieo6.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Bub1HYiY.js";import"./lw_U4-W2.js";import"./XpsTG8vq.js";import"./DyWX1Ime.js";import"./BMSQkwth.js";import"./DaWZu8wl.js";import"./B_gLqRAo.js";const Z={class:"agreement-container relative"},h={class:"mb-4 inline-block w-auto"},ee={class:"flex space-x-3 pt-4"},Ee=A({__name:"index",setup(te){const{t}=D(),o=G(),c=w("0"),F=w([{label:t("system.website.agreement.privacy")},{label:t("system.website.agreement.service")},{label:t("system.website.agreement.payment")}]),e=I({privacyTitle:"",privacyContent:"",serviceTitle:"",serviceContent:"",paymentTitle:"",paymentContent:""}),l=w(null),x=Y({privacyTitle:y().required(t("system.website.agreement.titleRequired")),privacyContent:y().required(t("system.website.agreement.contentRequired")),serviceTitle:y().required(t("system.website.agreement.titleRequired")),serviceContent:y().required(t("system.website.agreement.contentRequired")),paymentTitle:y().required(t("system.website.agreement.titleRequired")),paymentContent:y().required(t("system.website.agreement.contentRequired"))}),{lockFn:C,isLock:T}=V(async()=>{try{const a=await Q();l.value=a,e.privacyTitle=a.agreement.privacyTitle||t("system.website.agreement.privacy"),e.privacyContent=a.agreement.privacyContent||"",e.serviceTitle=a.agreement.serviceTitle||t("system.website.agreement.service"),e.serviceContent=a.agreement.serviceContent||"",e.paymentTitle=a.agreement.paymentTitle||t("system.website.agreement.payment"),e.paymentContent=a.agreement.paymentContent||""}catch(a){console.error("Get website config failed:",a),o.error(t("system.website.messages.loadFailed"))}}),{lockFn:L,isLock:u}=V(async()=>{try{const a={agreement:{privacyTitle:e.privacyTitle,privacyContent:e.privacyContent,serviceTitle:e.serviceTitle,serviceContent:e.serviceContent,paymentTitle:e.paymentTitle,paymentContent:e.paymentContent}};await X(a),o.success(t("system.website.messages.saveSuccess")),await C()}catch(a){console.error("Save failed:",a),o.error(t("system.website.messages.saveFailed"))}}),R=()=>{l.value?(e.privacyTitle=l.value.agreement.privacyTitle||t("system.website.agreement.privacy"),e.privacyContent=l.value.agreement.privacyContent||"",e.serviceTitle=l.value.agreement.serviceTitle||t("system.website.agreement.service"),e.serviceContent=l.value.agreement.serviceContent||"",e.paymentTitle=l.value.agreement.paymentTitle||t("system.website.agreement.payment"),e.paymentContent=l.value.agreement.paymentContent||"",o.info(t("system.website.messages.resetSuccess"))):(e.privacyTitle=t("system.website.agreement.privacy"),e.privacyContent="",e.serviceTitle=t("system.website.agreement.service"),e.serviceContent="",e.paymentTitle=t("system.website.agreement.payment"),e.paymentContent="",o.info(t("system.website.messages.resetEmpty")))},$=()=>{if(e.privacyTitle==="")return o.warning(t("system.website.agreement.privacyTitle"));if(e.privacyContent==="")return o.warning(t("system.website.agreement.privacyContent"));if(e.serviceTitle==="")return o.warning(t("system.website.agreement.serviceTitle"));if(e.serviceContent==="")return o.warning(t("system.website.agreement.serviceContent"));if(e.paymentTitle==="")return o.warning(t("system.website.agreement.paymentTitle"));if(e.paymentContent==="")return o.warning(t("system.website.agreement.paymentContent"))};return K(()=>C()),(a,i)=>{const S=N,b=z,p=M,g=W,_=J,B=O,E=P;return v(),d("div",Z,[q("div",h,[s(S,{modelValue:n(c),"onUpdate:modelValue":i[0]||(i[0]=r=>j(c)?c.value=r:null),items:n(F)},null,8,["modelValue","items"])]),s(E,{schema:n(x),state:n(e),onSubmit:n(L),onError:$},{default:m(()=>[n(c)==="0"?(v(),d(f,{key:0},[s(p,{name:"privacyTitle",label:n(t)("system.website.agreement.titleLabel"),required:""},{default:m(()=>[s(b,{modelValue:n(e).privacyTitle,"onUpdate:modelValue":i[1]||(i[1]=r=>n(e).privacyTitle=r),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),s(p,{name:"privacyContent",label:n(t)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:m(()=>[s(g,{modelValue:n(e).privacyContent,"onUpdate:modelValue":i[2]||(i[2]=r=>n(e).privacyContent=r)},null,8,["modelValue"])]),_:1},8,["label"])],64)):n(c)==="1"?(v(),d(f,{key:1},[s(p,{name:"serviceTitle",label:n(t)("system.website.agreement.titleLabel"),required:""},{default:m(()=>[s(b,{modelValue:n(e).serviceTitle,"onUpdate:modelValue":i[3]||(i[3]=r=>n(e).serviceTitle=r),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),s(p,{name:"serviceContent",label:n(t)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:m(()=>[s(g,{modelValue:n(e).serviceContent,"onUpdate:modelValue":i[4]||(i[4]=r=>n(e).serviceContent=r)},null,8,["modelValue"])]),_:1},8,["label"])],64)):n(c)==="2"?(v(),d(f,{key:2},[s(p,{name:"paymentTitle",label:n(t)("system.website.agreement.titleLabel"),required:""},{default:m(()=>[s(b,{modelValue:n(e).paymentTitle,"onUpdate:modelValue":i[5]||(i[5]=r=>n(e).paymentTitle=r),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),s(p,{name:"paymentContent",label:n(t)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:m(()=>[s(g,{modelValue:n(e).paymentContent,"onUpdate:modelValue":i[6]||(i[6]=r=>n(e).paymentContent=r)},null,8,["modelValue"])]),_:1},8,["label"])],64)):H("",!0),q("div",ee,[s(B,{codes:["system-website:setConfig"]},{default:m(()=>[s(_,{type:"submit",color:"primary",loading:n(u),disabled:n(u)||n(T)},{default:m(()=>[k(U(n(u)?n(t)("system.website.actions.saving"):n(t)("system.website.actions.saveChanges")),1)]),_:1},8,["loading","disabled"])]),_:1}),s(_,{type:"reset",color:"neutral",variant:"outline",disabled:n(u)||n(T),onClick:R},{default:m(()=>[k(U(n(t)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["schema","state","onSubmit"])])}}});export{Ee as default};
