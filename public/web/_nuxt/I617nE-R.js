import K from"./--UdezPG.js";import{_ as M}from"./CBooyAK7.js";import{d as z,s as c,b as A,i as E,j as p,o as n,k as T,q as u,l as d,c as k,bI as B,A as F,p as f,F as $,B as I,_ as L,v as C}from"#entry";import{_ as R}from"./BYK_1AlN.js";import{a as j,b as q,c as G,d as S}from"./CChenI34.js";import{u as H}from"./B93AZ-4h.js";import"./BJ_E6Ph7.js";import"./DSMB-qMT.js";import"./b-_TUx9i.js";import"./B22A-h4k.js";import"./Cfcu-t3n.js";import"./B128ot1i.js";import"./CoMGTw2w.js";import"./CP4Zo7YT.js";import"./XpsTG8vq.js";const J={class:"flex flex-wrap gap-2"},re=z({__name:"manage-popup",props:{type:{}},emits:["close"],setup(V,{emit:h}){const U=h,i=V,_=c([]),o=c(""),r=c(-1),s=async()=>{const e=await j({type:i.type});_.value=e},m=async()=>{o.value.trim()&&(await q({name:o.value,type:i.type}),o.value="",s())},x=async e=>{e.name.trim()&&(await G(e.id,{name:e.name,type:i.type}),r.value=-1,s())},{t:g}=A(),b=async e=>{await H({title:g("common.tag.deleteTag"),description:g("common.tag.confirmDeleteTag"),color:"error"})&&(await S(e.id),s())};return E(()=>{s()}),(e,t)=>{const y=K,v=M,D=L,N=R;return n(),p(N,{title:e.$t("common.tag.manageTags"),ui:{content:"max-w-xl"},onClose:t[1]||(t[1]=a=>U("close"))},{default:T(()=>[u("div",J,[d(y,{modelValue:f(o),"onUpdate:modelValue":t[0]||(t[0]=a=>F(o)?o.value=a:null),placeholder:e.$t("common.tag.createNewTag"),onKeydown:B(m,["enter"]),onBlur:m},null,8,["modelValue","placeholder"]),(n(!0),k($,null,I(f(_),(a,w)=>(n(),k($,{key:a.id},[f(r)!==w?(n(),p(D,{key:0,color:"neutral",variant:"outline",ui:{base:"gap-2"}},{default:T(()=>[u("span",null,C(a.name),1),u("span",null,C(a.bindingCount),1),d(v,{color:"neutral",icon:"i-lucide-pen-line",variant:"soft",size:"xs",onClick:l=>r.value=w},null,8,["onClick"]),d(v,{color:"neutral",icon:"i-lucide-trash",variant:"soft",size:"xs",onClick:l=>b(a)},null,8,["onClick"])]),_:2},1024)):(n(),p(y,{key:1,modelValue:a.name,"onUpdate:modelValue":l=>a.name=l,autofocus:"",color:"primary",onKeydown:B(m,["enter"]),onBlur:l=>x(a)},null,8,["modelValue","onUpdate:modelValue","onBlur"]))],64))),128))])]),_:1},8,["title"])}}});export{re as default};
