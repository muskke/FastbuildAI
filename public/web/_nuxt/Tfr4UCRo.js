const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BCpYtR0K.js","./YsC0FLg2.js","./DBjGnECu.js","./D-XbLhx8.js","./CoMGTw2w.js","./DSMB-qMT.js","./b-_TUx9i.js","./B22A-h4k.js","./Cfcu-t3n.js","./Di6e_Jmj.js","./P4eVxJUJ.js","./ndKhckfv.js","./CBooyAK7.js","./XBYuZpdu.js","./CYT52bmj.js","./--UdezPG.js","./BYwSSEjb.js","./BgHJjJs-.js","./CqN3ElKI.js","./BaNg8fjw.js","./DlAUqK2U.js","./CfxLE1oh.js","./CyGK14vg.js","./8-c-A7PB.js","./DN9ov8OT.js","./Cpt2kRVT.js","./pUN2d83w.js","./nBDBqKnC.js","./9bDOsXij.js","./BLu746J3.js","./BwTGIg9g.js","./BWWuJQeZ.js","./DNgvVYsj.js","./BYK_1AlN.js","./BJ_E6Ph7.js","./B128ot1i.js","./CP4Zo7YT.js","./XpsTG8vq.js","./BUyfW8JT.js","./DaWZu8wl.js"])))=>i.map(i=>d[i]);
import{d as ae,b as se,Q as oe,aq as te,s as le,aM as ne,aK as D,i as ie,c as b,o as n,q as l,l as i,p as s,A as re,H as ce,k as g,x as de,_ as me,F as U,B as V,v as y,bs as pe,j as u,t as E,C as ue,y as _e,bE as fe,R as w,U as k}from"#entry";import{_ as ge}from"./CbuHra-u.js";import he from"./--UdezPG.js";import{_ as be}from"./EHoVw6ZP.js";import{_ as ve}from"./CBooyAK7.js";import{_ as xe}from"./BqoA6bN6.js";import{_ as ye}from"./B1Lg5z9T.js";import{_ as Ee}from"./D-yR6Fj9.js";import{a as I,b as _,E as p}from"./XBYuZpdu.js";import{g as we,h as ke,i as Ie,j as Te,k as Le}from"./P4eVxJUJ.js";import{u as Ae}from"./FihYtau-.js";import"./8-c-A7PB.js";import"./B22A-h4k.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./9bDOsXij.js";import"./DN9ov8OT.js";import"./TH-3OOuG.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Cfcu-t3n.js";import"./BstbYvQo.js";import"./Bub1HYiY.js";import"./lw_U4-W2.js";import"./XpsTG8vq.js";import"./CLTNKp0S.js";import"./kRIii9yh.js";import"./C6Y-ieo6.js";import"./Dn8X9Gvz.js";import"./DlAUqK2U.js";const Ne={class:"extension-manage-container flex h-full flex-col pb-5"},De={class:"header bg-background sticky top-0 z-10 pb-6"},Ue={class:"space-y-4"},Ve={class:"flex w-full flex-wrap justify-between gap-4"},$e={class:"flex items-end justify-end"},Be={class:"flex items-center gap-4"},Ce={class:"grid h-[calc(100vh-12rem)]"},Se={class:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},Pe={class:"flex h-full w-full cursor-pointer flex-col gap-3.5 p-4"},Oe={class:"flex justify-between"},Re={class:"flex w-[calc(100%-76px)] flex-col gap-1"},Fe={class:"flex items-center gap-1"},ze={class:"text-foreground truncate text-[16px] leading-[22px] font-[500]"},Me={class:"text-muted-foreground line-clamp-2 text-[14px] leading-[20px] font-normal wrap-break-word"},je={class:"ml-[12px] h-[64px] w-[64px] flex-none overflow-hidden rounded-[10px]"},We={class:"flex items-center gap-2"},qe={class:"flex items-center gap-1 text-xs"},He={class:"text-nowrap"},Xe={class:"bg-background absolute right-3 bottom-3 flex gap-2"},Ta=ae({__name:"list",setup(Ge){const $=w(()=>k(()=>import("./BCpYtR0K.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),B=w(()=>k(()=>import("./ndKhckfv.js"),__vite__mapDeps([11,1,12,2,3,4,5,6,7,8,9,13,10]),import.meta.url)),C=w(()=>k(()=>import("./CYT52bmj.js"),__vite__mapDeps([14,15,1,16,17,18,19,20,21,22,23,24,25,26,27,28,7,29,30,31,32,33,34,5,6,8,35,4,36,37,13,10,38,39]),import.meta.url)),{t:o}=se(),v=oe(),r=te(),S=[{label:o("extensions.manage.tabs.all"),value:"all"},{label:o("extensions.manage.tabs.installed"),value:"installed"},{label:o("extensions.manage.tabs.uninstalled"),value:"uninstalled"}],f=le("all"),d=ne({type:void 0}),P=a=>({[p.WEB]:o("extensions.modal.terminalTypes.web"),[p.WEIXIN]:o("extensions.modal.terminalTypes.weixin"),[p.H5]:o("extensions.modal.terminalTypes.h5"),[p.MP]:o("extensions.modal.terminalTypes.mp"),[p.API]:o("extensions.modal.terminalTypes.api")})[a]||"未知",{paging:O,getLists:c}=Ae({fetchFun:we,params:d}),R=ce(()=>{c()},500),F=a=>{f.value=String(a);const t=f.value;t==="all"?delete d.isInstalled:d.isInstalled=t==="installed",c()},z=a=>{console.log("handleNavigate",a),window.open(`${fe.EXTENSIONS}/${a.identifier}/buildingai-middleware`,"_self")},{lockFn:M,isLock:j}=D(async a=>{try{await Te(a.identifier),await c(),r.success(o("console-common.messages.success"))}catch(t){console.error("安装插件失败:",t),r.error(o("console-common.messages.failed"))}}),{lockFn:W}=D(async a=>{try{await Le(a.identifier),await c(),r.success(o("console-common.messages.success"))}catch(t){console.error("卸载插件失败:",t),r.error(o("console-common.messages.failed"))}}),q=async a=>{try{await ke(a.id),await c(),r.success(o("console-common.messages.success"))}catch(t){console.error("启用插件失败:",t),r.error(o("console-common.messages.failed"))}},H=async a=>{try{await Ie(a.id),await c(),r.success(o("console-common.messages.success"))}catch(t){console.error("禁用插件失败:",t),r.error(o("console-common.messages.failed"))}},T=async(a,t)=>{await v.create(C).open({isEdit:t,id:a.id,initialData:{name:a.name,packName:a.identifier,description:a.description,version:a.version,icon:a.icon,type:a.type,supportTerminal:a.supportTerminal||[],author:a.author||{avatar:"",name:"",homepage:""}}}).result&&c()},X=a=>{v.create(B).open({isIdentifier:a.isLocal,extensionId:a.id,identifier:a.identifier})},G=a=>{v.create($).open({extension:a,identifier:a.identifier})};return ie(()=>c()),(a,t)=>{const L=ge,A=he,N=be,h=me,K=pe,x=ve,Q=_e,J=ue,Y=xe,Z=ye,ee=Ee;return n(),b("div",Ne,[l("div",De,[l("div",Ue,[l("div",Ve,[l("div",$e,[i(L,{items:S,modelValue:s(f),"onUpdate:modelValue":[t[0]||(t[0]=e=>re(f)?f.value=e:null),F],class:"block w-auto"},null,8,["modelValue"])]),l("div",Be,[i(A,{modelValue:s(d).name,"onUpdate:modelValue":[t[1]||(t[1]=e=>s(d).name=e),s(R)],placeholder:s(o)("extensions.manage.search")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),i(N,{modelValue:s(d).type,"onUpdate:modelValue":t[2]||(t[2]=e=>s(d).type=e),items:[{label:"全部",value:void 0},{label:"应用插件",value:s(I).APPLICATION},{label:"功能插件",value:s(I).FUNCTIONAL}],class:"block w-auto",placeholder:"请选择插件类型"},null,8,["modelValue","items"]),i(h,{icon:"i-lucide-plus",color:"primary",onClick:t[3]||(t[3]=e=>T({},!1))},{default:g(()=>[...t[4]||(t[4]=[de(" 新增插件 ",-1)])]),_:1})])])])]),l("div",Ce,[i(ee,{class:"h-full",shadow:!1},{default:g(()=>[l("div",Se,[(n(!0),b(U,null,V(s(O).items,e=>(n(),b("div",{key:e.id,class:"bg-background border-muted relative h-[170px] overflow-hidden rounded-[6px] border border-solid transition duration-150 ease-out hover:shadow-[0_6px_8px_0_rgba(28,31,35,6%)]"},[l("div",Pe,[l("div",Oe,[l("div",Re,[l("div",Fe,[l("span",ze,y(e.name),1)]),l("span",Me,y(e.description||"暂无描述"),1)]),l("div",je,[i(K,{src:e.icon,alt:e.name,class:"h-full w-full object-cover",loading:"lazy"},null,8,["src","alt"])])]),l("div",We,[e.version?(n(),u(x,{key:0,color:"neutral",variant:"soft",label:`v${e.version}`},null,8,["label"])):E("",!0),e.isInstalled?(n(),u(x,{key:1,color:e.status===s(_).ENABLED?"success":"neutral",variant:"soft",label:e.status===s(_).ENABLED?s(o)("extensions.manage.enable"):s(o)("extensions.manage.disable")},null,8,["color","label"])):E("",!0),(n(!0),b(U,null,V(e.supportTerminal,m=>(n(),u(x,{color:m===s(p).WEB?"success":m===s(p).API?"info":"neutral",variant:"soft",label:P(m)},null,8,["color","label"]))),256))]),l("div",qe,[i(J,{color:"primary",size:"xs",src:e.author?.avatar,ui:{root:"rounded-full bg-primary size-5"}},{default:g(()=>[i(Q,{name:"i-lucide-user",class:"size-3 text-white"})]),_:1},8,["src"]),l("div",He,y(e.author.name||"未知作者"),1)]),l("div",Xe,[e.type===s(I).APPLICATION&&e.isInstalled?(n(),u(Y,{key:0,text:s(o)("extensions.manage.manage")},{default:g(()=>[i(h,{color:"primary",variant:"ghost",size:"sm",label:s(o)("extensions.manage.manage"),onClick:m=>z(e)},null,8,["label","onClick"])]),_:2},1032,["text"])):E("",!0),e.isInstalled?(n(),u(Z,{key:2,items:[[{label:s(o)("extensions.manage.detail"),icon:"i-lucide-info",onSelect:()=>X(e)},{label:s(o)("extensions.manage.logs"),icon:"i-lucide-file-text",onSelect:()=>G(e)}],[{label:e.status===s(_).ENABLED?s(o)("extensions.manage.disable"):s(o)("extensions.manage.enable"),icon:e.status===s(_).ENABLED?"i-lucide-power-off":"i-lucide-power",color:e.status===s(_).ENABLED?"warning":"success",onSelect:()=>{e.status===s(_).ENABLED?H(e):q(e)}}],[e.isLocal?{label:s(o)("console-common.edit"),icon:"i-lucide-pen-line",onSelect:()=>T(e,!0)}:void 0,{label:s(o)("extensions.manage.uninstall"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>{s(W)(e)}}].filter(m=>m!==void 0)],content:{align:"end",side:"bottom",sideOffset:4},ui:{content:"w-32"}},{default:g(()=>[i(h,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["items"])):(n(),u(h,{key:1,color:"primary",variant:"ghost",size:"sm",loading:s(j),label:a.$t("extensions.manage.install"),onClick:m=>s(M)(e)},null,8,["loading","label","onClick"]))])])]))),128))])]),_:1})])])}}});export{Ta as default};
