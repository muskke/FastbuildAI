const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cpi6TN0P.js","./ql0_WxJN.js","./IZm275qp.js","./BruVSCWF.js","./BdImEx5p.js","./oFTPHjuc.js","./BcsO9TDZ.js","./DlAUqK2U.js","./DS-TE4M7.js","./BgHJjJs-.js","./CTGUoxQr.js","./DHFmmngs.js","./CR1AS2Ry.js","./CuOaO1Pb.js","./D6yWePie.js","./C3zg6GHm.js","./DVnbt8cp.js","./DuSMYVIA.js","./CRoF6I1E.js","./Btvd554H.js","./BPKB8n-W.js","./B-DdbQ-X.js","./V9POJiZu.js","./MN31c9CG.js","./BstbYvQo.js","./5XG8SC4l.js","./jQG0lB_l.js","./D-6Co9ha.js","./Dg6D3RQ3.js","./CXUt0j5Y.js","./-Eb02sIQ.js","./Dk6FGhu1.js","./CCcv9mzY.js","./BFAo_s2U.js","./Cb04SOqd.js","./VGKgjfSv.js","./Rtwz8sNN.js","./BUyfW8JT.js","./DaWZu8wl.js","./UqhBTNL6.js"])))=>i.map(i=>d[i]);
import{d as I,b as B,ap as j,Q as w,aL as K,g as R,h as L,i as M,c as N,o as O,q as u,l as i,p as s,k as r,_ as P,x as y,v as h,C as F,z as J,R as q,U as Q}from"#entry";import{_ as G}from"./DiYXikHi.js";import H from"./BruVSCWF.js";import{_ as W}from"./CQBV3TNh.js";import{_ as X}from"./5XG8SC4l.js";import{_ as Y}from"./jQG0lB_l.js";import{_ as Z}from"./CTfStZur.js";import{b as ee,u as te,d as ae,c as oe,e as se,i as ie}from"./Rtwz8sNN.js";import{u as ne}from"./JqIoTTmi.js";import"./BFVs1AfH.js";import"./DHFmmngs.js";import"./kRIii9yh.js";import"./Btvd554H.js";import"./MN31c9CG.js";import"./C6Y-ieo6.js";import"./BPKB8n-W.js";import"./B-DdbQ-X.js";import"./V9POJiZu.js";import"./CuOaO1Pb.js";import"./D6yWePie.js";import"./DuSMYVIA.js";import"./3UOIlTK8.js";import"./DduSJdeS.js";import"./VGKgjfSv.js";import"./BgHJjJs-.js";import"./CR1AS2Ry.js";import"./C3zg6GHm.js";import"./DlAUqK2U.js";const re={class:"flex h-full flex-col gap-4"},ce={class:"flex items-center justify-between"},le={class:"flex-1 overflow-y-auto"},de={class:"bg-background flex items-center justify-end gap-3 py-4"},me={class:"flex items-center gap-1.5"},Ne=I({__name:"type",setup(pe){const S=q(()=>Q(()=>import("./Cpi6TN0P.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]),import.meta.url)),k=G,{t:a}=B(),d=j(),v=w(),_=K({name:""}),{paging:c,getLists:n}=ne({fetchFun:ee,params:_}),x=R(()=>[{accessorKey:"icon",header:a("ai-secret.backend.type.form.icon")},{accessorKey:"name",header:a("ai-secret.backend.type.form.name")},{accessorKey:"isActived",header:a("ai-secret.backend.type.form.isActived")},{accessorKey:"createdAt",header:a("console-common.createAt"),cell:({row:t})=>{const e=t.getValue("createdAt");return L(k,{datetime:e,mode:"datetime"})}},{accessorKey:"action",header:a("console-common.operation")}]),C=t=>{const e=[];return e.push({label:a("ai-secret.backend.type.form.edit"),icon:"i-lucide-edit",onClick:()=>{f(t.original.id)}}),e.push({label:a("ai-secret.backend.type.form.delete"),icon:"i-lucide-trash",color:"error",onSelect(){if(!t.original.id){console.error("Row data missing ID");return}E(t.original.id)}}),e},T=async t=>{if(!t.original.id){console.error("行数据缺少 ID");return}try{await te(t.original.id,{isEnabled:t.original.isEnabled}),d.success(t.original.isEnabled?a("ai-secret.backend.type.enableSuccess"):a("ai-secret.backend.type.disableSuccess")),n()}catch(e){console.error("更新状态失败:",e)}},A=async(t,e)=>{try{e?await oe(e,t):await se(t),d.success(a("ai-secret.backend.type.edit.submitSuccess")),n()}catch(m){console.error("表单提交失败:",m)}},U=async t=>{try{await ie({jsonData:t}),d.success(a("ai-secret.backend.type.edit.submitSuccess")),n()}catch(e){console.error("JSON导入失败:",e)}},E=async t=>{try{await ae(t),d.success(a("ai-secret.backend.type.deleteSuccess")),n()}catch(e){console.error("删除失败:",e)}},f=(t,e=!1)=>{v.create(S).open({id:t,isJsonImport:e,onSubmit:(l,p)=>{A(l,p)},"onJson-submit":l=>{U(l)}})},b=(t=!1)=>{f(void 0,t)};return M(()=>n()),(t,e)=>{const m=H,l=P,p=W,V=F,z=X,D=Y,$=Z;return O(),N("div",re,[u("div",ce,[i(m,{modelValue:s(_).name,"onUpdate:modelValue":e[0]||(e[0]=o=>s(_).name=o),placeholder:"请输入名称...",onChange:s(n)},null,8,["modelValue","onChange"]),i(p,{size:"lg",items:[{label:s(a)("ai-mcp.backend.quickCreateTitle"),icon:"i-heroicons-plus",color:"primary",onSelect:()=>b()},{label:s(a)("ai-mcp.backend.importTitle"),icon:"i-lucide-file-json-2",color:"primary",onSelect:()=>b(!0)}]},{default:r(()=>[i(l,{color:"primary",icon:"i-lucide-plus"},{default:r(()=>[y(h(s(a)("ai-secret.backend.type.addType")),1)]),_:1})]),_:1},8,["items"])]),u("div",le,[i(D,{sticky:"",class:"h-full",columns:s(x),data:s(c).items,ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r",td:"border-b border-default",tr:"[&:has(>td[colspan])]:hidden"}},{"icon-cell":r(({row:o})=>[i(V,{src:o.original.icon,alt:o.original.name,size:"md",ui:{image:"rounded-lg",fallback:"text-inverted font-medium"},class:J([o.original.icon?"":"bg-primary"])},null,8,["src","alt","class"])]),"type-cell":r(({row:o})=>[y(h(o.original.type==="system"?s(a)("ai-secret.backend.type.form.system"):s(a)("ai-secret.backend.type.form.custom")),1)]),"isActived-cell":r(({row:o})=>[i(z,{"model-value":!!o.original.isEnabled,"onUpdate:modelValue":g=>o.original.isEnabled=g?1:0,onChange:g=>T(o)},null,8,["model-value","onUpdate:modelValue","onChange"])]),"action-cell":r(({row:o})=>[i(p,{items:C(o)},{default:r(()=>[i(l,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost"})]),_:1},8,["items"])]),_:1},8,["columns","data"])]),u("div",de,[u("div",me,[i($,{page:s(c).page,"onUpdate:page":e[1]||(e[1]=o=>s(c).page=o),size:s(c).pageSize,"onUpdate:size":e[2]||(e[2]=o=>s(c).pageSize=o),total:s(c).total,onChange:s(n)},null,8,["page","size","total","onChange"])])])])}}});export{Ne as default};
