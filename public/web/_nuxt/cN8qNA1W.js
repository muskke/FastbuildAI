const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fWd97b3P.js","./YsC0FLg2.js","./BqoA6bN6.js","./TH-3OOuG.js","./Bub1HYiY.js","./B22A-h4k.js","./lw_U4-W2.js","./XpsTG8vq.js","./CBooyAK7.js","./ZZC6mEJB.js","./BgHJjJs-.js","./DN9ov8OT.js","./nBDBqKnC.js","./CJG2iIES.js","./BdKfYASf.js","./B1Lg5z9T.js","./CLTNKp0S.js","./8-c-A7PB.js","./kRIii9yh.js","./Cfcu-t3n.js","./C6Y-ieo6.js","./b-_TUx9i.js","./DaNf1Wdt.js","./CKXZhss7.js","./Cpt2kRVT.js","./pUN2d83w.js","./BwTGIg9g.js","./BWWuJQeZ.js","./9bDOsXij.js","./Dp_0VxUw.js","./Beh0yCqo.js","./--UdezPG.js","./BYwSSEjb.js","./CqN3ElKI.js","./BaNg8fjw.js","./DlAUqK2U.js","./D-yR6Fj9.js","./Dn8X9Gvz.js","./BO1GPLSL.js","./ahy3UiMC.js","./CyGK14vg.js","./BJePYFQ7.js","./PB-3MFNY.js","./Cv1u6XyE.js","./CKTa8Hyi.js","./CfxLE1oh.js","./DNgvVYsj.js","./BYK_1AlN.js","./BJ_E6Ph7.js","./DSMB-qMT.js","./B128ot1i.js","./CoMGTw2w.js","./CP4Zo7YT.js","./BcvHkqwA.js","./BUyfW8JT.js","./DaWZu8wl.js","./UqhBTNL6.js","./DqVgEjI6.js","./CxYtPm8G.js","./BsoAYZfI.js","./D_xVtNgx.js"])))=>i.map(i=>d[i]);
import{d as J,aq as W,b as X,Q as Y,aM as Z,s as E,f as ee,aK as oe,g as I,i as te,c as h,o as u,q as c,j as R,t as se,l as n,p as o,A as ae,v as l,k as p,_ as le,x as y,F as ie,B as re,R as k,y as ce,U as x}from"#entry";import ne from"./--UdezPG.js";import{_ as de}from"./EHoVw6ZP.js";import{_ as me}from"./BwTGIg9g.js";import{_ as ue}from"./lw_U4-W2.js";import{_ as pe}from"./CJG2iIES.js";import{_ as _e}from"./D-yR6Fj9.js";import{a as ve,b as he,c as fe,d as ge}from"./BcvHkqwA.js";import{u as be}from"./B93AZ-4h.js";import"./8-c-A7PB.js";import"./DN9ov8OT.js";import"./TH-3OOuG.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Cfcu-t3n.js";import"./BstbYvQo.js";import"./B22A-h4k.js";import"./BWWuJQeZ.js";import"./9bDOsXij.js";import"./pUN2d83w.js";import"./Cpt2kRVT.js";import"./nBDBqKnC.js";import"./BgHJjJs-.js";import"./XpsTG8vq.js";import"./Dn8X9Gvz.js";import"./DlAUqK2U.js";const ye={class:"provider-list-container pb-5"},ke={class:"bg-background sticky top-0 z-10 flex flex-wrap gap-4 pb-2"},xe={class:"flex items-center gap-2 md:ml-auto"},Ae={class:"flex items-center gap-2"},we={class:"text-accent-foreground text-sm dark:text-gray-400"},Pe={class:"mt-2 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"},Ve={key:1,class:"flex h-[calc(100vh-13rem)] items-center justify-center"},Ce={class:"flex items-center gap-3"},De={class:"text-accent-foreground"},Se={key:2,class:"flex h-[calc(100vh-13rem)] flex-col items-center justify-center"},Ee={class:"text-secondary-foreground mb-2 text-lg font-medium"},Ie={class:"text-accent-foreground"},Re={key:3,class:"bg-background sticky bottom-0 z-10 flex items-center justify-between gap-3 py-4"},Me={class:"text-muted text-sm"},Te={class:"text-muted text-sm"},no=J({__name:"list",setup(Ue){const M=k(()=>x(()=>import("./fWd97b3P.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url)),T=k(()=>x(()=>import("./Beh0yCqo.js"),__vite__mapDeps([30,1,31,32,10,33,34,35,8,36,37,38,16,17,18,3,19,20,21,22,23,24,25,5,4,39,40,11,12,28,41,42,43,44,45,46,47,48,49,50,51,52,7,53,54,55,56,57]),import.meta.url)),U=k(()=>x(()=>import("./CxYtPm8G.js"),__vite__mapDeps([58,1,59,36,37,35,60,49,21,5,19,50,51,53,52,7]),import.meta.url)),f=W(),{t}=X(),A=Y(),_=Z({keyword:"",isActive:void 0}),v=E(),a=ee(new Set),i=E([]),{lockFn:d,isLock:w}=oe(async()=>{try{const e=await he(_);i.value=e}catch(e){console.error("Get provider list failed:",e)}}),B=(e,s)=>{if(typeof s=="boolean"){const r=e.id;s?a.value.add(r):a.value.delete(r)}},$=e=>{e===!0?i.value.forEach(r=>{r.id&&a.value.add(r.id)}):a.value.clear()},P=async e=>{try{await be({title:t("ai-provider.backend.confirm.deleteTitle"),description:t("ai-provider.backend.confirm.deleteMessage"),color:"error"}),Array.isArray(e)?(await fe(e),f.success(t("console-common.batchDeleteSuccess"))):(await ge(e),f.success(t("common.message.deleteSuccess"))),a.value.clear(),d()}catch(s){console.error("Delete failed:",s)}},L=e=>{e.id&&P(e.id)},z=()=>{const e=Array.from(a.value);e.length!==0&&P(e)},F=async e=>{await A.create(U).open({providerId:e}).result&&d()},V=async(e="")=>{await A.create(T).open({id:e}).result&&d()},C=()=>{V()},j=e=>{V(e.id)},N=async(e,s)=>{try{await ve(e,s),f.success(t(s?"ai-provider.backend.messages.enableSuccess":"ai-provider.backend.messages.disableSuccess")),d()}catch(r){console.error("Toggle provider active failed:",r)}},O=I(()=>i.value.length>0&&i.value.every(e=>e.id&&a.value.has(e.id))),q=I(()=>{const e=i.value.filter(s=>s.id&&a.value.has(s.id)).length;return e>0&&e<i.value.length}),G=()=>{v.value==="all"?_.isActive=void 0:_.isActive=v.value===!0,d()};return te(()=>d()),(e,s)=>{const r=ne,g=de,K=me,Q=ue,b=le,D=pe,H=_e,S=ce;return u(),h("div",ye,[c("div",ke,[n(r,{modelValue:o(_).keyword,"onUpdate:modelValue":s[0]||(s[0]=m=>o(_).keyword=m),placeholder:o(t)("ai-provider.backend.search.placeholder"),onChange:o(d)},null,8,["modelValue","placeholder","onChange"]),n(g,{modelValue:o(v),"onUpdate:modelValue":s[1]||(s[1]=m=>ae(v)?v.value=m:null),items:[{label:o(t)("ai-provider.backend.search.all"),value:"all"},{label:o(t)("console-common.enabled"),value:!0},{label:o(t)("console-common.disabled"),value:!1}],class:"w-fit","label-key":"label","value-key":"value",placeholder:o(t)("ai-provider.backend.search.status"),onChange:G},null,8,["modelValue","items","placeholder"]),c("div",xe,[c("div",Ae,[n(K,{"model-value":o(O)?!0:o(q)?"indeterminate":!1,"onUpdate:modelValue":$},null,8,["model-value"]),c("span",we,l(o(a).size)+" / "+l(o(i).length)+" "+l(o(t)("console-common.selected")),1)]),n(D,{codes:["ai-provider.backends:delete"]},{default:p(()=>[n(b,{color:"error",variant:"subtle",label:o(t)("console-common.batchDelete"),icon:"i-heroicons-trash",disabled:o(a).size===0,onClick:z},{trailing:p(()=>[n(Q,null,{default:p(()=>[y(l(o(a).size),1)]),_:1})]),_:1},8,["label","disabled"])]),_:1}),n(D,{codes:["ai-provider.backends:create"]},{default:p(()=>[n(b,{icon:"i-heroicons-plus",color:"primary",onClick:C},{default:p(()=>[y(l(o(t)("ai-provider.backend.addTitle")),1)]),_:1})]),_:1})])]),!o(w)&&o(i).length>0?(u(),R(H,{key:0,class:"h-[calc(100vh-12rem)]",shadow:!1},{default:p(()=>[c("div",Pe,[(u(!0),h(ie,null,re(o(i),m=>(u(),R(o(M),{key:m.id,provider:m,selected:o(a).has(m.id),onSelect:B,onDelete:L,onEdit:j,onViewModels:F,onToggleActive:N},null,8,["provider","selected"]))),128))])]),_:1})):o(w)?(u(),h("div",Ve,[c("div",Ce,[n(S,{name:"i-lucide-loader-2",class:"text-primary-500 h-6 w-6 animate-spin"}),c("span",De,l(e.$t("common.loading")),1)])])):(u(),h("div",Se,[n(S,{name:"i-lucide-building",class:"text-muted-foreground mb-4 h-16 w-16"}),c("h3",Ee,l(o(t)("ai-provider.backend.empty.noProviders")),1),c("p",Ie,l(o(t)("ai-provider.backend.empty.noProvidersDescription")),1),n(b,{class:"mt-4",icon:"i-heroicons-plus",color:"primary",onClick:C},{default:p(()=>[y(l(o(t)("ai-provider.backend.empty.addFirstProvider")),1)]),_:1})])),o(i).length>0?(u(),h("div",Re,[c("div",Me,l(o(a).size)+" "+l(e.$t("console-common.selected")),1),c("div",Te,l(o(t)("ai-provider.backend.stats.totalProviders",{count:o(i).length})),1)])):se("",!0)])}}});export{no as default};
