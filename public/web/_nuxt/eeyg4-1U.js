function m(e){const t=new Date(e),n=new Date,s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=s.getTime()-o.getTime(),r=Math.floor(a/(1e3*60*60*24));return r===0?"today":r===1?"yesterday":r<=7?"week":r<=30?"month":`${t.getFullYear()}-${t.getMonth()+1}`}function l(e,t){if(!t)switch(e){case"today":return"今天";case"yesterday":return"昨天";case"week":return"7天内";case"month":return"30天内";default:if(typeof e=="string"&&e.includes("-")){const[n,s]=e.split("-"),o=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],a=new Date().getFullYear();return parseInt(n||"0")===a?o[parseInt(s||"0")-1]||"":`${n}年${o[parseInt(s||"0")-1]}`}return e}switch(e){case"today":return t("common.dateGroup.today");case"yesterday":return t("common.dateGroup.yesterday");case"week":return t("common.dateGroup.week");case"month":return t("common.dateGroup.month");default:if(typeof e=="string"&&e.includes("-")){const[n,s]=e.split("-"),o=["january","february","march","april","may","june","july","august","september","october","november","december"],a=new Date().getFullYear(),r=t(`common.dateGroup.months.${o[parseInt(s||"0")-1]}`);return parseInt(n||"0")===a?r:`${n}年${r}`}return e}}function c(e){switch(e){case"today":return 1;case"yesterday":return 2;case"week":return 3;case"month":return 4;default:if(typeof e=="string"&&e.includes("-")){const[t,n]=e.split("-");return 1e3+parseInt(t||"0")*100+parseInt(n||"0")}return 9999}}function f(e,t="updatedAt",n){const s=new Map;return e.forEach(a=>{const r=m(a[t]);s.has(r)||s.set(r,[]);const u=s.get(r);u&&u.push(a)}),Array.from(s.entries()).map(([a,r])=>({label:l(a,n),key:a,items:r.sort((u,i)=>new Date(i[t]).getTime()-new Date(u[t]).getTime())})).sort((a,r)=>c(a.key)-c(r.key))}export{f as g};
