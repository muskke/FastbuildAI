import{d as x,b as v,g as _,c as u,o as m,q as e,v as s,l as a,y,F as k,B as E,k as $,x as A}from"#entry";import P from"./--UdezPG.js";import{_ as T}from"./ADUcesrP.js";import{_ as I}from"./CBooyAK7.js";import"./BqoA6bN6.js";import"./TH-3OOuG.js";import"./Bub1HYiY.js";import"./B22A-h4k.js";import"./lw_U4-W2.js";import"./XpsTG8vq.js";import"./2ydT-KR3.js";import"./Dn8X9Gvz.js";import"./B_gLqRAo.js";const S={class:"space-y-4"},C={class:"mb-2 text-lg font-medium"},K={class:"text-muted-foreground text-sm"},q={key:0,class:"border-border rounded-lg border p-6 text-center"},z={class:"mb-2 font-medium"},B={class:"text-muted-foreground text-sm"},D={key:1,class:"border-border rounded-lg border p-6 text-center"},N={class:"mb-2 font-medium"},w={class:"text-muted-foreground text-sm"},O={key:2,class:"space-y-6"},j={class:"space-y-4"},U={class:"font-medium"},G={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Y={class:"space-y-2"},J={class:"flex gap-2"},L={class:"space-y-2"},M={class:"flex gap-2"},Z={class:"space-y-4"},V={class:"font-medium"},F={class:"space-y-4"},R={class:"hover:bg-accent/50 cursor-pointer list-none p-4 transition-colors"},H={class:"mb-4 flex items-center justify-between"},X={class:"flex items-center gap-3"},Q={class:"text-sm font-medium"},W={class:"text-muted-foreground bg-accent rounded-xs px-4 py-2 text-xs"},ee={class:"text-muted-foreground mt-4 text-sm"},te={class:"border-border border-t p-4"},se={class:"space-y-6"},oe={class:"mb-2 flex items-center justify-between"},ne={class:"text-sm font-medium"},ae={class:"bg-muted rounded-lg p-3"},ie={class:"overflow-auto text-xs"},le={class:"mb-2 flex items-center justify-between"},re={class:"text-sm font-medium"},de={class:"bg-muted rounded-lg p-3"},ce={class:"overflow-auto text-xs"},ue={class:"mb-2 flex items-center justify-between"},me={class:"text-sm font-medium"},pe={class:"bg-muted rounded-lg p-3"},ge={class:"overflow-auto text-xs"},Ie=x({__name:"api-guide",props:{agent:{}},setup(p){const c=p,{t:o}=v(),g=_(()=>""),f=_(()=>[{method:"POST",url:"/consoleapi/v1/chat",title:o("ai-agent.backend.publish.normalChatAPI"),description:o("ai-agent.backend.publish.normalChatAPIDesc"),color:"success",requestExample:{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},body:{messages:[{role:"user",content:"你好"}],responseMode:"blocking"}},responseExample:{conversationId:"uuid-string",response:"智能体的回复内容",responseTime:1500,tokenUsage:{totalTokens:150,promptTokens:50,completionTokens:100},suggestions:["建议问题1","建议问题2"],referenceSources:[]}},{method:"POST",url:"/consoleapi/v1/chat",title:o("ai-agent.backend.publish.streamChatAPI"),description:o("ai-agent.backend.publish.streamChatAPIDesc"),color:"info",requestExample:{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},body:{messages:[{role:"user",content:"你好"}],responseMode:"streaming"}},responseExample:{note:"流式响应，通过 Server-Sent Events 返回",format:`data: {"type":"chunk","content":"智能体回复的片段"}
data: [DONE]`}},{method:"GET",url:"/consoleapi/v1/conversations",title:o("ai-agent.backend.publish.getConversationsAPI"),description:o("ai-agent.backend.publish.getConversationsAPIDesc"),color:"neutral",requestExample:{headers:{Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},params:{page:1,pageSize:10}},responseExample:{data:[{id:"conversation-uuid",title:"对话标题",summary:"对话摘要",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z",messageCount:10}],pagination:{page:1,pageSize:10,total:100,totalPages:10}}},{method:"GET",url:"/consoleapi/v1/conversations/{id}/messages",title:o("ai-agent.backend.publish.getMessagesAPI"),description:o("ai-agent.backend.publish.getMessagesAPIDesc"),color:"neutral",requestExample:{headers:{Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},params:{page:1,pageSize:50}},responseExample:{data:[{id:"message-uuid",role:"user",content:"用户消息内容",createdAt:"2024-01-01T00:00:00Z"},{id:"message-uuid",role:"assistant",content:"智能体回复内容",createdAt:"2024-01-01T00:00:00Z",tokenUsage:{totalTokens:150,promptTokens:50,completionTokens:100}}],pagination:{page:1,pageSize:50,total:20,totalPages:1}}},{method:"PUT",url:"/consoleapi/v1/conversations/{id}",title:o("ai-agent.backend.publish.updateConversationAPI"),description:o("ai-agent.backend.publish.updateConversationAPIDesc"),color:"warning",requestExample:{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},body:{title:"新的对话标题"}},responseExample:{message:"对话记录更新成功"}},{method:"DELETE",url:"/consoleapi/v1/conversations/{id}",title:o("ai-agent.backend.publish.deleteConversationAPI"),description:o("ai-agent.backend.publish.deleteConversationAPIDesc"),color:"error",requestExample:{headers:{Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},note:o("ai-agent.backend.publish.deleteNoBody")},responseExample:{message:"对话记录删除成功"}}]),b=t=>{let i=`curl -X ${t.method} "${g.value}${t.url}"`;if(t.requestExample.headers&&Object.entries(t.requestExample.headers).forEach(([l,r])=>{i+=` \\
  -H "${l}: ${r}"`}),t.requestExample.body&&t.method!=="GET"&&(i+=` \\
  -d '${JSON.stringify(t.requestExample.body,null,2)}'`),t.requestExample.params&&t.method==="GET"){const l=new URLSearchParams(Object.entries(t.requestExample.params).reduce((r,[d,h])=>(r[d]=String(h),r),{})).toString();i=i.replace(t.url,`${t.url}?${l}`)}return i};return(t,i)=>{const l=y,r=P,d=T,h=I;return m(),u("div",S,[e("div",null,[e("h3",C,s(t.$t("ai-agent.backend.publish.apiGuide")),1),e("p",K,s(t.$t("ai-agent.backend.publish.apiGuideDesc")),1)]),p.agent?.isPublished?p.agent?.apiKey?(m(),u("div",O,[e("div",j,[e("h4",U,s(t.$t("ai-agent.backend.publish.basicInfo")),1),e("div",G,[e("div",Y,[i[0]||(i[0]=e("label",{class:"text-sm font-medium"},"API Base URL",-1)),e("div",J,[a(r,{value:g.value,readonly:"",class:"flex-1"},null,8,["value"]),a(d,{content:g.value,variant:"outline",copiedText:t.$t("console-common.messages.copySuccess"),"default-text":t.$t("console-common.copy")},null,8,["content","copiedText","default-text"])])]),e("div",L,[i[1]||(i[1]=e("label",{class:"text-sm font-medium"},"API Key",-1)),e("div",M,[a(r,{value:p.agent.apiKey,readonly:"",class:"flex-1"},null,8,["value"]),a(d,{content:p.agent.apiKey,variant:"outline",copiedText:t.$t("console-common.messages.copySuccess"),"default-text":t.$t("console-common.copy")},null,8,["content","copiedText","default-text"])])])])]),e("div",Z,[e("h4",V,s(t.$t("ai-agent.backend.publish.availableEndpoints")),1),e("div",F,[(m(!0),u(k,null,E(f.value,n=>(m(),u("details",{key:n.url,class:"border-border rounded-lg border"},[e("summary",R,[e("div",H,[e("div",X,[a(h,{color:n.color,variant:"soft"},{default:$(()=>[A(s(n.method),1)]),_:2},1032,["color"]),e("span",Q,s(n.title),1)]),a(l,{name:"i-lucide-chevron-down",class:"text-muted-foreground size-4"})]),e("code",W,s(n.url),1),e("p",ee,s(n.description),1)]),e("div",te,[e("div",se,[e("div",null,[e("div",oe,[e("h5",ne,s(t.$t("ai-agent.backend.publish.requestExample")),1),a(d,{content:JSON.stringify(n.requestExample,null,2),size:"sm",variant:"outline","default-text":t.$t("ai-agent.backend.publish.copy")},null,8,["content","default-text"])]),e("div",ae,[e("pre",ie,[e("code",null,s(JSON.stringify(n.requestExample,null,2)),1)])])]),e("div",null,[e("div",le,[e("h5",re,s(t.$t("ai-agent.backend.publish.responseExample")),1),a(d,{content:JSON.stringify(n.responseExample,null,2),size:"sm",variant:"outline","default-text":t.$t("ai-agent.backend.publish.copy")},null,8,["content","default-text"])]),e("div",de,[e("pre",ce,[e("code",null,s(JSON.stringify(n.responseExample,null,2)),1)])])]),e("div",null,[e("div",ue,[e("h5",me,s(t.$t("ai-agent.backend.publish.curlExample")),1),a(d,{content:b(n),size:"sm",variant:"outline","default-text":t.$t("ai-agent.backend.publish.copy")},null,8,["content","default-text"])]),e("div",pe,[e("pre",ge,[e("code",null,s(b(n)),1)])])])])])]))),128))])])])):(m(),u("div",D,[a(l,{name:"i-lucide-key",class:"text-muted-foreground mx-auto mb-3 size-12"}),e("h4",N,s(t.$t("ai-agent.backend.publish.apiKeyNotGenerated")),1),e("p",w,s(t.$t("ai-agent.backend.publish.apiKeyNotGeneratedDesc")),1)])):(m(),u("div",q,[a(l,{name:"i-lucide-lock",class:"text-muted-foreground mx-auto mb-3 size-12"}),e("h4",z,s(t.$t("ai-agent.backend.publish.unpublished")),1),e("p",B,s(t.$t("ai-agent.backend.publish.unpublishedDesc3")),1)]))])}}});export{Ie as default};
