import{d as O,ap as V,aI as z,b as R,g,aL as q,s as Q,aJ as k,i as A,j as w,o as a,k as i,c as l,p as e,l as r,y as J,q as t,t as C,C as G,v as s,x as p,_ as K,F as H,B as P}from"#entry";import{_ as W}from"./DGIb7fSK.js";import{_ as X}from"./Cif_tCX1.js";import{_ as Y}from"./CXUt0j5Y.js";import{b as Z,a as ee}from"./CbK4UO9G.js";import"./Btvd554H.js";import"./3UOIlTK8.js";import"./DuSMYVIA.js";import"./DduSJdeS.js";import"./VGKgjfSv.js";import"./-Eb02sIQ.js";import"./Dk6FGhu1.js";import"./BPKB8n-W.js";import"./MN31c9CG.js";import"./CCcv9mzY.js";import"./BFAo_s2U.js";import"./Cb04SOqd.js";const te={key:0,class:"flex items-center justify-center",style:{height:"400px"}},oe={key:1,class:"max-h-200"},se={class:"flex justify-between pb-4"},ne={class:"flex items-center gap-4"},ce={class:"text-secondary-foreground flex items-center text-base font-semibold"},ae={class:"line-clamp-1"},ie={class:"bg-muted rounded-lg p-4 pb-4"},de={class:"text-muted-foreground text-sm"},re={class:"grid grid-cols-1 gap-x-6 gap-y-4 py-4 pb-4 md:grid-cols-2"},le={class:"text-muted-foreground text-sm"},me={class:"max-w-100"},ue={class:"text-secondary-foreground mt-1 truncate font-medium"},pe={class:"text-muted-foreground text-sm"},_e={class:"text-secondary-foreground mt-1 font-medium"},fe={class:"text-muted-foreground text-sm"},xe={class:"text-secondary-foreground mt-1 font-medium"},ve={class:"text-muted-foreground text-sm"},ye={class:"text-secondary-foreground mt-1 font-medium"},he={class:"flex items-center gap-2"},be={class:"text-sm font-medium"},ge={class:"text-muted-foreground text-sm"},ke={class:"text-secondary-foreground mt-1 font-medium"},we={class:"text-muted-foreground text-sm"},Ce={class:"text-secondary-foreground mt-1 font-medium"},Te={class:"text-muted-foreground text-sm"},Be={class:"text-secondary-foreground mt-1 font-medium"},Me={class:"text-muted-foreground text-sm"},De={key:0,class:"text-error mt-1 text-sm font-medium"},$e={key:1,class:"mt-1 text-sm font-medium"},Le={key:0,class:"pb-4"},Ue={class:"text-secondary-foreground mb-2 text-base font-medium"},je={class:"max-h-80 space-y-2 overflow-y-auto"},Ee={class:"text-secondary-foreground font-medium"},Fe={class:"text-muted-foreground mt-1 text-sm"},Ye=O({__name:"detail",props:{id:{},isView:{type:Boolean},isJsonImport:{type:Boolean}},emits:["close"],setup(T,{emit:B}){const M=B,D=T,x=V(),$=z(),{t:n}=R(),v=g(()=>D.id||$.query.id||null),o=q({id:"",name:"",providerName:"",description:"",icon:"",isDisabled:!1,url:"",sortOrder:0,timeout:60,type:"",tools:[],connectable:!1,connectError:"",isQuickMenu:!1,communicationType:""}),y=Q(!1),{lockFn:h,isLock:L}=k(async()=>{try{const c=await Z(v.value);Object.keys(o).forEach(m=>{const u=m,d=c[u];d!==void 0&&(typeof d=="object"&&d!==null?Object.keys(d).length>0&&(o[u]=d):o[u]=d)})}catch(c){console.error("获取供应商详情失败:",c)}}),{lockFn:U,isLock:j}=k(async()=>{try{const c=await ee(o.id);c.connectable?(x.success(c.message),h(),y.value=!0):x.error(c.message)}catch(c){console.error("重新链接失败:",c)}}),E=c=>{M("close",c)},F=g(()=>o.communicationType.includes("-")?o.communicationType.replace("-"," ").toUpperCase():o.communicationType?.toUpperCase());return A(async()=>v.value&&await h()),(c,m)=>{const u=J,d=G,b=W,_=X,I=K,S=Y;return a(),w(S,{title:e(n)("ai-mcp.backend.detailTitle"),description:e(n)("ai-mcp.backend.detailTitle"),ui:{content:"max-w-2xl overflow-y-auto h-fit"},onClose:m[1]||(m[1]=f=>E(e(y)))},{default:i(()=>[e(L)?(a(),l("div",te,[r(u,{name:"i-lucide-loader-2",class:"size-8 animate-spin"})])):(a(),l("div",oe,[t("div",se,[t("div",ne,[r(d,{src:e(o).icon,alt:e(o).name,size:"3xl",ui:{root:"rounded-lg"}},null,8,["src","alt"]),t("div",null,[t("h3",ce,[r(b,{text:e(o).name,delay:0},{default:i(()=>[t("span",ae,s(e(o).name),1)]),_:1},8,["text"])]),r(_,{color:e(o).type==="user"?"info":"primary"},{default:i(()=>[p(s(e(o).type==="user"?e(n)("console-common.tab.custom"):e(n)("console-common.tab.system")),1)]),_:1},8,["color"])])]),!e(o).connectable&&e(o).type==="system"?(a(),w(I,{key:0,class:"h-fit",loading:e(j),icon:"tabler:reload",ui:{leadingIcon:"size-4"},variant:"soft",size:"md",color:"error",onClick:m[0]||(m[0]=f=>e(U)())},{default:i(()=>[p(s(e(n)("ai-mcp.backend.detail.reconnect")),1)]),_:1},8,["loading"])):C("",!0)]),t("div",ie,[t("p",de,s(e(o).description||e(n)("ai-mcp.backend.detail.noDescription")),1)]),t("div",re,[t("div",null,[t("div",le,s(e(n)("ai-mcp.backend.detail.url")),1),r(b,{ui:{content:"max-w-100 !whitespace-pre-wrap !break-all leading-relaxed h-fit p-2"},"delay-duration":0},{content:i(()=>[t("div",me,s(e(o).url),1)]),default:i(()=>[t("div",ue,s(e(o).url),1)]),_:1})]),t("div",null,[t("div",pe,s(e(n)("ai-mcp.backend.detail.timeout")),1),t("div",_e,s(e(o).timeout)+" s ",1)]),t("div",null,[t("div",fe,s(e(n)("ai-mcp.backend.detail.sortOrder")),1),t("div",xe,s(e(o).sortOrder),1)]),t("div",null,[t("div",ve,s(e(n)("ai-mcp.backend.form.isQuickMenu")),1),t("div",ye,[t("div",he,[t("span",be,s(e(o).isQuickMenu?e(n)("ai-mcp.backend.detail.quickMenu"):e(n)("ai-mcp.backend.detail.normalMenu")),1)])])]),t("div",null,[t("div",ge,s(e(n)("ai-mcp.backend.detail.isActive")),1),t("div",ke,[r(_,{color:e(o).isDisabled?"error":"success"},{default:i(()=>[p(s(e(o).isDisabled?e(n)("ai-mcp.backend.detail.disabled"):e(n)("ai-mcp.backend.detail.enabled")),1)]),_:1},8,["color"])])]),t("div",null,[t("div",we,s(e(n)("ai-mcp.backend.detail.connectStatus")),1),t("div",Ce,[r(_,{color:e(o).connectable?"success":"error"},{default:i(()=>[p(s(e(o).connectable?e(n)("ai-mcp.backend.detail.connectSuccess"):e(n)("ai-mcp.backend.detail.connectFailed")),1)]),_:1},8,["color"])])]),t("div",null,[t("div",Te,s(e(n)("ai-mcp.backend.detail.communicationType")),1),t("div",Be,[r(_,{color:"neutral",variant:"soft"},{default:i(()=>[p(s(e(F)),1)]),_:1})])]),t("div",null,[t("div",Me,s(e(n)("ai-mcp.backend.detail.connectError")),1),e(o).connectError?(a(),l("div",De,s(e(o).connectError),1)):(a(),l("div",$e,"-"))])]),e(o).tools&&e(o).tools.length>0?(a(),l("div",Le,[t("h4",Ue,s(e(n)("ai-mcp.backend.detail.tools")),1),t("div",je,[(a(!0),l(H,null,P(e(o).tools,(f,N)=>(a(),l("div",{key:N,class:"border-muted rounded-lg border p-4"},[t("div",Ee,s(f.name),1),t("div",Fe,s(f.description),1)]))),128))])])):C("",!0)]))]),_:1},8,["title","description"])}}});export{Ye as default};
