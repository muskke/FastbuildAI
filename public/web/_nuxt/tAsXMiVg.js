import{_ as B}from"./ql0_WxJN.js";import{_ as C}from"./DS-TE4M7.js";import x from"./BruVSCWF.js";import P from"./Dg6D3RQ3.js";import{d as j,b as D,ap as I,ar as L,aL as M,aJ as N,i as R,j as S,o as T,k as r,l as n,q as _,p as t,x as p,v as d,_ as z}from"#entry";import{_ as A}from"./D-6Co9ha.js";import{_ as J}from"./CXUt0j5Y.js";import{q as E}from"./ChM0pAjz.js";import{c as G,a as g}from"./BUyfW8JT.js";import{u as H}from"./Dx01Lm3C.js";import"./BdImEx5p.js";import"./oFTPHjuc.js";import"./BcsO9TDZ.js";import"./DlAUqK2U.js";import"./BgHJjJs-.js";import"./-Eb02sIQ.js";import"./Dk6FGhu1.js";import"./BPKB8n-W.js";import"./DuSMYVIA.js";import"./MN31c9CG.js";import"./CCcv9mzY.js";import"./BFAo_s2U.js";import"./Cb04SOqd.js";import"./VGKgjfSv.js";import"./DaWZu8wl.js";const K={class:"flex flex-col gap-4"},O={class:"mt-6 flex justify-end gap-2"},ve=j({__name:"template-create-modal",props:{template:{}},emits:["close"],setup(u,{emit:b}){const{t:l}=D(),k=I(),$=L(),s=u,m=b,e=M({name:"",description:"",avatar:""}),v=G({description:g().required(l("ai-agent.backend.create.descriptionPlaceholder")),name:g().required(l("ai-agent.backend.create.namePlaceholder"))}),{lockFn:V,isLock:h}=N(async()=>{try{const a=await E({templateId:s.template.id,name:e.name,description:e.description,avatar:e.avatar});m("close",!0),k.success(l("ai-agent.backend.template.create.success")),$.push(H("ai-agent:detail",{id:a.id}))}catch(a){console.error(l("ai-agent.backend.template.create.failed"),a)}});return R(()=>{s.template&&(e.avatar=s.template.avatar||"",e.name=s.template.name,e.description=s.template.description||"")}),(a,o)=>{const U=B,c=C,w=x,y=P,f=z,F=A,q=J;return T(),S(q,{title:t(l)("ai-agent.backend.template.create.title",{name:u.template?.name}),description:t(l)("ai-agent.backend.template.create.description"),ui:{content:"max-w-lg"},onClose:o[4]||(o[4]=i=>m("close"))},{default:r(()=>[n(F,{schema:t(v),state:t(e),class:"space-y-4",onSubmit:t(V)},{default:r(()=>[_("div",K,[n(c,{label:a.$t("ai-agent.backend.create.avatar"),name:"avatar"},{hint:r(()=>[p(d(a.$t("ai-agent.backend.create.avatarDefault")),1)]),default:r(()=>[n(U,{modelValue:t(e).avatar,"onUpdate:modelValue":o[0]||(o[0]=i=>t(e).avatar=i),class:"h-24 w-24",text:a.$t("ai-agent.backend.create.avatarUpload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg,.gif,.webp",maxCount:1,single:!0,multiple:!1},null,8,["modelValue","text"])]),_:1},8,["label"]),n(c,{label:a.$t("ai-agent.backend.create.name"),name:"name",required:""},{default:r(()=>[n(w,{modelValue:t(e).name,"onUpdate:modelValue":o[1]||(o[1]=i=>t(e).name=i),placeholder:a.$t("ai-agent.backend.create.namePlaceholder"),ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(c,{label:a.$t("ai-agent.backend.create.description"),name:"description",required:""},{default:r(()=>[n(y,{modelValue:t(e).description,"onUpdate:modelValue":o[2]||(o[2]=i=>t(e).description=i),placeholder:a.$t("ai-agent.backend.create.descriptionPlaceholder"),rows:6,ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_("div",O,[n(f,{color:"neutral",variant:"soft",size:"lg",onClick:o[3]||(o[3]=i=>m("close"))},{default:r(()=>[p(d(a.$t("console-common.cancel")),1)]),_:1}),n(f,{color:"primary",size:"lg",loading:t(h),type:"submit"},{default:r(()=>[p(d(a.$t("console-common.create")),1)]),_:1},8,["loading"])])]),_:1},8,["schema","state","onSubmit"])]),_:1},8,["title","description"])}}});export{ve as default};
