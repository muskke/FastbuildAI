import{bX as w,r as O,j as C,bR as g,ah as k,ak as T,am as K,o as U,ap as x,af as I,aA as P,aB as N,bs as b,bY as R,bZ as m,bU as Y,b5 as B,b_ as _,b$ as D,c0 as M,c1 as F,c2 as y}from"#entry";const j=w(()=>O([]));function q(){const e=j();return{add(t){const a=e.value[0];t!==a&&a?.pause(),e.value=L(e.value,t),e.value.unshift(t)},remove(t){e.value=L(e.value,t),e.value[0]?.resume()}}}function L(e,t){const a=[...e],c=a.indexOf(t);return c!==-1&&a.splice(c,1),a}function $(e){return e.filter(t=>t.tagName!=="A")}var G=C({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const a=e,c=t,{currentRef:v,currentElement:d}=g(),f=O(null),S=q(),i=k({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});T(n=>{if(!Y)return;const s=d.value;if(!a.trapped)return;function o(l){if(i.paused||!s)return;const p=l.target;s.contains(p)?f.value=p:m(f.value,{select:!0})}function E(l){if(i.paused||!s)return;const p=l.relatedTarget;p!==null&&(s.contains(p)||m(f.value,{select:!0}))}function r(l){s.contains(f.value)||m(s)}document.addEventListener("focusin",o),document.addEventListener("focusout",E);const u=new MutationObserver(r);s&&u.observe(s,{childList:!0,subtree:!0}),n(()=>{document.removeEventListener("focusin",o),document.removeEventListener("focusout",E),u.disconnect()})}),T(async n=>{const s=d.value;if(await B(),!s)return;S.add(i);const o=b();if(!s.contains(o)){const r=new CustomEvent(_,y);s.addEventListener(_,u=>c("mountAutoFocus",u)),s.dispatchEvent(r),r.defaultPrevented||(D($(M(s)),{select:!0}),b()===o&&m(s))}n(()=>{s.removeEventListener(_,l=>c("mountAutoFocus",l));const r=new CustomEvent(F,y),u=l=>{c("unmountAutoFocus",l)};s.addEventListener(F,u),s.dispatchEvent(r),setTimeout(()=>{r.defaultPrevented||m(o??document.body,{select:!0}),s.removeEventListener(F,u),S.remove(i)},0)})});function h(n){if(!a.loop&&!a.trapped||i.paused)return;const s=n.key==="Tab"&&!n.altKey&&!n.ctrlKey&&!n.metaKey,o=b();if(s&&o){const E=n.currentTarget,[r,u]=R(E);r&&u?!n.shiftKey&&o===u?(n.preventDefault(),a.loop&&m(r,{select:!0})):n.shiftKey&&o===r&&(n.preventDefault(),a.loop&&m(u,{select:!0})):o===E&&n.preventDefault()}}return(n,s)=>(U(),K(P(N),{ref_key:"currentRef",ref:v,tabindex:"-1","as-child":n.asChild,as:n.as,onKeydown:h},{default:x(()=>[I(n.$slots,"default")]),_:3},8,["as-child","as"]))}}),J=G;const Q="menu.itemSelect",A=["Enter"," "],H=["ArrowDown","PageUp","Home"],V=["ArrowUp","PageDown","End"],W=[...H,...V],ee={ltr:[...A,"ArrowRight"],rtl:[...A,"ArrowLeft"]},te={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function se(e){return e?"open":"closed"}function X(e){return e==="indeterminate"}function ne(e){return X(e)?"indeterminate":e?"checked":"unchecked"}function ae(e){const t=b();for(const a of e)if(a===t||(a.focus(),b()!==t))return}function Z(e,t){const{x:a,y:c}=e;let v=!1;for(let d=0,f=t.length-1;d<t.length;f=d++){const S=t[d].x,i=t[d].y,h=t[f].x,n=t[f].y;i>c!=n>c&&a<(h-S)*(c-i)/(n-i)+S&&(v=!v)}return v}function oe(e,t){if(!t)return!1;const a={x:e.clientX,y:e.clientY};return Z(a,t)}function re(e){return e.pointerType==="mouse"}export{J as F,Q as I,V as L,A as S,W as a,re as b,ne as c,X as d,te as e,ae as f,se as g,ee as h,oe as i};
